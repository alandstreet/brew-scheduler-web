import{p as N,l as f,z as i,A as K,s as z,a2 as Bt,P as Ye,F as xe,I as Re,a4 as Vt,r as $,L as j,a5 as Dt,a1 as Ae,ac as Ze,o as ue,ad as et,ae as tt,C as lt,B as at,af as $t,ag as Ot,ah as Mt,ai as Qe,aj as ke,ak as Ne,al as Et,a0 as Fe,am as Lt,X as Ce,an as G,k as E,g as jt,ao as At,R as ze,ap as Qt,a3 as Nt,aq as zt,c as He,a as qe,w as D,b as X,h as Ht,d as F,i as Ut,j as Pe,ar as Ue,Q as Ie,f as oe,t as We,S as re,as as It}from"./index-Bthj_C2a.js";import{u as Wt,i as Kt,h as Gt,j as nt,e as Xt,d as ie,f as Ke,v as Jt}from"./v4-DOo0gNJX.js";import{Q as Yt}from"./QPage-WVqtM5eH.js";import{u as Zt}from"./use-quasar-DrXE21lV.js";const el=N({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const o=z(),v=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return i("td",{class:v.value},K(a.default));const n=o.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(d===void 0)return;const{row:r}=e.props;return i("td",{class:v.value+d.__tdClass(r),style:d.__tdStyle(r)},K(a.default))}}}),tl=N({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:o}){const v=z(),{proxy:{$q:n}}=v,d=r=>{o("click",r)};return()=>{if(e.props===void 0)return i("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},K(a.default));let r,u;const c=v.vnode.key;if(c){if(r=e.props.colsMap[c],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const l=r.align==="right"?"unshift":"push";u=Bt(a.default,[]),u[l](i(Ye,{class:r.__iconClass,name:n.iconSet.table.arrowUp}))}else u=K(a.default);const S={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:l=>{r.sortable===!0&&e.props.sort(r),d(l)}};return i("th",S,u)}}}),ll=["horizontal","vertical","cell","none"],al=N({name:"QMarkupTable",props:{...xe,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ll.includes(e)}},setup(e,{slots:a}){const o=z(),v=Re(e,o.proxy.$q),n=f(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(v.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>i("div",{class:n.value},[i("table",{class:"q-table"},K(a.default))])}});function ot(e,a){return i("div",e,[i("table",{class:"q-table"},a)])}const nl={list:Gt,table:al},ol=["list","table","__qtable"],rl=N({name:"QVirtualScroll",props:{...Wt,type:{type:String,default:"list",validator:e=>ol.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Vt},setup(e,{slots:a,attrs:o}){let v;const n=$(null),d=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:u,padVirtualScroll:c,onVirtualScrollEvt:S}=Kt({virtualScrollLength:d,getVirtualScrollTarget:k,getVirtualScrollEl:m}),l=f(()=>{if(d.value===0)return[];const O=(R,g)=>({index:r.value.from+g,item:R});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(O):e.itemsFn(r.value.from,r.value.to-r.value.from).map(O)}),b=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),x=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});j(d,()=>{u()}),j(()=>e.scrollTarget,()=>{w(),P()});function m(){return n.value.$el||n.value}function k(){return v}function P(){v=Dt(m(),e.scrollTarget),v.addEventListener("scroll",S,Ae.passive)}function w(){v!==void 0&&(v.removeEventListener("scroll",S,Ae.passive),v=void 0)}function V(){let O=c(e.type==="list"?"div":"tbody",l.value.map(a.default));return a.before!==void 0&&(O=a.before().concat(O)),at(a.after,O)}return Ze(()=>{u()}),ue(()=>{P()}),et(()=>{P()}),tt(()=>{w()}),lt(()=>{w()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ot({ref:n,class:"q-table__middle "+b.value},V()):i(nl[e.type],{...o,ref:n,class:[o.class,b.value],...x.value},V)}}}),il={xs:2,sm:4,md:6,lg:10,xl:14};function Ge(e,a,o){return{transform:a===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const sl=N({name:"QLinearProgress",props:{...xe,...$t,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:o}=z(),v=Re(e,o.$q),n=Ot(e,il),d=f(()=>e.indeterminate===!0||e.query===!0),r=f(()=>e.reverse!==e.query),u=f(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),S=f(()=>Ge(e.buffer!==void 0?e.buffer:1,r.value,o.$q)),l=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),b=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${l.value} q-linear-progress__track--${v.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),x=f(()=>Ge(d.value===!0?1:e.value,r.value,o.$q)),m=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${l.value} q-linear-progress__model--${d.value===!0?"in":""}determinate`),k=f(()=>({width:`${e.value*100}%`})),P=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${l.value}`);return()=>{const w=[i("div",{class:b.value,style:S.value}),i("div",{class:m.value,style:x.value})];return e.stripe===!0&&d.value===!1&&w.push(i("div",{class:P.value,style:k.value})),i("div",{class:c.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},at(a.default,w))}}});let J=0;const ul={fullscreen:Boolean,noRouteFullscreenExit:Boolean},cl=["update:fullscreen","fullscreen"];function dl(){const e=z(),{props:a,emit:o,proxy:v}=e;let n,d,r;const u=$(!1);Mt(e)===!0&&j(()=>v.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&l()}),j(()=>a.fullscreen,b=>{u.value!==b&&c()}),j(u,b=>{o("update:fullscreen",b),o("fullscreen",b)});function c(){u.value===!0?l():S()}function S(){u.value!==!0&&(u.value=!0,r=v.$el.parentNode,r.replaceChild(d,v.$el),document.body.appendChild(v.$el),J++,J===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:l},Qe.add(n))}function l(){u.value===!0&&(n!==void 0&&(Qe.remove(n),n=void 0),r.replaceChild(v.$el,d),u.value=!1,J=Math.max(0,J-1),J===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),v.$el.scrollIntoView!==void 0&&setTimeout(()=>{v.$el.scrollIntoView()})))}return Ze(()=>{d=document.createElement("span")}),ue(()=>{a.fullscreen===!0&&S()}),lt(l),Object.assign(v,{toggleFullscreen:c,setFullscreen:S,exitFullscreen:l}),{inFullscreen:u,toggleFullscreen:c}}function vl(e,a){return new Date(e)-new Date(a)}const fl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function ml(e,a,o,v){const n=f(()=>{const{sortBy:u}=a.value;return u&&o.value.find(c=>c.name===u)||null}),d=f(()=>e.sortMethod!==void 0?e.sortMethod:(u,c,S)=>{const l=o.value.find(m=>m.name===c);if(l===void 0||l.field===void 0)return u;const b=S===!0?-1:1,x=typeof l.field=="function"?m=>l.field(m):m=>m[l.field];return u.sort((m,k)=>{let P=x(m),w=x(k);return l.rawSort!==void 0?l.rawSort(P,w,m,k)*b:P==null?-1*b:w==null?1*b:l.sort!==void 0?l.sort(P,w,m,k)*b:ke(P)===!0&&ke(w)===!0?(P-w)*b:Ne(P)===!0&&Ne(w)===!0?vl(P,w)*b:typeof P=="boolean"&&typeof w=="boolean"?(P-w)*b:([P,w]=[P,w].map(V=>(V+"").toLocaleString().toLowerCase()),P<w?-1*b:P===w?0:b)})});function r(u){let c=e.columnSortOrder;if(Et(u)===!0)u.sortOrder&&(c=u.sortOrder),u=u.name;else{const b=o.value.find(x=>x.name===u);b?.sortOrder&&(c=b.sortOrder)}let{sortBy:S,descending:l}=a.value;S!==u?(S=u,l=c==="da"):e.binaryStateSort===!0?l=!l:l===!0?c==="ad"?S=null:l=!1:c==="ad"?l=!0:S=null,v({sortBy:S,descending:l,page:1})}return{columnToSort:n,computedSortMethod:d,sort:r}}const gl={filter:[String,Object],filterMethod:Function};function bl(e,a){const o=f(()=>e.filterMethod!==void 0?e.filterMethod:(v,n,d,r)=>{const u=n?n.toLowerCase():"";return v.filter(c=>d.some(S=>{const l=r(S,c)+"";return(l==="undefined"||l==="null"?"":l.toLowerCase()).indexOf(u)!==-1}))});return j(()=>e.filter,()=>{Fe(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function yl(e,a){for(const o in a)if(a[o]!==e[o])return!1;return!0}function Xe(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Sl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function _l(e,a){const{props:o,emit:v}=e,n=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),d=f(()=>{const l=o["onUpdate:pagination"]!==void 0?{...n.value,...o.pagination}:n.value;return Xe(l)}),r=f(()=>d.value.rowsNumber!==void 0);function u(l){c({pagination:l,filter:o.filter})}function c(l={}){Fe(()=>{v("request",{pagination:l.pagination||d.value,filter:l.filter||o.filter,getCellValue:a})})}function S(l,b){const x=Xe({...d.value,...l});if(yl(d.value,x)===!0){r.value===!0&&b===!0&&u(x);return}if(r.value===!0){u(x);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?v("update:pagination",x):n.value=x}return{innerPagination:n,computedPagination:d,isServerSide:r,requestServerInteraction:c,setPagination:S}}function hl(e,a,o,v,n,d){const{props:r,emit:u,proxy:{$q:c}}=e,S=f(()=>v.value===!0?o.value.rowsNumber||0:d.value),l=f(()=>{const{page:g,rowsPerPage:y}=o.value;return(g-1)*y}),b=f(()=>{const{page:g,rowsPerPage:y}=o.value;return g*y}),x=f(()=>o.value.page===1),m=f(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(S.value/o.value.rowsPerPage))),k=f(()=>b.value===0?!0:o.value.page>=m.value),P=f(()=>(r.rowsPerPageOptions.includes(a.value.rowsPerPage)?r.rowsPerPageOptions:[a.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(y=>({label:y===0?c.lang.table.allRows:""+y,value:y})));j(m,(g,y)=>{if(g===y)return;const C=o.value.page;g&&!C?n({page:1}):g<C&&n({page:g})});function w(){n({page:1})}function V(){const{page:g}=o.value;g>1&&n({page:g-1})}function O(){const{page:g,rowsPerPage:y}=o.value;b.value>0&&g*y<S.value&&n({page:g+1})}function R(){n({page:m.value})}return r["onUpdate:pagination"]!==void 0&&u("update:pagination",{...o.value}),{firstRowIndex:l,lastRowIndex:b,isFirstPage:x,isLastPage:k,pagesNumber:m,computedRowsPerPageOptions:P,computedRowsNumber:S,firstPage:w,prevPage:V,nextPage:O,lastPage:R}}const wl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Cl=["update:selected","selection"];function ql(e,a,o,v){const n=f(()=>{const k={};return e.selected.map(v.value).forEach(P=>{k[P]=!0}),k}),d=f(()=>e.selection!=="none"),r=f(()=>e.selection==="single"),u=f(()=>e.selection==="multiple"),c=f(()=>o.value.length!==0&&o.value.every(k=>n.value[v.value(k)]===!0)),S=f(()=>c.value!==!0&&o.value.some(k=>n.value[v.value(k)]===!0)),l=f(()=>e.selected.length);function b(k){return n.value[k]===!0}function x(){a("update:selected",[])}function m(k,P,w,V){a("selection",{rows:P,added:w,keys:k,evt:V});const O=r.value===!0?w===!0?P:[]:w===!0?e.selected.concat(P):e.selected.filter(R=>k.includes(v.value(R))===!1);a("update:selected",O)}return{hasSelectionMode:d,singleSelection:r,multipleSelection:u,allRowsSelected:c,someRowsSelected:S,rowsSelectedNumber:l,isRowSelected:b,clearSelection:x,updateSelection:m}}function Je(e){return Array.isArray(e)?e.slice():[]}const Pl={expanded:Array},kl=["update:expanded"];function xl(e,a){const o=$(Je(e.expanded));j(()=>e.expanded,r=>{o.value=Je(r)});function v(r){return o.value.includes(r)}function n(r){e.expanded!==void 0?a("update:expanded",r):o.value=r}function d(r,u){const c=o.value.slice(),S=c.indexOf(r);u===!0?S===-1&&(c.push(r),n(c)):S!==-1&&(c.splice(S,1),n(c))}return{isRowExpanded:v,setExpanded:n,updateExpanded:d}}const Rl={visibleColumns:Array};function Fl(e,a,o){const v=f(()=>{if(e.columns!==void 0)return e.columns;const u=e.rows[0];return u!==void 0?Object.keys(u).map(c=>({name:c,label:c.toUpperCase(),field:c,align:ke(u[c])?"right":"left",sortable:!0})):[]}),n=f(()=>{const{sortBy:u,descending:c}=a.value;return(e.visibleColumns!==void 0?v.value.filter(l=>l.required===!0||e.visibleColumns.includes(l.name)===!0):v.value).map(l=>{const b=l.align||"right",x=`text-${b}`;return{...l,align:b,__iconClass:`q-table__sort-icon q-table__sort-icon--${b}`,__thClass:x+(l.headerClasses!==void 0?" "+l.headerClasses:"")+(l.sortable===!0?" sortable":"")+(l.name===u?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:l.style!==void 0?typeof l.style!="function"?()=>l.style:l.style:()=>null,__tdClass:l.classes!==void 0?typeof l.classes!="function"?()=>x+" "+l.classes:m=>x+" "+l.classes(m):()=>x}})}),d=f(()=>{const u={};return n.value.forEach(c=>{u[c.name]=c}),u}),r=f(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(o.value===!0?1:0));return{colList:v,computedCols:n,computedColsMap:d,computedColspan:r}}const se="q-table__bottom row items-center",rt={};nt.forEach(e=>{rt[e]={}});const Tl=N({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...rt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...xe,...ul,...Rl,...gl,...Sl,...Pl,...wl,...fl},emits:["request","virtualScroll",...cl,...kl,...Cl],setup(e,{slots:a,emit:o}){const v=z(),{proxy:{$q:n}}=v,d=Re(e,n),{inFullscreen:r,toggleFullscreen:u}=dl(),c=f(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),S=$(null),l=$(null),b=f(()=>e.grid!==!0&&e.virtualScroll===!0),x=f(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),m=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":x.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),k=f(()=>m.value+(e.loading===!0?" q-table--loading":""));j(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+m.value,()=>{b.value===!0&&l.value?.reset()});const{innerPagination:P,computedPagination:w,isServerSide:V,requestServerInteraction:O,setPagination:R}=_l(v,I),{computedFilterMethod:g}=bl(e,R),{isRowExpanded:y,setExpanded:C,updateExpanded:H}=xl(e,o),ce=f(()=>{let t=e.rows;if(V.value===!0||t.length===0)return t;const{sortBy:s,descending:_}=w.value;return e.filter&&(t=g.value(t,e.filter,L.value,I)),dt.value!==null&&(t=vt.value(e.rows===t?t.slice():t,s,_)),t}),Te=f(()=>ce.value.length),A=f(()=>{let t=ce.value;if(V.value===!0)return t;const{rowsPerPage:s}=w.value;return s!==0&&(Z.value===0&&e.rows!==t?t.length>ee.value&&(t=t.slice(0,ee.value)):t=t.slice(Z.value,ee.value)),t}),{hasSelectionMode:U,singleSelection:it,multipleSelection:pe,allRowsSelected:st,someRowsSelected:Be,rowsSelectedNumber:de,isRowSelected:ve,clearSelection:ut,updateSelection:Y}=ql(e,o,A,c),{colList:ct,computedCols:L,computedColsMap:Ve,computedColspan:De}=Fl(e,w,U),{columnToSort:dt,computedSortMethod:vt,sort:fe}=ml(e,w,ct,R),{firstRowIndex:Z,lastRowIndex:ee,isFirstPage:me,isLastPage:ge,pagesNumber:te,computedRowsPerPageOptions:ft,computedRowsNumber:le,firstPage:be,prevPage:ye,nextPage:Se,lastPage:_e}=hl(v,P,w,V,R,Te),mt=f(()=>A.value.length===0),gt=f(()=>{const t={};return nt.forEach(s=>{t[s]=e[s]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function bt(){b.value===!0&&l.value.reset()}function yt(){if(e.grid===!0)return Tt();const t=e.hideHeader!==!0?Le:null;if(b.value===!0){const _=a["top-row"],h=a["bottom-row"],q={default:B=>Oe(B.item,a.body,B.index)};if(_!==void 0){const B=i("tbody",_({cols:L.value}));q.before=t===null?()=>B:()=>[t()].concat(B)}else t!==null&&(q.before=t);return h!==void 0&&(q.after=()=>i("tbody",h({cols:L.value}))),i(rl,{ref:l,class:e.tableClass,style:e.tableStyle,...gt.value,scrollTarget:e.virtualScrollTarget,items:A.value,type:"__qtable",tableColspan:De.value,onVirtualScroll:_t},q)}const s=[ht()];return t!==null&&s.unshift(t()),ot({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},s)}function St(t,s){if(l.value!==null){l.value.scrollTo(t,s);return}t=parseInt(t,10);const _=S.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(_!==null){const h=S.value.querySelector(".q-table__middle.scroll"),q=_.offsetTop-e.virtualScrollStickySizeStart,B=q<h.scrollTop?"decrease":"increase";h.scrollTop=q,o("virtualScroll",{index:t,from:0,to:P.value.rowsPerPage-1,direction:B})}}function _t(t){o("virtualScroll",t)}function $e(){return[i(sl,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function Oe(t,s,_){const h=c.value(t),q=ve(h);if(s!==void 0){const p={key:h,row:t,pageIndex:_,__trClass:q?"selected":""};if(e.tableRowStyleFn!==void 0&&(p.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const Q=e.tableRowClassFn(t);Q&&(p.__trClass=`${Q} ${p.__trClass}`)}return s(Me(p))}const B=a["body-cell"],T=L.value.map(p=>{const Q=a[`body-cell-${p.name}`],ne=Q!==void 0?Q:B;return ne!==void 0?ne(wt({key:h,row:t,pageIndex:_,col:p})):i("td",{class:p.__tdClass(t),style:p.__tdStyle(t)},I(p,t))});if(U.value===!0){const p=a["body-selection"],Q=p!==void 0?p(Ct({key:h,row:t,pageIndex:_})):[i(Ce,{modelValue:q,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(ne,pt)=>{Y([h],[t],ne,pt)}})];T.unshift(i("td",{class:"q-table--col-auto-width"},Q))}const M={key:h,class:{selected:q}};if(e.onRowClick!==void 0&&(M.class["cursor-pointer"]=!0,M.onClick=p=>{o("rowClick",p,t,_)}),e.onRowDblclick!==void 0&&(M.class["cursor-pointer"]=!0,M.onDblclick=p=>{o("rowDblclick",p,t,_)}),e.onRowContextmenu!==void 0&&(M.class["cursor-pointer"]=!0,M.onContextmenu=p=>{o("rowContextmenu",p,t,_)}),e.tableRowStyleFn!==void 0&&(M.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const p=e.tableRowClassFn(t);p&&(M.class[p]=!0)}return i("tr",M,T)}function ht(){const t=a.body,s=a["top-row"],_=a["bottom-row"];let h=A.value.map((q,B)=>Oe(q,t,B));return s!==void 0&&(h=s({cols:L.value}).concat(h)),_!==void 0&&(h=h.concat(_({cols:L.value}))),i("tbody",h)}function Me(t){return he(t),t.cols=t.cols.map(s=>G({...s},"value",()=>I(s,t.row))),t}function wt(t){return he(t),G(t,"value",()=>I(t.col,t.row)),t}function Ct(t){return he(t),t}function he(t){Object.assign(t,{cols:L.value,colsMap:Ve.value,sort:fe,rowIndex:Z.value+t.pageIndex,color:e.color,dark:d.value,dense:e.dense}),U.value===!0&&G(t,"selected",()=>ve(t.key),(s,_)=>{Y([t.key],[t.row],s,_)}),G(t,"expand",()=>y(t.key),s=>{H(t.key,s)})}function I(t,s){const _=typeof t.field=="function"?t.field(s):s[t.field];return t.format!==void 0?t.format(_,s):_}const W=f(()=>({pagination:w.value,pagesNumber:te.value,isFirstPage:me.value,isLastPage:ge.value,firstPage:be,prevPage:ye,nextPage:Se,lastPage:_e,inFullscreen:r.value,toggleFullscreen:u}));function qt(){const t=a.top,s=a["top-left"],_=a["top-right"],h=a["top-selection"],q=U.value===!0&&h!==void 0&&de.value>0,B="q-table__top relative-position row items-center";if(t!==void 0)return i("div",{class:B},[t(W.value)]);let T;if(q===!0?T=h(W.value).slice():(T=[],s!==void 0?T.push(i("div",{class:"q-table__control"},[s(W.value)])):e.title&&T.push(i("div",{class:"q-table__control"},[i("div",{class:["q-table__title",e.titleClass]},e.title)]))),_!==void 0&&(T.push(i("div",{class:"q-table__separator col"})),T.push(i("div",{class:"q-table__control"},[_(W.value)]))),T.length!==0)return i("div",{class:B},T)}const Ee=f(()=>Be.value===!0?null:st.value);function Le(){const t=Pt();return e.loading===!0&&a.loading===void 0&&t.push(i("tr",{class:"q-table__progress"},[i("th",{class:"relative-position",colspan:De.value},$e())])),i("thead",t)}function Pt(){const t=a.header,s=a["header-cell"];if(t!==void 0)return t(we({header:!0})).slice();const _=L.value.map(h=>{const q=a[`header-cell-${h.name}`],B=q!==void 0?q:s,T=we({col:h});return B!==void 0?B(T):i(tl,{key:h.name,props:T},()=>h.label)});if(it.value===!0&&e.grid!==!0)_.unshift(i("th",{class:"q-table--col-auto-width"}," "));else if(pe.value===!0){const h=a["header-selection"],q=h!==void 0?h(we({})):[i(Ce,{color:e.color,modelValue:Ee.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":je})];_.unshift(i("th",{class:"q-table--col-auto-width"},q))}return[i("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},_)]}function we(t){return Object.assign(t,{cols:L.value,sort:fe,colsMap:Ve.value,color:e.color,dark:d.value,dense:e.dense}),pe.value===!0&&G(t,"selected",()=>Ee.value,je),t}function je(t){Be.value===!0&&(t=!1),Y(A.value.map(c.value),A.value,t)}const ae=f(()=>{const t=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?t.reverse():t});function kt(){if(e.hideBottom===!0)return;if(mt.value===!0){if(e.hideNoData===!0)return;const _=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,h=a["no-data"],q=h!==void 0?[h({message:_,icon:n.iconSet.table.warning,filter:e.filter})]:[i(Ye,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),_];return i("div",{class:se+" q-table__bottom--nodata"},q)}const t=a.bottom;if(t!==void 0)return i("div",{class:se},[t(W.value)]);const s=e.hideSelectedBanner!==!0&&U.value===!0&&de.value>0?[i("div",{class:"q-table__control"},[i("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(de.value)])])]:[];if(e.hidePagination!==!0)return i("div",{class:se+" justify-end"},Rt(s));if(s.length!==0)return i("div",{class:se},s)}function xt(t){R({page:1,rowsPerPage:t.value})}function Rt(t){let s;const{rowsPerPage:_}=w.value,h=e.paginationLabel||n.lang.table.pagination,q=a.pagination,B=e.rowsPerPageOptions.length>1;if(t.push(i("div",{class:"q-table__separator col"})),B===!0&&t.push(i("div",{class:"q-table__control"},[i("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),i(Xt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:_,options:ft.value,displayValue:_===0?n.lang.table.allRows:_,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":xt})])),q!==void 0)s=q(W.value);else if(s=[i("span",_!==0?{class:"q-table__bottom-item"}:{},[_?h(Z.value+1,Math.min(ee.value,le.value),le.value):h(1,Te.value,le.value)])],_!==0&&te.value>1){const T={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(T.size="sm"),te.value>2&&s.push(i(E,{key:"pgFirst",...T,icon:ae.value[0],disable:me.value,"aria-label":n.lang.pagination.first,onClick:be})),s.push(i(E,{key:"pgPrev",...T,icon:ae.value[1],disable:me.value,"aria-label":n.lang.pagination.prev,onClick:ye}),i(E,{key:"pgNext",...T,icon:ae.value[2],disable:ge.value,"aria-label":n.lang.pagination.next,onClick:Se})),te.value>2&&s.push(i(E,{key:"pgLast",...T,icon:ae.value[3],disable:ge.value,"aria-label":n.lang.pagination.last,onClick:_e}))}return t.push(i("div",{class:"q-table__control"},s)),t}function Ft(){const t=e.gridHeader===!0?[i("table",{class:"q-table"},[Le()])]:e.loading===!0&&a.loading===void 0?$e():void 0;return i("div",{class:"q-table__middle"},t)}function Tt(){const t=a.item!==void 0?a.item:s=>{const _=s.cols.map(q=>i("div",{class:"q-table__grid-item-row"},[i("div",{class:"q-table__grid-item-title"},[q.label]),i("div",{class:"q-table__grid-item-value"},[q.value])]));if(U.value===!0){const q=a["body-selection"],B=q!==void 0?q(s):[i(Ce,{modelValue:s.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(T,M)=>{Y([s.key],[s.row],T,M)}})];_.unshift(i("div",{class:"q-table__grid-item-row"},B),i(jt,{dark:d.value}))}const h={class:["q-table__grid-item-card"+x.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(s.row)]),e.cardClassFn!==void 0){const q=e.cardClassFn(s.row);q&&(h.class[0]+=` ${q}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=q=>{o("RowClick",q,s.row,s.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=q=>{o("RowDblclick",q,s.row,s.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=q=>{o("rowContextmenu",q,s.row,s.pageIndex)})),i("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(s.selected===!0?" q-table__grid-item--selected":"")},[i("div",h,_)])};return i("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},A.value.map((s,_)=>t(Me({key:c.value(s),row:s,pageIndex:_}))))}return Object.assign(v.proxy,{requestServerInteraction:O,setPagination:R,firstPage:be,prevPage:ye,nextPage:Se,lastPage:_e,isRowSelected:ve,clearSelection:ut,isRowExpanded:y,setExpanded:C,sort:fe,resetVirtualScroll:bt,scrollTo:St,getCellValue:I}),Lt(v.proxy,{filteredSortedRows:()=>ce.value,computedRows:()=>A.value,computedRowsNumber:()=>le.value}),()=>{const t=[qt()],s={ref:S,class:k.value};return e.grid===!0?t.push(Ft()):Object.assign(s,{class:[s.class,e.cardClass],style:e.cardStyle}),t.push(yt(),kt()),e.loading===!0&&a.loading!==void 0&&t.push(a.loading()),i("div",s,t)}}}),pl=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:o}){const v=z(),n=$(null);let d=0;const r=[];function u(m){const k=typeof m=="boolean"?m:e.noErrorFocus!==!0,P=++d,w=(R,g)=>{o(`validation${R===!0?"Success":"Error"}`,g)},V=R=>{const g=R.validate();return typeof g.then=="function"?g.then(y=>({valid:y,comp:R}),y=>({valid:!1,comp:R,err:y})):Promise.resolve({valid:g,comp:R})};return(e.greedy===!0?Promise.all(r.map(V)).then(R=>R.filter(g=>g.valid!==!0)):r.reduce((R,g)=>R.then(()=>V(g).then(y=>{if(y.valid===!1)return Promise.reject(y)})),Promise.resolve()).catch(R=>[R])).then(R=>{if(R===void 0||R.length===0)return P===d&&w(!0),!0;if(P===d){const{comp:g,err:y}=R[0];if(y!==void 0&&console.error(y),w(!1,g),k===!0){const C=R.find(({comp:H})=>typeof H.focus=="function"&&At(H.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function c(){d++,r.forEach(m=>{typeof m.resetValidation=="function"&&m.resetValidation()})}function S(m){m!==void 0&&ze(m);const k=d+1;u().then(P=>{k===d&&P===!0&&(e.onSubmit!==void 0?o("submit",m):m?.target!==void 0&&typeof m.target.submit=="function"&&m.target.submit())})}function l(m){m!==void 0&&ze(m),o("reset"),Fe(()=>{c(),e.autofocus===!0&&e.noResetFocus!==!0&&b()})}function b(){Qt(()=>{if(n.value===null)return;(n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),k=>k.tabIndex!==-1))?.focus({preventScroll:!0})})}Nt(zt,{bindComponent(m){r.push(m)},unbindComponent(m){const k=r.indexOf(m);k!==-1&&r.splice(k,1)}});let x=!1;return tt(()=>{x=!0}),et(()=>{x===!0&&e.autofocus===!0&&b()}),ue(()=>{e.autofocus===!0&&b()}),Object.assign(v.proxy,{validate:u,resetValidation:c,submit:S,reset:l,focus:b,getValidationComponents:()=>r}),()=>i("form",{class:"q-form",ref:n,onSubmit:S,onReset:l},K(a.default))}}),Bl={class:"row items-center justify-between q-mb-md"},Vl={key:0,class:"flex flex-center q-pa-xl"},Dl={class:"text-h6"},$l={class:"row justify-end q-gutter-sm"},jl={__name:"TemplatesPage",setup(e){const a=Zt(),o=$([]),v=$(!1),n=$(!1),d=$(!1),r=$(!1),u=$(!1),c=$(!1),S=$(null),l=$({beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null}),b=$(null),x=[{name:"beer_name",label:"Beer Name",field:"beer_name",align:"left",sortable:!0},{name:"volume_hl",label:"Volume (hl)",field:"volume_hl",align:"center",sortable:!0},{name:"min_fermentation_days",label:"Fermentation (days)",field:"min_fermentation_days",align:"center",sortable:!0},{name:"min_maturation_days",label:"Maturation (days)",field:"min_maturation_days",align:"center",sortable:!0},{name:"actions",label:"Actions",field:"actions",align:"center"}],m=async()=>{v.value=!0;try{o.value=await ie.getAll()}catch(g){a.notify({type:"negative",message:"Failed to load beer templates",caption:g.response?.data?.message||g.message})}finally{v.value=!1}},k=()=>{c.value=!1,b.value=null,l.value={beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null},r.value=!0},P=g=>{c.value=!0,b.value=g.beer_template_id,l.value={beer_name:g.beer_name,volume_hl:g.volume_hl,min_fermentation_days:g.min_fermentation_days,min_maturation_days:g.min_maturation_days},r.value=!0},w=()=>{r.value=!1,l.value={beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null}},V=async()=>{n.value=!0;try{if(c.value)await ie.update(b.value,l.value),a.notify({type:"positive",message:"Template updated successfully"});else{const g={...l.value,beer_template_id:Jt()};await ie.create(g),a.notify({type:"positive",message:"Template created successfully"})}w(),await m()}catch(g){a.notify({type:"negative",message:`Failed to ${c.value?"update":"create"} template`,caption:g.response?.data?.message||g.message})}finally{n.value=!1}},O=g=>{S.value=g,u.value=!0},R=async()=>{d.value=!0;try{await ie.delete(S.value.beer_template_id),a.notify({type:"positive",message:"Template deleted successfully"}),u.value=!1,await m()}catch(g){a.notify({type:"negative",message:"Failed to delete template",caption:g.response?.data?.message||g.message})}finally{d.value=!1}};return ue(()=>{m()}),(g,y)=>(qe(),He(Yt,{class:"q-pa-md"},{default:D(()=>[X("div",Bl,[y[7]||(y[7]=X("div",{class:"text-h4"},"Beer Templates",-1)),F(E,{color:"primary",icon:"add",label:"New Template",onClick:k})]),v.value?(qe(),Ht("div",Vl,[F(Ut,{size:"xl",color:"primary"})])):(qe(),He(Tl,{key:1,rows:o.value,columns:x,"row-key":"beer_template_id",pagination:{rowsPerPage:10},flat:"",bordered:""},{"body-cell-actions":D(C=>[F(el,{props:C},{default:D(()=>[F(E,{flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:H=>P(C.row)},{default:D(()=>[F(Ke,null,{default:D(()=>[...y[8]||(y[8]=[Pe("Edit",-1)])]),_:1})]),_:1},8,["onClick"]),F(E,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:H=>O(C.row)},{default:D(()=>[F(Ke,null,{default:D(()=>[...y[9]||(y[9]=[Pe("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])),F(Ue,{modelValue:r.value,"onUpdate:modelValue":y[4]||(y[4]=C=>r.value=C),persistent:""},{default:D(()=>[F(Ie,{style:{"min-width":"400px"}},{default:D(()=>[F(oe,null,{default:D(()=>[X("div",Dl,We(c.value?"Edit":"Create")+" Beer Template",1)]),_:1}),F(oe,{class:"q-pt-none"},{default:D(()=>[F(pl,{onSubmit:V,class:"q-gutter-md"},{default:D(()=>[F(re,{modelValue:l.value.beer_name,"onUpdate:modelValue":y[0]||(y[0]=C=>l.value.beer_name=C),label:"Beer Name *",outlined:"",rules:[C=>!!C||"Beer name is required"]},null,8,["modelValue","rules"]),F(re,{modelValue:l.value.volume_hl,"onUpdate:modelValue":y[1]||(y[1]=C=>l.value.volume_hl=C),modelModifiers:{number:!0},label:"Volume (hectoliters) *",type:"number",outlined:"",rules:[C=>C!==null&&C!==""||"Volume is required",C=>C>0||"Volume must be greater than 0"]},null,8,["modelValue","rules"]),F(re,{modelValue:l.value.min_fermentation_days,"onUpdate:modelValue":y[2]||(y[2]=C=>l.value.min_fermentation_days=C),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",rules:[C=>C!==null&&C!==""||"Fermentation days is required",C=>C>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),F(re,{modelValue:l.value.min_maturation_days,"onUpdate:modelValue":y[3]||(y[3]=C=>l.value.min_maturation_days=C),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",rules:[C=>C!==null&&C!==""||"Maturation days is required",C=>C>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),X("div",$l,[F(E,{flat:"",label:"Cancel",color:"primary",onClick:w}),F(E,{type:"submit",label:"Save",color:"primary",loading:n.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),F(Ue,{modelValue:u.value,"onUpdate:modelValue":y[6]||(y[6]=C=>u.value=C),persistent:""},{default:D(()=>[F(Ie,null,{default:D(()=>[F(oe,null,{default:D(()=>[...y[10]||(y[10]=[X("div",{class:"text-h6"},"Confirm Delete",-1)])]),_:1}),F(oe,{class:"q-pt-none"},{default:D(()=>[Pe(' Are you sure you want to delete the template "'+We(S.value?.beer_name)+'"? ',1)]),_:1}),F(It,{align:"right"},{default:D(()=>[F(E,{flat:"",label:"Cancel",color:"primary",onClick:y[5]||(y[5]=C=>u.value=!1)}),F(E,{flat:"",label:"Delete",color:"negative",loading:d.value,onClick:R},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{jl as default};
