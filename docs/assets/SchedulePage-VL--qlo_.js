import{c as st,C as Dt,h as B,T as Gt,U as Xt,V as Zt,W as Jt,X as ea,Y as xt,v as ta,Z as aa,r as w,_ as sa,$ as na,n as Q,G as Qe,a0 as oa,i as we,a1 as tt,a2 as la,A as ia,a3 as Z,a4 as ra,R as da,a5 as ua,a6 as ca,a7 as ga,a8 as ma,o as ya,a as E,b as c,w as d,d as o,e as i,j as p,k as pt,f as x,l as y,Q as Le,g as Be,t as m,a9 as z,m as W,aa as X,ab as oe,ac as Ke,ad as Ae,ae as va,af as _a,ag as pa,ah as fa}from"./index-CTvb7-1g.js";import{Q as at,a as me,b as J,c as $,v as ha,d as wa,e as Ye,f as he,g as ft,h as ht}from"./v4-CWZVavcE.js";import{Q as ka}from"./QSpace-D1O0eANP.js";import{Q as ba}from"./QPage-CyqBXSL_.js";import{u as Da}from"./use-quasar-DsbmvyR8.js";const xa=st({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(s,{slots:l,emit:f}){let h=!1,D,b,S=null,q=null,V,O;function R(){D?.(),D=null,h=!1,S!==null&&(clearTimeout(S),S=null),q!==null&&(clearTimeout(q),q=null),b?.removeEventListener("transitionend",V),V=null}function M(v,F,L){F!==void 0&&(v.style.height=`${F}px`),v.style.transition=`height ${s.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,D=L}function K(v,F){v.style.overflowY=null,v.style.height=null,v.style.transition=null,R(),F!==O&&f(F)}function ye(v,F){let L=0;b=v,h===!0?(R(),L=v.offsetHeight===v.scrollHeight?0:void 0):(O="hide",v.style.overflowY="hidden"),M(v,L,F),S=setTimeout(()=>{S=null,v.style.height=`${v.scrollHeight}px`,V=U=>{q=null,(Object(U)!==U||U.target===v)&&K(v,"show")},v.addEventListener("transitionend",V),q=setTimeout(V,s.duration*1.1)},100)}function ve(v,F){let L;b=v,h===!0?R():(O="show",v.style.overflowY="hidden",L=v.scrollHeight),M(v,L,F),S=setTimeout(()=>{S=null,v.style.height=0,V=U=>{q=null,(Object(U)!==U||U.target===v)&&K(v,"hide")},v.addEventListener("transitionend",V),q=setTimeout(V,s.duration*1.1)},100)}return Dt(()=>{h===!0&&R()}),()=>B(Gt,{css:!1,appear:s.appear,onEnter:ye,onLeave:ve},l.default)}}),ge=Xt({}),Sa=Object.keys(xt),Pe=st({name:"QExpansionItem",props:{...xt,...ea,...Jt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Zt,"click","afterShow","afterHide"],setup(s,{slots:l,emit:f}){const{proxy:{$q:h}}=ta(),D=aa(s,h),b=w(s.modelValue!==null?s.modelValue:s.defaultOpened),S=w(null),q=sa(),{show:V,hide:O,toggle:R}=na({showing:b});let M,K;const ye=Q(()=>`q-expansion-item q-item-type q-expansion-item--${b.value===!0?"expanded":"collapsed"} q-expansion-item--${s.popup===!0?"popup":"standard"}`),ve=Q(()=>s.contentInsetLevel===void 0?null:{["padding"+(h.lang.rtl===!0?"Right":"Left")]:s.contentInsetLevel*56+"px"}),v=Q(()=>s.disable!==!0&&(s.href!==void 0||s.to!==void 0&&s.to!==null&&s.to!=="")),F=Q(()=>{const g={};return Sa.forEach(j=>{g[j]=s[j]}),g}),L=Q(()=>v.value===!0||s.expandIconToggle!==!0),U=Q(()=>s.expandedIcon!==void 0&&b.value===!0?s.expandedIcon:s.expandIcon||h.iconSet.expansionItem[s.denseToggle===!0?"denseIcon":"icon"]),ke=Q(()=>s.disable!==!0&&(v.value===!0||s.expandIconToggle===!0)),Y=Q(()=>({expanded:b.value===!0,detailsId:q.value,toggle:R,show:V,hide:O})),ee=Q(()=>{const g=s.toggleAriaLabel!==void 0?s.toggleAriaLabel:h.lang.label[b.value===!0?"collapse":"expand"](s.label);return{role:"button","aria-expanded":b.value===!0?"true":"false","aria-controls":q.value,"aria-label":g}});Qe(()=>s.group,g=>{K?.(),g!==void 0&&ae()});function H(g){v.value!==!0&&R(g),f("click",g)}function de(g){g.keyCode===13&&te(g,!0)}function te(g,j){j!==!0&&g.qAvoidFocus!==!0&&S.value?.focus(),R(g),ra(g)}function _e(){f("afterShow")}function ue(){f("afterHide")}function ae(){M===void 0&&(M=oa()),b.value===!0&&(ge[s.group]=M);const g=Qe(b,P=>{P===!0?ge[s.group]=M:ge[s.group]===M&&delete ge[s.group]}),j=Qe(()=>ge[s.group],(P,He)=>{He===M&&P!==void 0&&P!==M&&O()});K=()=>{g(),j(),ge[s.group]===M&&delete ge[s.group],K=void 0}}function pe(){const g={class:[`q-focusable relative-position cursor-pointer${s.denseToggle===!0&&s.switchToggleSide===!0?" items-end":""}`,s.expandIconClass],side:s.switchToggleSide!==!0,avatar:s.switchToggleSide},j=[B(Z,{class:"q-expansion-item__toggle-icon"+(s.expandedIcon===void 0&&b.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:U.value})];return ke.value===!0&&(Object.assign(g,{tabindex:0,...ee.value,onClick:te,onKeyup:de}),j.unshift(B("div",{ref:S,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),B(J,g,()=>j)}function fe(){let g;return l.header!==void 0?g=[].concat(l.header(Y.value)):(g=[B(J,()=>[B(me,{lines:s.labelLines},()=>s.label||""),s.caption?B(me,{lines:s.captionLines,caption:!0},()=>s.caption):null])],s.icon&&g[s.switchToggleSide===!0?"push":"unshift"](B(J,{side:s.switchToggleSide===!0,avatar:s.switchToggleSide!==!0},()=>B(Z,{name:s.icon})))),s.disable!==!0&&s.hideExpandIcon!==!0&&g[s.switchToggleSide===!0?"unshift":"push"](pe()),g}function A(){const g={ref:"item",style:s.headerStyle,class:s.headerClass,dark:D.value,disable:s.disable,dense:s.dense,insetLevel:s.headerInsetLevel};return L.value===!0&&(g.clickable=!0,g.onClick=H,Object.assign(g,v.value===!0?F.value:ee.value)),B(at,g,fe)}function Ue(){return tt(B("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ve.value,id:q.value},ia(l.default)),[[la,b.value]])}function be(){const g=[A(),B(xa,{duration:s.duration,onShow:_e,onHide:ue},Ue)];return s.expandSeparator===!0&&g.push(B(we,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:D.value}),B(we,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:D.value})),g}return s.group!==void 0&&ae(),Dt(()=>{K?.()}),()=>B("div",{class:ye.value},[B("div",{class:"q-expansion-item__container relative-position"},be())])}}),qa=["top","middle","bottom"],wt=st({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:s=>qa.includes(s)}},setup(s,{slots:l}){const f=Q(()=>s.align!==void 0?{verticalAlign:s.align}:null),h=Q(()=>{const D=s.outline===!0&&s.color||s.textColor;return`q-badge flex inline items-center no-wrap q-badge--${s.multiLine===!0?"multi":"single"}-line`+(s.outline===!0?" q-badge--outline":s.color!==void 0?` bg-${s.color}`:"")+(D!==void 0?` text-${D}`:"")+(s.floating===!0?" q-badge--floating":"")+(s.rounded===!0?" q-badge--rounded":"")+(s.transparent===!0?" q-badge--transparent":"")});return()=>B("div",{class:h.value,style:f.value,role:"status","aria-label":s.label},da(l.default,s.label!==void 0?[s.label]:[]))}});function kt(s){if(s===!1)return 0;if(s===!0||s===void 0)return 1;const l=parseInt(s,10);return isNaN(l)?0:l}const bt=ua({name:"close-popup",beforeMount(s,{value:l}){const f={depth:kt(l),handler(h){f.depth!==0&&setTimeout(()=>{const D=ga(s);D!==void 0&&ma(D,h,f.depth)})},handlerKey(h){ca(h,13)===!0&&f.handler(h)}};s.__qclosepopup=f,s.addEventListener("click",f.handler),s.addEventListener("keyup",f.handlerKey)},updated(s,{value:l,oldValue:f}){l!==f&&(s.__qclosepopup.depth=kt(l))},beforeUnmount(s){const l=s.__qclosepopup;s.removeEventListener("click",l.handler),s.removeEventListener("keyup",l.handlerKey),delete s.__qclosepopup}}),Ie="/api/beers",le={async getAll(){return(await $.get(Ie)).data.beers||[]},async getById(s){return(await $.get(`${Ie}/${s}`)).data.beer},async create(s){const l={beer_template_id:s.beer_template_id,name:s.name,batch_id:s.batch_id,volume_hl:s.volume_hl,priority:s.priority,min_fermentation_days:s.min_fermentation_days,min_maturation_days:s.min_maturation_days,target_start_date:s.target_start_date,target_completion_date:s.target_completion_date};await $.post(Ie,l)},async update(s,l){const f={beer_id:l.beer_id,beer_template_id:l.beer_template_id||null,name:l.name,batch_id:l.batch_id||null,volume_hl:l.volume_hl,priority:l.priority,min_fermentation_days:l.min_fermentation_days,min_maturation_days:l.min_maturation_days||0,target_start_date:l.target_start_date||null,target_completion_date:l.target_completion_date||null,requires_canning:l.requires_canning||!1,tasks:l.tasks||[]};await $.put(`${Ie}/${s}`,f)},async delete(s){await $.delete(`${Ie}/${s}`)}},Ge="/api/canning-days",Xe={async getAll(){return((await $.get(Ge)).data.canning_days||[]).map(f=>f.canning_day)},async create(s){await $.post(Ge,{canning_day:s})},async delete(s){await $.delete(`${Ge}/${s}`)}},Ze="/api/non_working_days",Je={async getAll(){return((await $.get(Ze)).data.non_working_days||[]).map(f=>f.non_working_day)},async create(s){await $.post(Ze,{non_working_day:s})},async delete(s){await $.delete(`${Ze}/${s}`)}},Ee="/api/tasks",et={async getById(s){return(await $.get(`${Ee}/${s}`)).data.task},async create(s){const l=ha();return(await $.post(Ee,{task_id:l,...s,locked:!0})).data},async delete(s){await $.delete(`${Ee}/${s}`)},async adjustDuration(s,l){return(await $.put(`${Ee}/${s}/duration/${l}`)).data.tasks||[]}},Ta=(s,l)=>{const f=s.__vccOpts||s;for(const[h,D]of l)f[h]=D;return f},Ca={class:"row no-wrap",style:{height:"100%"}},Ba={class:"col-3 q-pa-md",style:{"border-right":"1px solid #e0e0e0","overflow-y":"auto"}},Ia={key:0,class:"flex flex-center q-pa-md"},$a={key:1},Va={class:"text-subtitle2 text-primary"},Fa={class:"text-caption"},Na={class:"q-pa-sm"},Ma={class:"row q-gutter-sm q-mb-md"},La={key:0,class:"canning-days-list"},Aa={key:1,class:"text-grey-6 text-center q-pa-sm"},Pa={class:"q-pa-sm"},Ea={class:"row q-gutter-sm q-mb-md"},Qa={key:0,class:"non-working-days-list"},Ua={key:1,class:"text-grey-6 text-center q-pa-sm"},Ha={class:"row items-center justify-between q-mb-md"},Wa={key:1,class:"flex flex-center q-pa-md"},Oa={class:"row items-center q-gutter-xs"},Ra={class:"row items-center justify-between q-mb-sm"},ja={class:"beer-details"},za={class:"detail-row"},Ka={class:"detail-row"},Ya={class:"detail-row"},Ga={class:"detail-row"},Xa={class:"detail-row"},Za={class:"row items-center no-wrap q-gutter-xs"},Ja={class:"detail-row"},es={class:"row items-center no-wrap q-gutter-xs"},ts={class:"detail-row"},as={key:0,class:"q-mt-md"},ss={class:"row items-center justify-between q-mb-sm"},ns={class:"task-type-label"},os={key:3,class:"text-center text-grey-7 q-pa-md"},ls={class:"col-9 q-pa-md"},is={class:"row items-center justify-between q-mb-md"},rs={class:"row items-center q-gutter-sm"},ds={class:"text-h6"},us={class:"schedule-table-container"},cs={class:"schedule-table"},gs={class:"date-label"},ms=["onClick"],ys={key:0,class:"task-info"},vs={class:"task-name"},_s={key:0,class:"batch-id"},ps={class:"task-type"},fs=["onClick"],hs={key:0,class:"task-info"},ws={class:"task-name"},ks={key:0,class:"batch-id"},bs={class:"task-type"},Ds={class:"text-h6 text-negative"},xs={class:"text-subtitle1 q-mb-md"},Ss={key:0,class:"q-mb-md"},qs={class:"text-weight-medium q-mb-sm"},Ts={key:1,class:"q-mb-md"},Cs={class:"text-weight-medium q-mb-sm"},Bs={class:"text-body2 q-ml-md"},Is={key:2},$s={class:"text-weight-medium q-mb-sm"},Vs={key:0,class:"q-mb-sm"},Fs={class:"beer-diagnostic-details"},Ns={class:"row q-col-gutter-sm"},Ms={class:"col-6"},Ls={class:"col-6"},As={class:"col-6"},Ps={class:"col-6"},Es={class:"col-6"},Qs={key:0,class:"col-6"},Us={key:1,class:"col-6"},Hs={key:2,class:"col-6"},Ws={key:3,class:"col-6"},Os={class:"q-mt-md text-caption text-grey-7"},Rs={__name:"SchedulePage",setup(s){const l=Da(),f=w([]),h=w(null),D=w(""),b=w(null),S=w(null),q=w(2),V=w(null),O=w(null),R=w(null),M=w(null),K=w(null),ye=w(null),ve=w(null),v=w(null),F=w(!1),L=w(!1),U=w(!1),ke=w(!1),Y=w(new Date),ee=w([]),H=w([]),de=w([]),te=w(null),_e=w(!1),ue=w([]),ae=w(null),pe=w(!1),fe=w(!1),A=w(null),Ue=["F6","F5","F4","F3","F2","F1","B1","B2"];Qe(h,a=>{a?(b.value=a.min_fermentation_days,S.value=a.min_maturation_days):(b.value=null,S.value=null)});const be=Q(()=>ee.value.length===0?!1:ee.value.some(a=>{const t=a.tasks||[];return t.length===0?!0:!t.every(e=>e.locked)})),g=Q(()=>{const a=new Date(Y.value),t=new Date(Y.value);return t.setDate(t.getDate()+29),`${a.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}),j=Q(()=>{const a=[],t=new Date;t.setHours(0,0,0,0);for(let e=0;e<30;e++){const n=new Date(Y.value);n.setDate(n.getDate()+e),n.setHours(0,0,0,0);const r=P(n),u=n.getTime()===t.getTime(),k=n.getDay()===0||n.getDay()===6,se=He(n)||ue.value.includes(r);a.push({date:r,label:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),isToday:u,isWeekend:k,isHoliday:se,fullDate:new Date(n)})}return a}),P=a=>{const t=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${t}-${e}-${n}`},He=a=>{const t=a.getFullYear(),e=a.getMonth()+1,n=a.getDate();if(e===1&&n===1||e===1&&n===26||e===4&&n===25||e===12&&n===25||e===12&&n===26)return!0;if(e===5){const r=new Date(t,4,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);if(n===r.getDate())return!0}if(e===6){const r=new Date(t,5,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);const u=new Date(r);if(u.setDate(u.getDate()+7),n===u.getDate())return!0}if(e===8){const r=new Date(t,7,1);for(;r.getDay()!==3;)r.setDate(r.getDate()+1);const u=new Date(r);if(u.setDate(u.getDate()+14),n===u.getDate())return!0}return!1},St=async()=>{F.value=!0;try{f.value=await wa.getAll()}catch(a){l.notify({type:"negative",message:"Failed to load beer templates",caption:a.response?.data?.message||a.message})}finally{F.value=!1}},G=async()=>{U.value=!0;try{const a=await le.getAll();ee.value=a;const t=[];for(const e of a)e.tasks&&Array.isArray(e.tasks)&&t.push(...e.tasks);H.value=t}catch(a){l.notify({type:"negative",message:"Failed to load beers",caption:a.response?.data?.message||a.message})}finally{U.value=!1}},qt=async()=>{if(!(!h.value||!D.value||b.value===null||S.value===null||q.value===null)){L.value=!0;try{const a={beer_template_id:h.value.beer_template_id,name:h.value.beer_name,batch_id:D.value,volume_hl:h.value.volume_hl,priority:q.value,min_fermentation_days:b.value,min_maturation_days:S.value,target_start_date:V.value||null,target_completion_date:O.value||null};await le.create(a),l.notify({type:"positive",message:"Beer created successfully",caption:`${a.name} ${a.batch_id}`,icon:"local_drink"}),h.value=null,D.value="",b.value=null,S.value=null,q.value=2,V.value=null,O.value=null,R.value?.resetValidation(),M.value?.resetValidation(),K.value?.resetValidation(),ye.value?.resetValidation(),ve.value?.resetValidation(),v.value?.resetValidation(),await G(),await N()}catch(a){l.notify({type:"negative",message:"Failed to create beer",caption:a.response?.data?.message||a.message})}finally{L.value=!1}}},$e=[[229,57,53],[30,136,229],[67,160,71],[251,140,0],[142,36,170],[0,172,193],[255,179,0],[109,76,65],[216,27,96],[57,73,171],[0,137,123],[124,179,66],[244,81,30],[94,53,177],[3,155,229],[192,202,51]],ie=new Map,nt=(a,t=!1)=>{if(!ie.has(a)){const se=ie.size%$e.length;ie.set(a,se)}const e=ie.get(a),[n,r,u]=$e[e];return`rgba(${n}, ${r}, ${u}, ${t?.4:.2})`},ot=a=>{if(!ie.has(a)){const u=ie.size%$e.length;ie.set(a,u)}const t=ie.get(a),[e,n,r]=$e[t];return`rgb(${e}, ${n}, ${r})`},Tt=a=>{const t=Fe(a),e={backgroundColor:nt(a,t)};return t&&(e.border=`2px solid ${ot(a)}`),e},lt=(a,t)=>{const e=T(a.date,t);if(e.length===0)return{};const n=e[0],r={backgroundColor:nt(n.beer_id,n.locked)};if(n.locked){const u=We(a.date,n),k=ot(n.beer_id);u.isSingle?r.border=`2px solid ${k}`:(r.borderLeft=`2px solid ${k}`,r.borderRight=`2px solid ${k}`,u.isFirst&&(r.borderTop=`2px solid ${k}`),u.isLast&&(r.borderBottom=`2px solid ${k}`))}return r},Ct=(a,t)=>{const e=[];for(let n=a;n<=t;n++){e.push(`${n}-01-01`),e.push(`${n}-01-26`),e.push(`${n}-04-25`),e.push(`${n}-12-25`),e.push(`${n}-12-26`);const r=n%19,u=Math.floor(n/100),k=n%100,se=Math.floor(u/4),xe=u%4,re=Math.floor((u+8)/25),Se=Math.floor((u-re+1)/3),ce=(19*r+u-se-Se+15)%30,je=Math.floor(k/4),qe=k%4,_=(32+2*xe+2*je-ce-qe)%7,C=Math.floor((r+11*ce+22*_)/451),I=Math.floor((ce+_-7*C+114)/31),Te=(ce+_-7*C+114)%31+1,ne=new Date(n,I-1,Te),mt=new Date(ne);mt.setDate(ne.getDate()-2);const yt=new Date(ne);yt.setDate(ne.getDate()-1);const vt=new Date(ne);vt.setDate(ne.getDate()+1),e.push(P(mt)),e.push(P(yt)),e.push(P(vt));const zt=new Date(n,4,1),Ne=new Date(zt);for(;Ne.getDay()!==1;)Ne.setDate(Ne.getDate()+1);e.push(P(Ne));const Kt=new Date(n,9,1),Ce=new Date(Kt);for(;Ce.getDay()!==1;)Ce.setDate(Ce.getDate()+1);const _t=new Date(Ce);_t.setDate(Ce.getDate()+7),e.push(P(_t));const ze=new Date(n,7,10),Me=new Date(ze),Yt=(3-ze.getDay()+7)%7;Me.setDate(ze.getDate()+Yt),Me.getDate()>=10&&Me.getDate()<=16&&e.push(P(Me))}return e},N=async()=>{if(be.value){ke.value=!0;try{const a=new Date;a.setHours(0,0,0,0);const t=_=>{const C=new Date(_);C.setHours(0,0,0,0);const I=C.getTime()-a.getTime();return Math.floor(I/(1e3*60*60*24))},e=_=>_?t(_):null,n=[],r=[],u=[];for(const _ of ee.value){const C=(_.tasks||[]).filter(I=>I.locked);if(C.length>0){n.push(_);for(const I of C){const Te=t(I.start_date),ne=t(I.end_date)+1;ne>=1&&u.push({resource:I.resource,start_day:Te,end_day:ne})}}else{const I=e(_.target_start_date),Te=I!==null?Math.max(1,I):null;r.push({id:_.beer_id,name:_.name,volume_hl:_.volume_hl,priority:_.priority,min_fermentation_days:_.min_fermentation_days,min_maturation_days:_.min_maturation_days||0,requires_canning:_.requires_canning||!1,target_start_day:Te,target_completion_day:e(_.target_completion_date),tasks:[]})}}const k=new Date().getFullYear(),se=Ct(k,k+1),xe=[...new Set([...se,...ue.value])],re={beers:r,canning_days:de.value,non_working_days:xe};u.length>0&&(re.resource_blocks=u);const Se=await $.post("/api/schedule",re),ce=_=>{const C=new Date(a);return C.setDate(C.getDate()+_),P(C)},je=Se.data.beers||[],qe=[];for(const _ of je)if(_.tasks&&Array.isArray(_.tasks))for(const C of _.tasks)qe.push({...C,beer_id:_.id,beer_name:_.name,batch_id:_.batch_id,start_date:ce(C.start_day),end_date:ce(C.end_day-1)});for(const _ of n){const C=(_.tasks||[]).filter(I=>I.locked);for(const I of C)qe.push({...I,beer_id:_.beer_id,beer_name:_.name,batch_id:_.batch_id})}H.value=qe,l.notify({type:"positive",message:"Beers scheduled successfully",icon:"calendar_today"})}catch(a){console.error("Schedule error:",a);const t=a.response?.data;t?.error==="SCHEDULING_ERROR"&&t?.diagnostic?(A.value=t,fe.value=!0):t?.error==="INFEASIBLE"&&t?.beer_diagnostics?(A.value={error:t.error,message:t.message,diagnostic:{solver_status:t.solver_status,warnings:t.warnings,beer_diagnostics:t.beer_diagnostics,canning:t.canning,equipment:t.equipment}},fe.value=!0):l.notify({type:"negative",message:"Failed to schedule beers",caption:t?.message||a.message})}finally{ke.value=!1}}},T=(a,t)=>{const e=t.toLowerCase();return H.value.filter(n=>{if(n.resource.toLowerCase()!==e)return!1;const r=new Date(n.start_date),u=new Date(n.end_date),k=new Date(a);return r.setHours(0,0,0,0),u.setHours(0,0,0,0),k.setHours(0,0,0,0),k>=r&&k<=u})},We=(a,t)=>{const e=new Date(t.start_date),n=new Date(t.end_date),r=new Date(a);e.setHours(0,0,0,0),n.setHours(0,0,0,0),r.setHours(0,0,0,0);const u=r.getTime()===e.getTime(),k=r.getTime()===n.getTime(),se=Math.round((n-e)/(1e3*60*60*24))+1,xe=Math.floor(se/2),re=new Date(e);re.setDate(re.getDate()+xe);const Se=r.getTime()===re.getTime();return{isFirst:u,isLast:k,isMiddle:Se,isSingle:u&&k}},it=(a,t)=>{const e=We(a,t);return e.isMiddle||e.isSingle},Ve=a=>H.value.filter(t=>t.beer_id===a),Fe=a=>{const t=Ve(a);return t.length===0?!1:t.every(e=>e.locked)},Bt=async(a,t)=>{const e=Ve(a.beer_id);if(e.length!==0)try{if(t){for(const n of e)if(!n.locked){const r=await et.create({beer_id:a.beer_id,beer_name:a.name,task_type:n.task_type,start_day:n.start_day,start_date:n.start_date,duration:n.duration,end_day:n.end_day,end_date:n.end_date,resource:n.resource,volume_hl:a.volume_hl}),u=H.value.findIndex(k=>k.beer_id===a.beer_id&&k.task_type===n.task_type);u!==-1&&(H.value[u]={...H.value[u],task_id:r.task_id,locked:!0})}l.notify({type:"positive",message:"All tasks pinned",caption:a.name,icon:"push_pin"})}else{for(const n of e)if(n.locked&&n.task_id){await et.delete(n.task_id);const r=H.value.findIndex(u=>u.beer_id===a.beer_id&&u.task_type===n.task_type);r!==-1&&(H.value[r]={...H.value[r],task_id:null,locked:!1})}l.notify({type:"positive",message:"All tasks unpinned",caption:a.name,icon:"push_pin"})}}catch(n){l.notify({type:"negative",message:t?"Failed to pin tasks":"Failed to unpin tasks",caption:n.response?.data?.message||n.message})}},rt=(a,t)=>{const e=T(a.date,t),n=e.length>0,r={today:a.isToday,weekend:a.isWeekend,holiday:a.isHoliday,"has-task":n};if(n){const u=We(a.date,e[0]);r["task-first"]=u.isFirst&&!u.isSingle,r["task-last"]=u.isLast&&!u.isSingle,r["task-middle"]=!u.isFirst&&!u.isLast,r["task-single"]=u.isSingle}return r},It=a=>{l.notify({type:"info",message:`Viewing ${a.name}`,caption:"Feature coming soon..."})},dt=async(a,t)=>{if(t)if(t.locked&&t.task_id&&(a.metaKey||a.ctrlKey)){const e=a.shiftKey?-1:1;try{await et.adjustDuration(t.task_id,e),l.notify({type:"positive",message:`Task duration ${e>0?"increased":"decreased"} by 1 day`,icon:"schedule"}),await G(),await N()}catch(n){l.notify({type:"negative",message:"Failed to adjust task duration",caption:n.response?.data?.message||n.message})}}else It(t)},$t=a=>{l.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${a.name} (${a.batch_id})?`,cancel:!0,persistent:!0}).onOk(async()=>{await Vt(a.beer_id)})},Vt=async a=>{try{await le.delete(a),l.notify({type:"positive",message:"Beer deleted successfully",icon:"delete"}),await G(),await N()}catch(t){l.notify({type:"negative",message:"Failed to delete beer",caption:t.response?.data?.message||t.message})}},Ft=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<=0){l.notify({type:"negative",message:"Invalid volume",caption:"Must be greater than 0"});return}const n={...a,volume_hl:e};await le.update(a.beer_id,n),l.notify({type:"positive",message:"Volume updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update volume",caption:e.response?.data?.message||e.message})}},Nt=async(a,t)=>{try{const e={...a,priority:t};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Priority updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update priority",caption:e.response?.data?.message||e.message})}},Mt=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<0){l.notify({type:"negative",message:"Invalid fermentation days",caption:"Must be 0 or greater"});return}const n={...a,min_fermentation_days:e};await le.update(a.beer_id,n),l.notify({type:"positive",message:"Min fermentation days updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update min fermentation days",caption:e.response?.data?.message||e.message})}},ut=async(a,t)=>{try{const e={...a,target_start_date:t||null};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Target start date updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update target start date",caption:e.response?.data?.message||e.message})}},ct=async(a,t)=>{try{const e={...a,target_completion_date:t||null};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Target completion date updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update target completion date",caption:e.response?.data?.message||e.message})}},Lt=async(a,t)=>{try{const e={...a,requires_canning:t};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Requires canning updated successfully",icon:"check"}),await G(),await N()}catch(e){l.notify({type:"negative",message:"Failed to update requires canning",caption:e.response?.data?.message||e.message})}},At=()=>{const a=new Date(Y.value);a.setDate(a.getDate()-30),Y.value=a},Pt=()=>{const a=new Date(Y.value);a.setDate(a.getDate()+30),Y.value=a},Et=()=>{Y.value=new Date},Qt=a=>{switch(a){case 5:return"red";case 4:return"orange";case 3:return"amber";case 2:return"blue";case 1:return"grey";default:return"grey"}},Oe=async()=>{try{de.value=await Xe.getAll()}catch(a){console.error("Failed to load canning days:",a)}},Ut=a=>de.value.includes(a),Ht=async()=>{if(te.value){_e.value=!0;try{await Xe.create(te.value),await Oe(),te.value=null,l.notify({type:"positive",message:"Canning day added",icon:"event"}),await N()}catch(a){l.notify({type:"negative",message:"Failed to add canning day",caption:a.response?.data?.message||a.message})}finally{_e.value=!1}}},Wt=async a=>{try{await Xe.delete(a),await Oe(),l.notify({type:"positive",message:"Canning day removed",icon:"event_busy"}),await N()}catch(t){l.notify({type:"negative",message:"Failed to remove canning day",caption:t.response?.data?.message||t.message})}},Re=async()=>{try{ue.value=await Je.getAll()}catch(a){console.error("Failed to load non-working days:",a)}},Ot=async()=>{if(ae.value){pe.value=!0;try{await Je.create(ae.value),await Re(),ae.value=null,l.notify({type:"positive",message:"Non-working day added",icon:"event"}),await N()}catch(a){l.notify({type:"negative",message:"Failed to add non-working day",caption:a.response?.data?.message||a.message})}finally{pe.value=!1}}},Rt=async a=>{try{await Je.delete(a),await Re(),l.notify({type:"positive",message:"Non-working day removed",icon:"event_busy"}),await N()}catch(t){l.notify({type:"negative",message:"Failed to remove non-working day",caption:t.response?.data?.message||t.message})}},gt=a=>new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),De=a=>{if(a==null)return null;const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);return e.setDate(e.getDate()+a),P(e)},jt=a=>!a||a.length===0?"None":a.map(t=>De(t)).join(", ");return ya(async()=>{await Promise.all([St(),G(),Oe(),Re()]),await N()}),(a,t)=>(c(),E(ba,{class:"schedule-page"},{default:d(()=>[o("div",Ca,[o("div",Ba,[t[28]||(t[28]=o("div",{class:"text-h5 q-mb-md"},"Create Beer",-1)),F.value?(c(),p("div",Ia,[i(pt,{color:"primary",size:"md"})])):(c(),p("div",$a,[i(Ye,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),options:f.value,"option-label":"beer_name","option-value":"beer_template_id",label:"Select Beer Template",outlined:"",disable:!f.value||f.value.length===0},{"no-option":d(()=>[i(at,null,{default:d(()=>[i(J,{class:"text-grey"},{default:d(()=>[...t[10]||(t[10]=[y(" No templates available ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"]),h.value?(c(),E(Le,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:d(()=>[i(Be,null,{default:d(()=>[o("div",Va,m(h.value.beer_name),1),i(we,{class:"q-my-sm"}),o("div",Fa,[o("div",null,[t[11]||(t[11]=o("strong",null,"Volume:",-1)),y(" "+m(h.value.volume_hl)+" hl",1)]),o("div",null,[t[12]||(t[12]=o("strong",null,"Maturation:",-1)),y(" "+m(h.value.min_maturation_days)+" days",1)])]),i(we,{class:"q-my-sm"}),i(z,{ref_key:"batchIdInput",ref:R,modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e),label:"Batch ID *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>!!e||"Batch ID is required"]},null,8,["modelValue","rules"]),i(z,{ref_key:"minFermentationDaysInput",ref:M,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min fermentation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(z,{ref_key:"minMaturationDaysInput",ref:K,modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=e=>S.value=e),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min maturation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(Ye,{ref_key:"priorityInput",ref:ye,modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=e=>q.value=e),options:[1,2,3],label:"Priority *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!=null||"Priority is required"]},null,8,["modelValue","rules"]),i(z,{ref_key:"targetStartDateInput",ref:ve,modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),label:"Target Start Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(z,{ref_key:"targetDateInput",ref:v,modelValue:O.value,"onUpdate:modelValue":t[6]||(t[6]=e=>O.value=e),label:"Target Completion Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(W,{color:"primary",icon:"add",label:"Create Beer",class:"full-width q-mt-md",disable:!D.value||b.value===null||S.value===null||q.value===null||L.value,loading:L.value,onClick:qt},null,8,["disable","loading"])]),_:1})]),_:1})):x("",!0),i(we,{class:"q-my-md"}),i(Pe,{icon:"event",label:"Canning Days","header-class":"text-h6",dense:""},{default:d(()=>[o("div",Na,[o("div",Ma,[i(z,{modelValue:te.value,"onUpdate:modelValue":t[7]||(t[7]=e=>te.value=e),type:"date",label:"Add Canning Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),i(W,{color:"primary",icon:"add",disable:!te.value||_e.value,loading:_e.value,onClick:Ht},{default:d(()=>[i(he,null,{default:d(()=>[...t[13]||(t[13]=[y("Add Canning Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),de.value.length>0?(c(),p("div",La,[(c(!0),p(X,null,oe(de.value,e=>(c(),E(ft,{key:e,removable:"",color:"red","text-color":"white",onRemove:n=>Wt(e)},{default:d(()=>[y(m(gt(e)),1)]),_:2},1032,["onRemove"]))),128))])):(c(),p("div",Aa," No canning days scheduled "))])]),_:1}),i(Pe,{icon:"event_busy",label:"Non-Working Days","header-class":"text-h6",dense:""},{default:d(()=>[o("div",Pa,[o("div",Ea,[i(z,{modelValue:ae.value,"onUpdate:modelValue":t[8]||(t[8]=e=>ae.value=e),type:"date",label:"Add Non-Working Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),i(W,{color:"primary",icon:"add",disable:!ae.value||pe.value,loading:pe.value,onClick:Ot},{default:d(()=>[i(he,null,{default:d(()=>[...t[14]||(t[14]=[y("Add Non-Working Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),ue.value.length>0?(c(),p("div",Qa,[(c(!0),p(X,null,oe(ue.value,e=>(c(),E(ft,{key:e,removable:"",color:"grey","text-color":"white",onRemove:n=>Rt(e)},{default:d(()=>[y(m(gt(e)),1)]),_:2},1032,["onRemove"]))),128))])):(c(),p("div",Ua," No non-working days scheduled "))])]),_:1}),i(we,{class:"q-my-md"}),o("div",Ha,[t[15]||(t[15]=o("div",{class:"text-h6"},"Batches",-1)),i(W,{flat:"",dense:"",round:"",icon:"calendar_today",size:"sm",color:"primary",loading:ke.value,disable:!be.value,onClick:N},{default:d(()=>[i(he,null,{default:d(()=>[y(m(be.value?"Schedule Beers":"No beers to schedule"),1)]),_:1})]),_:1},8,["loading","disable"])]),U.value?(c(),p("div",Wa,[i(pt,{color:"primary",size:"md"})])):ee.value.length>0?(c(),E(ht,{key:2},{default:d(()=>[(c(!0),p(X,null,oe(ee.value,e=>(c(),E(Pe,{key:e.beer_id,"expand-separator":"",class:Ae(["color-indicator",{"beer-locked":Fe(e.beer_id)}]),style:Ke(Tt(e.beer_id))},{header:d(()=>[i(J,null,{default:d(()=>[i(me,null,{default:d(()=>[y(m(e.name),1)]),_:2},1024),i(me,{caption:""},{default:d(()=>[y(m(e.batch_id),1)]),_:2},1024)]),_:2},1024),i(J,{side:""},{default:d(()=>[o("div",Oa,[Fe(e.beer_id)?(c(),E(Z,{key:0,name:"lock",size:"xs",color:"grey-7"})):x("",!0),i(wt,{color:Qt(e.priority)},{default:d(()=>[y(" P"+m(e.priority),1)]),_:2},1032,["color"])])]),_:2},1024)]),default:d(()=>[i(Le,{flat:""},{default:d(()=>[i(Be,{class:"q-pt-none"},{default:d(()=>[o("div",Ra,[t[17]||(t[17]=o("div",{class:"text-subtitle2"},"Beer Details",-1)),i(W,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:n=>$t(e)},{default:d(()=>[i(he,null,{default:d(()=>[...t[16]||(t[16]=[y("Delete Beer",-1)])]),_:1})]),_:1},8,["onClick"])]),o("div",ja,[o("div",za,[t[18]||(t[18]=o("span",{class:"detail-label"},"Batch ID:",-1)),o("span",null,m(e.batch_id),1)]),o("div",Ka,[t[19]||(t[19]=o("span",{class:"detail-label"},"Volume:",-1)),i(z,{"model-value":e.volume_hl,type:"number",suffix:"hl",dense:"",outlined:"",style:{"max-width":"100px"},rules:[n=>n>0||"Must be greater than 0"],"onUpdate:modelValue":n=>Ft(e,n)},null,8,["model-value","rules","onUpdate:modelValue"])]),o("div",Ya,[t[20]||(t[20]=o("span",{class:"detail-label"},"Priority:",-1)),i(Ye,{"model-value":e.priority,options:[1,2,3],dense:"",outlined:"",style:{"max-width":"80px"},"onUpdate:modelValue":n=>Nt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),o("div",Ga,[t[21]||(t[21]=o("span",{class:"detail-label"},"Min Fermentation:",-1)),i(z,{"model-value":e.min_fermentation_days,type:"number",suffix:"days",dense:"",outlined:"",style:{"max-width":"120px"},rules:[n=>n>=0||"Must be 0 or greater"],onChange:n=>Mt(e,n.target.value)},null,8,["model-value","rules","onChange"])]),o("div",Xa,[t[23]||(t[23]=o("span",{class:"detail-label"},"Target Start:",-1)),o("div",Za,[i(z,{"model-value":e.target_start_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>ut(e,n)},null,8,["model-value","onUpdate:modelValue"]),e.target_start_date?(c(),E(W,{key:0,flat:"",round:"",dense:"",size:"sm",icon:"close",color:"grey",onClick:n=>ut(e,null)},{default:d(()=>[i(he,null,{default:d(()=>[...t[22]||(t[22]=[y("Clear target start date",-1)])]),_:1})]),_:1},8,["onClick"])):x("",!0)])]),o("div",Ja,[t[25]||(t[25]=o("span",{class:"detail-label"},"Target Completion:",-1)),o("div",es,[i(z,{"model-value":e.target_completion_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>ct(e,n)},null,8,["model-value","onUpdate:modelValue"]),e.target_completion_date?(c(),E(W,{key:0,flat:"",round:"",dense:"",size:"sm",icon:"close",color:"grey",onClick:n=>ct(e,null)},{default:d(()=>[i(he,null,{default:d(()=>[...t[24]||(t[24]=[y("Clear target completion date",-1)])]),_:1})]),_:1},8,["onClick"])):x("",!0)])]),o("div",ts,[t[26]||(t[26]=o("span",{class:"detail-label"},"Requires Canning:",-1)),i(va,{"model-value":e.requires_canning||!1,dense:"","onUpdate:modelValue":n=>Lt(e,n)},null,8,["model-value","onUpdate:modelValue"])])]),Ve(e.beer_id).length>0?(c(),p("div",as,[o("div",ss,[t[27]||(t[27]=o("div",{class:"text-subtitle2"},"Scheduled Tasks",-1)),i(_a,{"model-value":Fe(e.beer_id),label:"Pin All",dense:"",size:"sm","onUpdate:modelValue":n=>Bt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),(c(!0),p(X,null,oe(Ve(e.beer_id),n=>(c(),p("div",{key:`${e.beer_id}-${n.task_type}`,class:"task-row"},[o("span",ns,m(n.task_type),1),n.locked?(c(),E(Z,{key:0,name:"push_pin",size:"xs",color:"primary"})):x("",!0)]))),128))])):x("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","style"]))),128))]),_:1})):(c(),p("div",os," No beers scheduled yet "))]))]),o("div",ls,[o("div",is,[t[29]||(t[29]=o("div",{class:"text-h4"},"Schedule",-1)),o("div",rs,[i(W,{flat:"",dense:"",round:"",icon:"chevron_left",onClick:At}),o("div",ds,m(g.value),1),i(W,{flat:"",dense:"",round:"",icon:"chevron_right",onClick:Pt}),i(W,{flat:"",label:"Today",onClick:Et})])]),o("div",us,[o("div",cs,[t[30]||(t[30]=o("div",{class:"schedule-header"},"Date",-1)),t[31]||(t[31]=o("div",{class:"schedule-header"},"Brewhouse",-1)),t[32]||(t[32]=o("div",{class:"schedule-header"},[o("div",null,"F6"),o("div",{class:"volume-label"},"20hl")],-1)),t[33]||(t[33]=o("div",{class:"schedule-header"},[o("div",null,"F5"),o("div",{class:"volume-label"},"20hl")],-1)),t[34]||(t[34]=o("div",{class:"schedule-header"},[o("div",null,"F4"),o("div",{class:"volume-label"},"20hl")],-1)),t[35]||(t[35]=o("div",{class:"schedule-header"},[o("div",null,"F3"),o("div",{class:"volume-label"},"20hl")],-1)),t[36]||(t[36]=o("div",{class:"schedule-header"},[o("div",null,"F2"),o("div",{class:"volume-label"},"10hl")],-1)),t[37]||(t[37]=o("div",{class:"schedule-header"},[o("div",null,"F1"),o("div",{class:"volume-label"},"10hl")],-1)),t[38]||(t[38]=o("div",{class:"schedule-header"},[o("div",null,"B1"),o("div",{class:"volume-label"},"10hl")],-1)),t[39]||(t[39]=o("div",{class:"schedule-header"},[o("div",null,"B2"),o("div",{class:"volume-label"},"20hl")],-1)),(c(!0),p(X,null,oe(j.value,e=>(c(),p(X,{key:e.date},[o("div",{class:Ae(["schedule-cell date-cell",{today:e.isToday,weekend:e.isWeekend,holiday:e.isHoliday,"canning-day":Ut(e.date)}])},[o("div",gs,m(e.label),1)],2),o("div",{class:Ae(["schedule-cell tank-cell",rt(e,"Brewhouse")]),style:Ke(lt(e,"Brewhouse")),onClick:n=>T(e.date,"Brewhouse").length>0?dt(n,T(e.date,"Brewhouse")[0]):null},[T(e.date,"Brewhouse").length>0&&it(e.date,T(e.date,"Brewhouse")[0])?(c(),p("div",ys,[o("div",vs,[y(m(T(e.date,"Brewhouse")[0].beer_name)+" ",1),T(e.date,"Brewhouse")[0].batch_id?(c(),p("span",_s,m(T(e.date,"Brewhouse")[0].batch_id),1)):x("",!0)]),o("div",ps,m(T(e.date,"Brewhouse")[0].task_type),1)])):x("",!0)],14,ms),(c(),p(X,null,oe(Ue,n=>o("div",{key:`${e.date}-${n}`,class:Ae(["schedule-cell tank-cell",rt(e,n)]),style:Ke(lt(e,n)),onClick:r=>T(e.date,n).length>0?dt(r,T(e.date,n)[0]):null},[T(e.date,n).length>0&&it(e.date,T(e.date,n)[0])?(c(),p("div",hs,[o("div",ws,[y(m(T(e.date,n)[0].beer_name)+" ",1),T(e.date,n)[0].batch_id?(c(),p("span",ks,m(T(e.date,n)[0].batch_id),1)):x("",!0)]),o("div",bs,m(T(e.date,n)[0].task_type),1)])):x("",!0)],14,fs)),64))],64))),128))])])])]),i(pa,{modelValue:fe.value,"onUpdate:modelValue":t[9]||(t[9]=e=>fe.value=e),persistent:""},{default:d(()=>[i(Le,{style:{"min-width":"500px","max-width":"700px"}},{default:d(()=>[i(Be,{class:"row items-center q-pb-none"},{default:d(()=>[o("div",Ds,[i(Z,{name:"error",class:"q-mr-sm"}),t[40]||(t[40]=y(" Scheduling Failed ",-1))]),i(ka),tt(i(W,{icon:"close",flat:"",round:"",dense:""},null,512),[[bt]])]),_:1}),A.value?(c(),E(Be,{key:0},{default:d(()=>[o("div",xs,m(A.value.message),1),A.value.diagnostic?.warnings?.length>0?(c(),p("div",Ss,[o("div",qs,[i(Z,{name:"warning",color:"warning",class:"q-mr-xs"}),t[41]||(t[41]=y(" Warnings ",-1))]),i(ht,{dense:"",bordered:"",separator:"",class:"rounded-borders"},{default:d(()=>[(c(!0),p(X,null,oe(A.value.diagnostic.warnings,(e,n)=>(c(),E(at,{key:n},{default:d(()=>[i(J,null,{default:d(()=>[i(me,{class:"text-body2"},{default:d(()=>[y(m(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):x("",!0),A.value.diagnostic?.canning?(c(),p("div",Ts,[o("div",Cs,[i(Z,{name:"inventory_2",color:"primary",class:"q-mr-xs"}),t[42]||(t[42]=y(" Canning Constraints ",-1))]),o("div",Bs,[o("div",null,[t[43]||(t[43]=o("strong",null,"Available canning days:",-1)),y(" "+m(jt(A.value.diagnostic.canning.available_days)),1)]),o("div",null,[t[44]||(t[44]=o("strong",null,"Beers requiring canning:",-1)),y(" "+m(A.value.diagnostic.canning.beers_requiring_canning),1)])])])):x("",!0),A.value.diagnostic?.beer_diagnostics?.length>0?(c(),p("div",Is,[o("div",$s,[i(Z,{name:"sports_bar",color:"amber",class:"q-mr-xs"}),t[45]||(t[45]=y(" Beer Details ",-1))]),(c(!0),p(X,null,oe(A.value.diagnostic.beer_diagnostics,e=>(c(),E(Pe,{key:e.id,dense:"","expand-separator":"","header-class":e.warnings?.length>0?"text-negative":""},{header:d(()=>[i(J,{avatar:""},{default:d(()=>[i(Z,{name:e.warnings?.length>0?"error":"check_circle",color:e.warnings?.length>0?"negative":"positive",size:"sm"},null,8,["name","color"])]),_:2},1024),i(J,null,{default:d(()=>[i(me,null,{default:d(()=>[y(m(e.name),1)]),_:2},1024),i(me,{caption:""},{default:d(()=>[y(m(e.volume_hl)+" hl",1)]),_:2},1024)]),_:2},1024),e.warnings?.length>0?(c(),E(J,{key:0,side:""},{default:d(()=>[i(wt,{color:"negative"},{default:d(()=>[y(m(e.warnings.length)+" warning(s)",1)]),_:2},1024)]),_:2},1024)):x("",!0)]),default:d(()=>[i(Le,{flat:""},{default:d(()=>[i(Be,{class:"q-pt-none"},{default:d(()=>[e.warnings?.length>0?(c(),p("div",Vs,[(c(!0),p(X,null,oe(e.warnings,(n,r)=>(c(),p("div",{key:r,class:"text-negative text-body2 q-mb-xs"},[i(Z,{name:"warning",size:"xs",class:"q-mr-xs"}),y(" "+m(n),1)]))),128))])):x("",!0),o("div",Fs,[o("div",Ns,[o("div",Ms,[t[46]||(t[46]=o("span",{class:"text-grey-7"},"Brew days:",-1)),y(" "+m(e.brew_days),1)]),o("div",Ls,[t[47]||(t[47]=o("span",{class:"text-grey-7"},"Min fermentation:",-1)),y(" "+m(e.min_fermentation_days)+" days ",1)]),o("div",As,[t[48]||(t[48]=o("span",{class:"text-grey-7"},"Min maturation:",-1)),y(" "+m(e.min_maturation_days)+" days ",1)]),o("div",Ps,[t[49]||(t[49]=o("span",{class:"text-grey-7"},"Min to completion:",-1)),y(" "+m(e.min_days_to_completion)+" days ",1)]),o("div",Es,[t[50]||(t[50]=o("span",{class:"text-grey-7"},"Requires canning:",-1)),y(" "+m(e.requires_canning?"Yes":"No"),1)]),e.target_start_day!==null?(c(),p("div",Qs,[t[51]||(t[51]=o("span",{class:"text-grey-7"},"Target start:",-1)),y(" "+m(De(e.target_start_day)),1)])):x("",!0),e.target_completion_day!==null?(c(),p("div",Us,[t[52]||(t[52]=o("span",{class:"text-grey-7"},"Target completion:",-1)),y(" "+m(De(e.target_completion_day)),1)])):x("",!0),e.earliest_possible_completion!==null&&e.earliest_possible_completion!==void 0?(c(),p("div",Hs,[t[53]||(t[53]=o("span",{class:"text-grey-7"},"Earliest completion:",-1)),y(" "+m(De(e.earliest_possible_completion)),1)])):x("",!0),e.earliest_feasible_canning_day!==null?(c(),p("div",Ws,[t[54]||(t[54]=o("span",{class:"text-grey-7"},"Earliest canning:",-1)),y(" "+m(De(e.earliest_feasible_canning_day)),1)])):x("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["header-class"]))),128))])):x("",!0),o("div",Os," Solver status: "+m(A.value.diagnostic?.solver_status),1)]),_:1})):x("",!0),i(fa,{align:"right"},{default:d(()=>[tt(i(W,{flat:"",label:"Close",color:"primary"},null,512),[[bt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Zs=Ta(Rs,[["__scopeId","data-v-d20bb65e"]]);export{Zs as default};
