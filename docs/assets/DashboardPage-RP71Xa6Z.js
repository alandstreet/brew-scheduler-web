import{r as w,o as A,a as d,b as i,w as o,d as t,e as s,Q as T,f as h,g as r,i as D,j as m,u as c,k as C,l as p,t as u,m as f}from"./index-D44IgZtN.js";import{Q as N}from"./QPage-CGK_5oVe.js";import{u as q}from"./useAuth-Z4yizggo.js";import{u as B}from"./use-quasar--dFNM-SI.js";import"./index--1yaPLaP.js";import"./tokenProvider-CsQi9QZ3.js";const I={class:"q-pa-md",style:{"max-width":"600px"}},S={key:0},V={key:1},E={class:"text-caption"},U={__name:"DashboardPage",setup(P){const n=B(),{isLoading:k,userEmail:y,username:g,checkAuthState:v,getAccessToken:x,getIdToken:_}=q(),l=w("");A(async()=>{await v()});const Q=async()=>{try{const a=await x();a&&(l.value=a.substring(0,50)+"...",n.notify({type:"positive",message:"Access token retrieved successfully"}))}catch{n.notify({type:"negative",message:"Failed to get access token"})}},b=async()=>{try{const a=await _();a&&(l.value=a.substring(0,50)+"...",n.notify({type:"positive",message:"ID token retrieved successfully"}))}catch{n.notify({type:"negative",message:"Failed to get ID token"})}};return(a,e)=>(i(),d(N,{class:"flex flex-center"},{default:o(()=>[t("div",I,[e[5]||(e[5]=t("h4",{class:"q-mt-none"},"Protected Dashboard",-1)),s(T,null,{default:o(()=>[s(r,null,{default:o(()=>[...e[0]||(e[0]=[t("div",{class:"text-h6"},"Welcome!",-1),t("div",{class:"text-subtitle2"},"You are authenticated",-1)])]),_:1}),s(D),s(r,null,{default:o(()=>[c(k)?(i(),m("div",S,[s(C,{size:"md"}),e[1]||(e[1]=t("span",{class:"q-ml-sm"},"Loading user info...",-1))])):(i(),m("div",V,[t("p",null,[e[2]||(e[2]=t("strong",null,"Username:",-1)),p(" "+u(c(g)||"N/A"),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Email:",-1)),p(" "+u(c(y)||"N/A"),1)])]))]),_:1}),s(r,null,{default:o(()=>[s(f,{color:"primary",label:"Get Access Token",onClick:Q,class:"q-mr-sm"}),s(f,{color:"secondary",label:"Get ID Token",onClick:b})]),_:1}),l.value?(i(),d(r,{key:0},{default:o(()=>[e[4]||(e[4]=t("div",{class:"text-caption text-grey-7"},"Token (truncated):",-1)),t("code",E,u(l.value),1)]),_:1})):h("",!0)]),_:1})])]),_:1}))}};export{U as default};
