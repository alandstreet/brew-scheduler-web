import{p as Se,l as q,z as x,B as it,C as Ne,T as dt,D as rt,E as ut,F as ct,G as mt,H as Ae,s as gt,I as vt,r as g,J as yt,K as pt,L as ce,M as ft,g as te,N as Pe,O as Qe,A as _t,P as Ve,R as ht,o as bt,c as oe,a as v,w as f,b as l,h as _,d,i as $e,e as Z,j as $,Q as Fe,f as Le,t as D,S as U,k as Y,U as G,V as ee,W as ue,X as wt,Y as kt,Z as he}from"./index-DyUdoP9_.js";import{Q as Ue,a as me,b as ae,c as F,v as Dt,d as xt,e as be,f as we,g as St,h as Bt}from"./v4-Cx9evodj.js";import{Q as Tt}from"./QPage-CPdjMB4F.js";import{u as Ct}from"./use-quasar-BH2mIeJ2.js";const It=["top","middle","bottom"],qt=Se({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:a=>It.includes(a)}},setup(a,{slots:o}){const k=q(()=>a.align!==void 0?{verticalAlign:a.align}:null),m=q(()=>{const h=a.outline===!0&&a.color||a.textColor;return`q-badge flex inline items-center no-wrap q-badge--${a.multiLine===!0?"multi":"single"}-line`+(a.outline===!0?" q-badge--outline":a.color!==void 0?` bg-${a.color}`:"")+(h!==void 0?` text-${h}`:"")+(a.floating===!0?" q-badge--floating":"")+(a.rounded===!0?" q-badge--rounded":"")+(a.transparent===!0?" q-badge--transparent":"")});return()=>x("div",{class:m.value,style:k.value,role:"status","aria-label":a.label},it(o.default,a.label!==void 0?[a.label]:[]))}}),Vt=Se({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(a,{slots:o,emit:k}){let m=!1,h,y,b=null,w=null,S,L;function M(){h?.(),h=null,m=!1,b!==null&&(clearTimeout(b),b=null),w!==null&&(clearTimeout(w),w=null),y?.removeEventListener("transitionend",S),S=null}function T(u,B,C){B!==void 0&&(u.style.height=`${B}px`),u.style.transition=`height ${a.duration}ms cubic-bezier(.25, .8, .50, 1)`,m=!0,h=C}function P(u,B){u.style.overflowY=null,u.style.height=null,u.style.transition=null,M(),B!==L&&k(B)}function K(u,B){let C=0;y=u,m===!0?(M(),C=u.offsetHeight===u.scrollHeight?0:void 0):(L="hide",u.style.overflowY="hidden"),T(u,C,B),b=setTimeout(()=>{b=null,u.style.height=`${u.scrollHeight}px`,S=I=>{w=null,(Object(I)!==I||I.target===u)&&P(u,"show")},u.addEventListener("transitionend",S),w=setTimeout(S,a.duration*1.1)},100)}function J(u,B){let C;y=u,m===!0?M():(L="show",u.style.overflowY="hidden",C=u.scrollHeight),T(u,C,B),b=setTimeout(()=>{b=null,u.style.height=0,S=I=>{w=null,(Object(I)!==I||I.target===u)&&P(u,"hide")},u.addEventListener("transitionend",S),w=setTimeout(S,a.duration*1.1)},100)}return Ne(()=>{m===!0&&M()}),()=>x(dt,{css:!1,appear:a.appear,onEnter:K,onLeave:J},o.default)}}),W=rt({}),$t=Object.keys(Ae),Ft=Se({name:"QExpansionItem",props:{...Ae,...mt,...ct,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ut,"click","afterShow","afterHide"],setup(a,{slots:o,emit:k}){const{proxy:{$q:m}}=gt(),h=vt(a,m),y=g(a.modelValue!==null?a.modelValue:a.defaultOpened),b=g(null),w=yt(),{show:S,hide:L,toggle:M}=pt({showing:y});let T,P;const K=q(()=>`q-expansion-item q-item-type q-expansion-item--${y.value===!0?"expanded":"collapsed"} q-expansion-item--${a.popup===!0?"popup":"standard"}`),J=q(()=>a.contentInsetLevel===void 0?null:{["padding"+(m.lang.rtl===!0?"Right":"Left")]:a.contentInsetLevel*56+"px"}),u=q(()=>a.disable!==!0&&(a.href!==void 0||a.to!==void 0&&a.to!==null&&a.to!=="")),B=q(()=>{const r={};return $t.forEach(V=>{r[V]=a[V]}),r}),C=q(()=>u.value===!0||a.expandIconToggle!==!0),I=q(()=>a.expandedIcon!==void 0&&y.value===!0?a.expandedIcon:a.expandIcon||m.iconSet.expansionItem[a.denseToggle===!0?"denseIcon":"icon"]),ne=q(()=>a.disable!==!0&&(u.value===!0||a.expandIconToggle===!0)),Q=q(()=>({expanded:y.value===!0,detailsId:w.value,toggle:M,show:S,hide:L})),j=q(()=>{const r=a.toggleAriaLabel!==void 0?a.toggleAriaLabel:m.lang.label[y.value===!0?"collapse":"expand"](a.label);return{role:"button","aria-expanded":y.value===!0?"true":"false","aria-controls":w.value,"aria-label":r}});ce(()=>a.group,r=>{P?.(),r!==void 0&&de()});function N(r){u.value!==!0&&M(r),k("click",r)}function z(r){r.keyCode===13&&H(r,!0)}function H(r,V){V!==!0&&r.qAvoidFocus!==!0&&b.value?.focus(),M(r),ht(r)}function X(){k("afterShow")}function ge(){k("afterHide")}function de(){T===void 0&&(T=ft()),y.value===!0&&(W[a.group]=T);const r=ce(y,E=>{E===!0?W[a.group]=T:W[a.group]===T&&delete W[a.group]}),V=ce(()=>W[a.group],(E,se)=>{se===T&&E!==void 0&&E!==T&&L()});P=()=>{r(),V(),W[a.group]===T&&delete W[a.group],P=void 0}}function re(){const r={class:[`q-focusable relative-position cursor-pointer${a.denseToggle===!0&&a.switchToggleSide===!0?" items-end":""}`,a.expandIconClass],side:a.switchToggleSide!==!0,avatar:a.switchToggleSide},V=[x(Ve,{class:"q-expansion-item__toggle-icon"+(a.expandedIcon===void 0&&y.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:I.value})];return ne.value===!0&&(Object.assign(r,{tabindex:0,...j.value,onClick:H,onKeyup:z}),V.unshift(x("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),x(ae,r,()=>V)}function ve(){let r;return o.header!==void 0?r=[].concat(o.header(Q.value)):(r=[x(ae,()=>[x(me,{lines:a.labelLines},()=>a.label||""),a.caption?x(me,{lines:a.captionLines,caption:!0},()=>a.caption):null])],a.icon&&r[a.switchToggleSide===!0?"push":"unshift"](x(ae,{side:a.switchToggleSide===!0,avatar:a.switchToggleSide!==!0},()=>x(Ve,{name:a.icon})))),a.disable!==!0&&a.hideExpandIcon!==!0&&r[a.switchToggleSide===!0?"unshift":"push"](re()),r}function ye(){const r={ref:"item",style:a.headerStyle,class:a.headerClass,dark:h.value,disable:a.disable,dense:a.dense,insetLevel:a.headerInsetLevel};return C.value===!0&&(r.clickable=!0,r.onClick=N,Object.assign(r,u.value===!0?B.value:j.value)),x(Ue,r,ve)}function pe(){return Pe(x("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:J.value,id:w.value},_t(o.default)),[[Qe,y.value]])}function A(){const r=[ye(),x(Vt,{duration:a.duration,onShow:X,onHide:ge},pe)];return a.expandSeparator===!0&&r.push(x(te,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:h.value}),x(te,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:h.value})),r}return a.group!==void 0&&de(),Ne(()=>{P?.()}),()=>x("div",{class:K.value},[x("div",{class:"q-expansion-item__container relative-position"},A())])}}),ie="/api/beers",R={async getAll(){return(await F.get(ie)).data.beers||[]},async getById(a){return(await F.get(`${ie}/${a}`)).data.beer},async create(a){const o={beer_template_id:a.beer_template_id,name:a.name,batch_id:a.batch_id,volume_hl:a.volume_hl,priority:a.priority,min_fermentation_days:a.min_fermentation_days,min_maturation_days:a.min_maturation_days,target_start_date:a.target_start_date,target_completion_date:a.target_completion_date};await F.post(ie,o)},async update(a,o){const k={beer_id:o.beer_id,beer_template_id:o.beer_template_id||null,name:o.name,batch_id:o.batch_id||null,volume_hl:o.volume_hl,priority:o.priority,min_fermentation_days:o.min_fermentation_days,min_maturation_days:o.min_maturation_days||0,target_start_date:o.target_start_date||null,target_completion_date:o.target_completion_date||null,requires_canning:o.requires_canning||!1,tasks:o.tasks||[]};await F.put(`${ie}/${a}`,k)},async delete(a){await F.delete(`${ie}/${a}`)}},ke="/api/canning-days",De={async getAll(){return(await F.get(ke)).data.canning_days||[]},async create(a){await F.post(ke,{canning_day:a})},async delete(a){await F.delete(`${ke}/${a}`)}},xe="/api/tasks",Me={async getById(a){return(await F.get(`${xe}/${a}`)).data.task},async create(a){const o=Dt();return(await F.post(xe,{task_id:o,...a,locked:!0})).data},async delete(a){await F.delete(`${xe}/${a}`)}},Lt=(a,o)=>{const k=a.__vccOpts||a;for(const[m,h]of o)k[m]=h;return k},Mt={class:"row no-wrap",style:{height:"100%"}},Nt={class:"col-3 q-pa-md",style:{"border-right":"1px solid #e0e0e0","overflow-y":"auto"}},At={key:0,class:"flex flex-center q-pa-md"},Pt={key:1},Qt={class:"text-subtitle2 text-primary"},Ut={class:"text-caption"},Ht={class:"row q-gutter-sm q-mb-md"},Et={key:1,class:"canning-days-list q-mb-md"},Ot={key:2,class:"text-grey-6 text-center q-pa-sm"},Rt={class:"row items-center justify-between q-mb-md"},jt={key:3,class:"flex flex-center q-pa-md"},zt={class:"row items-center justify-between q-mb-sm"},Yt={class:"beer-details"},Gt={class:"detail-row"},Wt={class:"detail-row"},Kt={class:"detail-row"},Jt={class:"detail-row"},Xt={class:"detail-row"},Zt={class:"detail-row"},ea={class:"detail-row"},ta={key:0,class:"q-mt-md"},aa={class:"task-type-label"},na={key:5,class:"text-center text-grey-7 q-pa-md"},sa={class:"col-9 q-pa-md"},la={class:"row items-center justify-between q-mb-md"},oa={class:"row items-center q-gutter-sm"},ia={class:"text-h6"},da={class:"schedule-table-container"},ra={class:"schedule-table"},ua={class:"date-label"},ca=["onClick"],ma={key:0,class:"task-info"},ga={class:"task-name"},va={key:0,class:"batch-id"},ya={class:"task-type"},pa=["onClick"],fa={key:0,class:"task-info"},_a={class:"task-name"},ha={key:0,class:"batch-id"},ba={class:"task-type"},wa={__name:"SchedulePage",setup(a){const o=Ct(),k=g([]),m=g(null),h=g(""),y=g(null),b=g(null),w=g(2),S=g(null),L=g(null),M=g(null),T=g(null),P=g(null),K=g(null),J=g(null),u=g(null),B=g(!1),C=g(!1),I=g(!1),ne=g(!1),Q=g(new Date),j=g([]),N=g([]),z=g([]),H=g(null),X=g(!1),ge=["F6","F5","F4","F3","F2","F1","B1","B2"];ce(m,n=>{n?(y.value=n.min_fermentation_days,b.value=n.min_maturation_days):(y.value=null,b.value=null)});const de=q(()=>{const n=new Date(Q.value),t=new Date(Q.value);return t.setDate(t.getDate()+29),`${n.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}),re=q(()=>{const n=[],t=new Date;t.setHours(0,0,0,0);for(let e=0;e<30;e++){const s=new Date(Q.value);s.setDate(s.getDate()+e),s.setHours(0,0,0,0);const i=ve(s),c=s.getTime()===t.getTime(),O=s.getDay()===0||s.getDay()===6,le=ye(s);n.push({date:i,label:s.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),isToday:c,isWeekend:O,isHoliday:le,fullDate:new Date(s)})}return n}),ve=n=>{const t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${s}`},ye=n=>{const t=n.getFullYear(),e=n.getMonth()+1,s=n.getDate();if(e===1&&s===1||e===1&&s===26||e===4&&s===25||e===12&&s===25||e===12&&s===26)return!0;if(e===5){const i=new Date(t,4,1);for(;i.getDay()!==1;)i.setDate(i.getDate()+1);if(s===i.getDate())return!0}if(e===6){const i=new Date(t,5,1);for(;i.getDay()!==1;)i.setDate(i.getDate()+1);const c=new Date(i);if(c.setDate(c.getDate()+7),s===c.getDate())return!0}if(e===8){const i=new Date(t,7,1);for(;i.getDay()!==3;)i.setDate(i.getDate()+1);const c=new Date(i);if(c.setDate(c.getDate()+14),s===c.getDate())return!0}return!1},pe=async()=>{B.value=!0;try{k.value=await xt.getAll()}catch(n){o.notify({type:"negative",message:"Failed to load beer templates",caption:n.response?.data?.message||n.message})}finally{B.value=!1}},A=async()=>{I.value=!0;try{const n=await R.getAll();j.value=n;const t=[];for(const e of n)e.tasks&&Array.isArray(e.tasks)&&t.push(...e.tasks);N.value=t}catch(n){o.notify({type:"negative",message:"Failed to load beers",caption:n.response?.data?.message||n.message})}finally{I.value=!1}},r=async()=>{if(!(!m.value||!h.value||y.value===null||b.value===null||w.value===null)){C.value=!0;try{const n={beer_template_id:m.value.beer_template_id,name:m.value.beer_name,batch_id:h.value,volume_hl:m.value.volume_hl,priority:w.value,min_fermentation_days:y.value,min_maturation_days:b.value,target_start_date:S.value||null,target_completion_date:L.value||null};await R.create(n),o.notify({type:"positive",message:"Beer created successfully",caption:`${n.name} ${n.batch_id}`,icon:"local_drink"}),m.value=null,h.value="",y.value=null,b.value=null,w.value=2,S.value=null,L.value=null,M.value?.resetValidation(),T.value?.resetValidation(),P.value?.resetValidation(),K.value?.resetValidation(),J.value?.resetValidation(),u.value?.resetValidation(),await A()}catch(n){o.notify({type:"negative",message:"Failed to create beer",caption:n.response?.data?.message||n.message})}finally{C.value=!1}}},V=[[229,57,53],[30,136,229],[67,160,71],[251,140,0],[142,36,170],[0,172,193],[255,179,0],[109,76,65],[216,27,96],[57,73,171],[0,137,123],[124,179,66],[244,81,30],[94,53,177],[3,155,229],[192,202,51]],E=new Map,se=(n,t=!1)=>{if(!E.has(n)){const le=E.size%V.length;E.set(n,le)}const e=E.get(n),[s,i,c]=V[e];return`rgba(${s}, ${i}, ${c}, ${t?.4:.2})`},He=async()=>{ne.value=!0;try{const t=(await F.post("/api/schedule",{beers:j.value,canning_days:z.value})).data.schedule?.beers||[],e=[];for(const s of t)if(s.tasks&&Array.isArray(s.tasks))for(const i of s.tasks)e.push({...i,beer_id:s.beer_id,beer_name:s.name,batch_id:s.batch_id});N.value=e,o.notify({type:"positive",message:"Beers scheduled successfully",icon:"calendar_today"})}catch(n){console.error("Schedule error:",n),o.notify({type:"negative",message:"Failed to schedule beers",caption:n.response?.data?.message||n.message})}finally{ne.value=!1}},p=(n,t)=>{const e=t.toLowerCase();return N.value.filter(s=>{if(s.resource.toLowerCase()!==e)return!1;const i=new Date(s.start_date),c=new Date(s.end_date),O=new Date(n);return i.setHours(0,0,0,0),c.setHours(0,0,0,0),O.setHours(0,0,0,0),O>=i&&O<=c})},Be=(n,t)=>{const e=new Date(t.start_date),s=new Date(t.end_date),i=new Date(n);e.setHours(0,0,0,0),s.setHours(0,0,0,0),i.setHours(0,0,0,0);const c=i.getTime()===e.getTime(),O=i.getTime()===s.getTime(),le=Math.round((s-e)/(1e3*60*60*24))+1,lt=Math.floor(le/2),_e=new Date(e);_e.setDate(_e.getDate()+lt);const ot=i.getTime()===_e.getTime();return{isFirst:c,isLast:O,isMiddle:ot,isSingle:c&&O}},Te=(n,t)=>{const e=Be(n,t);return e.isMiddle||e.isSingle},Ce=n=>N.value.filter(t=>t.beer_id===n),Ee=async(n,t,e)=>{try{if(e){const s=await Me.create({beer_id:n.beer_id,beer_name:n.name,task_type:t.task_type,start_day:t.start_day,start_date:t.start_date,duration:t.duration,end_day:t.end_day,end_date:t.end_date,resource:t.resource,volume_hl:n.volume_hl}),i=N.value.findIndex(c=>c.beer_id===n.beer_id&&c.task_type===t.task_type);i!==-1&&(N.value[i]={...N.value[i],task_id:s.task_id,locked:!0}),o.notify({type:"positive",message:"Task pinned",caption:`${t.task_type} for ${n.name}`,icon:"push_pin"})}else if(t.task_id){await Me.delete(t.task_id);const s=N.value.findIndex(i=>i.beer_id===n.beer_id&&i.task_type===t.task_type);s!==-1&&N.value.splice(s,1),o.notify({type:"positive",message:"Task unpinned",caption:`${t.task_type} for ${n.name}`,icon:"push_pin"})}}catch(s){o.notify({type:"negative",message:e?"Failed to pin task":"Failed to unpin task",caption:s.response?.data?.message||s.message})}},Ie=(n,t)=>{const e=p(n.date,t),s=e.length>0,i={today:n.isToday,weekend:n.isWeekend,holiday:n.isHoliday,"has-task":s};if(s){const c=Be(n.date,e[0]);i["task-first"]=c.isFirst&&!c.isSingle,i["task-last"]=c.isLast&&!c.isSingle,i["task-middle"]=!c.isFirst&&!c.isLast,i["task-single"]=c.isSingle}return i},qe=n=>{o.notify({type:"info",message:`Viewing ${n.name}`,caption:"Feature coming soon..."})},Oe=n=>{o.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${n.name} (${n.batch_id})?`,cancel:!0,persistent:!0}).onOk(async()=>{await Re(n.beer_id)})},Re=async n=>{try{await R.delete(n),o.notify({type:"positive",message:"Beer deleted successfully",icon:"delete"}),await A()}catch(t){o.notify({type:"negative",message:"Failed to delete beer",caption:t.response?.data?.message||t.message})}},je=async(n,t)=>{try{const e=Number(t);if(isNaN(e)||e<=0){o.notify({type:"negative",message:"Invalid volume",caption:"Must be greater than 0"});return}const s={...n,volume_hl:e};await R.update(n.beer_id,s),o.notify({type:"positive",message:"Volume updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update volume",caption:e.response?.data?.message||e.message})}},ze=async(n,t)=>{try{const e={...n,priority:t};await R.update(n.beer_id,e),o.notify({type:"positive",message:"Priority updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update priority",caption:e.response?.data?.message||e.message})}},Ye=async(n,t)=>{try{const e=Number(t);if(isNaN(e)||e<0){o.notify({type:"negative",message:"Invalid fermentation days",caption:"Must be 0 or greater"});return}const s={...n,min_fermentation_days:e};await R.update(n.beer_id,s),o.notify({type:"positive",message:"Min fermentation days updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update min fermentation days",caption:e.response?.data?.message||e.message})}},Ge=async(n,t)=>{try{const e={...n,target_start_date:t||null};await R.update(n.beer_id,e),o.notify({type:"positive",message:"Target start date updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update target start date",caption:e.response?.data?.message||e.message})}},We=async(n,t)=>{try{const e={...n,target_completion_date:t||null};await R.update(n.beer_id,e),o.notify({type:"positive",message:"Target completion date updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update target completion date",caption:e.response?.data?.message||e.message})}},Ke=async(n,t)=>{try{const e={...n,requires_canning:t};await R.update(n.beer_id,e),o.notify({type:"positive",message:"Requires canning updated successfully",icon:"check"}),await A()}catch(e){o.notify({type:"negative",message:"Failed to update requires canning",caption:e.response?.data?.message||e.message})}},Je=()=>{const n=new Date(Q.value);n.setDate(n.getDate()-30),Q.value=n},Xe=()=>{const n=new Date(Q.value);n.setDate(n.getDate()+30),Q.value=n},Ze=()=>{Q.value=new Date},et=n=>{switch(n){case 5:return"red";case 4:return"orange";case 3:return"amber";case 2:return"blue";case 1:return"grey";default:return"grey"}},fe=async()=>{try{z.value=await De.getAll()}catch(n){console.error("Failed to load canning days:",n)}},tt=n=>z.value.includes(n),at=async()=>{if(H.value){X.value=!0;try{await De.create(H.value),await fe(),H.value=null,o.notify({type:"positive",message:"Canning day added",icon:"event"})}catch(n){o.notify({type:"negative",message:"Failed to add canning day",caption:n.response?.data?.message||n.message})}finally{X.value=!1}}},nt=async n=>{try{await De.delete(n),await fe(),o.notify({type:"positive",message:"Canning day removed",icon:"event_busy"})}catch(t){o.notify({type:"negative",message:"Failed to remove canning day",caption:t.response?.data?.message||t.message})}},st=n=>new Date(n).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return bt(async()=>{await Promise.all([pe(),A(),fe()])}),(n,t)=>(v(),oe(Tt,{class:"schedule-page"},{default:f(()=>[l("div",Mt,[l("div",Nt,[t[25]||(t[25]=l("div",{class:"text-h5 q-mb-md"},"Create Beer",-1)),B.value?(v(),_("div",At,[d($e,{color:"primary",size:"md"})])):(v(),_("div",Pt,[d(be,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),options:k.value,"option-label":"beer_name","option-value":"beer_template_id",label:"Select Beer Template",outlined:"",disable:k.value.length===0},{"no-option":f(()=>[d(Ue,null,{default:f(()=>[d(ae,{class:"text-grey"},{default:f(()=>[...t[8]||(t[8]=[$(" No templates available ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"]),m.value?(v(),oe(Fe,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:f(()=>[d(Le,null,{default:f(()=>[l("div",Qt,D(m.value.beer_name),1),d(te,{class:"q-my-sm"}),l("div",Ut,[l("div",null,[t[9]||(t[9]=l("strong",null,"Volume:",-1)),$(" "+D(m.value.volume_hl)+" hl",1)]),l("div",null,[t[10]||(t[10]=l("strong",null,"Maturation:",-1)),$(" "+D(m.value.min_maturation_days)+" days",1)])]),d(te,{class:"q-my-sm"}),d(U,{ref_key:"batchIdInput",ref:M,modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),label:"Batch ID *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>!!e||"Batch ID is required"]},null,8,["modelValue","rules"]),d(U,{ref_key:"minFermentationDaysInput",ref:T,modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min fermentation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),d(U,{ref_key:"minMaturationDaysInput",ref:P,modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min maturation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),d(be,{ref_key:"priorityInput",ref:K,modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value=e),options:[1,2,3],label:"Priority *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!=null||"Priority is required"]},null,8,["modelValue","rules"]),d(U,{ref_key:"targetStartDateInput",ref:J,modelValue:S.value,"onUpdate:modelValue":t[5]||(t[5]=e=>S.value=e),label:"Target Start Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),d(U,{ref_key:"targetDateInput",ref:u,modelValue:L.value,"onUpdate:modelValue":t[6]||(t[6]=e=>L.value=e),label:"Target Completion Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),d(Y,{color:"primary",icon:"add",label:"Create Beer",class:"full-width q-mt-md",disable:!h.value||y.value===null||b.value===null||w.value===null||C.value,loading:C.value,onClick:r},null,8,["disable","loading"])]),_:1})]),_:1})):Z("",!0),d(te,{class:"q-my-md"}),t[24]||(t[24]=l("div",{class:"text-h6 q-mb-md"},"Canning Days",-1)),l("div",Ht,[d(U,{modelValue:H.value,"onUpdate:modelValue":t[7]||(t[7]=e=>H.value=e),type:"date",label:"Add Canning Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),d(Y,{color:"primary",icon:"add",disable:!H.value||X.value,loading:X.value,onClick:at},{default:f(()=>[d(we,null,{default:f(()=>[...t[11]||(t[11]=[$("Add Canning Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),z.value.length>0?(v(),_("div",Et,[(v(!0),_(G,null,ee(z.value,e=>(v(),oe(St,{key:e,removable:"",color:"red","text-color":"white",onRemove:s=>nt(e)},{default:f(()=>[$(D(st(e)),1)]),_:2},1032,["onRemove"]))),128))])):(v(),_("div",Ot," No canning days scheduled ")),d(te,{class:"q-my-md"}),l("div",Rt,[t[13]||(t[13]=l("div",{class:"text-h6"},"Batches",-1)),d(Y,{flat:"",dense:"",round:"",icon:"calendar_today",size:"sm",color:"primary",loading:ne.value,onClick:He},{default:f(()=>[d(we,null,{default:f(()=>[...t[12]||(t[12]=[$("Schedule Beers",-1)])]),_:1})]),_:1},8,["loading"])]),I.value?(v(),_("div",jt,[d($e,{color:"primary",size:"md"})])):j.value.length>0?(v(),oe(Bt,{key:4},{default:f(()=>[(v(!0),_(G,null,ee(j.value,e=>(v(),oe(Ft,{key:e.beer_id,"expand-separator":"",class:"color-indicator",style:ue({backgroundColor:se(e.beer_id)})},{header:f(()=>[d(ae,null,{default:f(()=>[d(me,null,{default:f(()=>[$(D(e.name),1)]),_:2},1024),d(me,{caption:""},{default:f(()=>[$(D(e.batch_id),1)]),_:2},1024)]),_:2},1024),d(ae,{side:""},{default:f(()=>[d(qt,{color:et(e.priority)},{default:f(()=>[$(" P"+D(e.priority),1)]),_:2},1032,["color"])]),_:2},1024)]),default:f(()=>[d(Fe,{flat:""},{default:f(()=>[d(Le,{class:"q-pt-none"},{default:f(()=>[l("div",zt,[t[15]||(t[15]=l("div",{class:"text-subtitle2"},"Beer Details",-1)),d(Y,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:s=>Oe(e)},{default:f(()=>[d(we,null,{default:f(()=>[...t[14]||(t[14]=[$("Delete Beer",-1)])]),_:1})]),_:1},8,["onClick"])]),l("div",Yt,[l("div",Gt,[t[16]||(t[16]=l("span",{class:"detail-label"},"Batch ID:",-1)),l("span",null,D(e.batch_id),1)]),l("div",Wt,[t[17]||(t[17]=l("span",{class:"detail-label"},"Volume:",-1)),d(U,{"model-value":e.volume_hl,type:"number",suffix:"hl",dense:"",outlined:"",style:{"max-width":"100px"},rules:[s=>s>0||"Must be greater than 0"],"onUpdate:modelValue":s=>je(e,s)},null,8,["model-value","rules","onUpdate:modelValue"])]),l("div",Kt,[t[18]||(t[18]=l("span",{class:"detail-label"},"Priority:",-1)),d(be,{"model-value":e.priority,options:[1,2,3],dense:"",outlined:"",style:{"max-width":"80px"},"onUpdate:modelValue":s=>ze(e,s)},null,8,["model-value","onUpdate:modelValue"])]),l("div",Jt,[t[19]||(t[19]=l("span",{class:"detail-label"},"Min Fermentation:",-1)),d(U,{"model-value":e.min_fermentation_days,type:"number",suffix:"days",dense:"",outlined:"",style:{"max-width":"120px"},rules:[s=>s>=0||"Must be 0 or greater"],onChange:s=>Ye(e,s.target.value)},null,8,["model-value","rules","onChange"])]),l("div",Xt,[t[20]||(t[20]=l("span",{class:"detail-label"},"Target Start:",-1)),d(U,{"model-value":e.target_start_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":s=>Ge(e,s)},null,8,["model-value","onUpdate:modelValue"])]),l("div",Zt,[t[21]||(t[21]=l("span",{class:"detail-label"},"Target Completion:",-1)),d(U,{"model-value":e.target_completion_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":s=>We(e,s)},null,8,["model-value","onUpdate:modelValue"])]),l("div",ea,[t[22]||(t[22]=l("span",{class:"detail-label"},"Requires Canning:",-1)),d(wt,{"model-value":e.requires_canning||!1,dense:"","onUpdate:modelValue":s=>Ke(e,s)},null,8,["model-value","onUpdate:modelValue"])])]),Ce(e.beer_id).length>0?(v(),_("div",ta,[t[23]||(t[23]=l("div",{class:"text-subtitle2 q-mb-sm"},"Scheduled Tasks",-1)),(v(!0),_(G,null,ee(Ce(e.beer_id),s=>(v(),_("div",{key:`${e.beer_id}-${s.task_type}`,class:"task-row"},[l("span",aa,D(s.task_type),1),d(kt,{"model-value":s.locked||!1,label:"Pin",dense:"",size:"sm","onUpdate:modelValue":i=>Ee(e,s,i)},null,8,["model-value","onUpdate:modelValue"])]))),128))])):Z("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):(v(),_("div",na," No beers scheduled yet "))]))]),l("div",sa,[l("div",la,[t[26]||(t[26]=l("div",{class:"text-h4"},"Schedule",-1)),l("div",oa,[d(Y,{flat:"",dense:"",round:"",icon:"chevron_left",onClick:Je}),l("div",ia,D(de.value),1),d(Y,{flat:"",dense:"",round:"",icon:"chevron_right",onClick:Xe}),d(Y,{flat:"",label:"Today",onClick:Ze})])]),l("div",da,[l("div",ra,[t[27]||(t[27]=l("div",{class:"schedule-header"},"Date",-1)),t[28]||(t[28]=l("div",{class:"schedule-header"},"Brewhouse",-1)),t[29]||(t[29]=l("div",{class:"schedule-header"},[l("div",null,"F6"),l("div",{class:"volume-label"},"20hl")],-1)),t[30]||(t[30]=l("div",{class:"schedule-header"},[l("div",null,"F5"),l("div",{class:"volume-label"},"20hl")],-1)),t[31]||(t[31]=l("div",{class:"schedule-header"},[l("div",null,"F4"),l("div",{class:"volume-label"},"20hl")],-1)),t[32]||(t[32]=l("div",{class:"schedule-header"},[l("div",null,"F3"),l("div",{class:"volume-label"},"20hl")],-1)),t[33]||(t[33]=l("div",{class:"schedule-header"},[l("div",null,"F2"),l("div",{class:"volume-label"},"10hl")],-1)),t[34]||(t[34]=l("div",{class:"schedule-header"},[l("div",null,"F1"),l("div",{class:"volume-label"},"10hl")],-1)),t[35]||(t[35]=l("div",{class:"schedule-header"},[l("div",null,"B1"),l("div",{class:"volume-label"},"10hl")],-1)),t[36]||(t[36]=l("div",{class:"schedule-header"},[l("div",null,"B2"),l("div",{class:"volume-label"},"20hl")],-1)),(v(!0),_(G,null,ee(re.value,e=>(v(),_(G,{key:e.date},[l("div",{class:he(["schedule-cell date-cell",{today:e.isToday,weekend:e.isWeekend,holiday:e.isHoliday}])},[l("div",ua,D(e.label),1)],2),l("div",{class:he(["schedule-cell tank-cell",Ie(e,"Brewhouse")]),style:ue(p(e.date,"Brewhouse").length>0?{backgroundColor:se(p(e.date,"Brewhouse")[0].beer_id,p(e.date,"Brewhouse")[0].locked)}:{}),onClick:s=>p(e.date,"Brewhouse").length>0?qe(p(e.date,"Brewhouse")[0]):null},[p(e.date,"Brewhouse").length>0&&Te(e.date,p(e.date,"Brewhouse")[0])?(v(),_("div",ma,[l("div",ga,[$(D(p(e.date,"Brewhouse")[0].beer_name)+" ",1),p(e.date,"Brewhouse")[0].batch_id?(v(),_("span",va,D(p(e.date,"Brewhouse")[0].batch_id),1)):Z("",!0)]),l("div",ya,D(p(e.date,"Brewhouse")[0].task_type),1)])):Z("",!0)],14,ca),(v(),_(G,null,ee(ge,s=>l("div",{key:`${e.date}-${s}`,class:he(["schedule-cell tank-cell",Ie(e,s)]),style:ue(p(e.date,s).length>0?{backgroundColor:se(p(e.date,s)[0].beer_id,p(e.date,s)[0].locked)}:{}),onClick:i=>p(e.date,s).length>0?qe(p(e.date,s)[0]):null},[p(e.date,s).length>0&&Te(e.date,p(e.date,s)[0])?(v(),_("div",fa,[l("div",_a,[$(D(p(e.date,s)[0].beer_name)+" ",1),p(e.date,s)[0].batch_id?(v(),_("span",ha,D(p(e.date,s)[0].batch_id),1)):Z("",!0)]),l("div",ba,D(p(e.date,s)[0].task_type),1)])):Z("",!0)],14,pa)),64))],64))),128))]),(v(!0),_(G,null,ee(re.value,(e,s)=>Pe((v(),_("div",{key:"canning-"+e.date,class:"canning-day-overlay",style:ue({top:`calc(${s} * 36px + 57px)`})},null,4)),[[Qe,tt(e.date)]])),128))])])])]),_:1}))}},Ba=Lt(wa,[["__scopeId","data-v-96132c26"]]);export{Ba as default};
