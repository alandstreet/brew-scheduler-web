import{c as ce,n as _,h as d,A as we,v as ve,H as Gt,a3 as Dt,W as bt,Z as yt,J as Jt,r as T,G as se,K as Xt,F as kt,aj as Bt,o as Ze,ak as $t,al as It,C as Nt,R as Ot,am as Zt,an as Yt,ao as el,ap as ht,aq as mt,ar as Ct,as as tl,E as _t,at as ll,ae as rt,au as De,m as $,i as gt,av as al,a4 as qt,aw as nl,I as ol,ax as sl,a as oe,b as M,w as y,d as A,j as ee,e as o,k as it,l as z,a9 as te,ay as rl,aa as ut,ab as dt,t as X,ah as Be,Q as $e,g as le,ai as ct}from"./index-DxqLHmPD.js";import{u as il,i as ul,h as Je,j as Et,e as Xe,c as Ie,d as Ke,s as vt,f as Ne,Q as ft,b as pe,a as Oe,v as dl}from"./subTaskNames-T9R7bfY8.js";import{Q as cl}from"./QPage-_o8bDET5.js";import{u as vl}from"./use-quasar-XqLvG-Mk.js";const Pt=ce({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const r=ve(),b=_(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:b.value},we(l.default));const s=r.vnode.key,g=(e.props.colsMap!==void 0?e.props.colsMap[s]:null)||e.props.col;if(g===void 0)return;const{row:u}=e.props;return d("td",{class:b.value+g.__tdClass(u),style:g.__tdStyle(u)},we(l.default))}}}),fl=ce({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:r}){const b=ve(),{proxy:{$q:s}}=b,g=u=>{r("click",u)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:g},we(l.default));let u,v;const m=b.vnode.key;if(m){if(u=e.props.colsMap[m],u===void 0)return}else u=e.props.col;if(u.sortable===!0){const n=u.align==="right"?"unshift":"push";v=Gt(l.default,[]),v[n](d(Dt,{class:u.__iconClass,name:s.iconSet.table.arrowUp}))}else v=we(l.default);const w={class:u.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:u.headerStyle,onClick:n=>{u.sortable===!0&&e.props.sort(u),g(n)}};return d("th",w,v)}}}),ml=["horizontal","vertical","cell","none"],gl=ce({name:"QMarkupTable",props:{...bt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ml.includes(e)}},setup(e,{slots:l}){const r=ve(),b=yt(e,r.proxy.$q),s=_(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(b.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>d("div",{class:s.value},[d("table",{class:"q-table"},we(l.default))])}});function Mt(e,l){return d("div",e,[d("table",{class:"q-table"},l)])}const bl={list:Je,table:gl},yl=["list","table","__qtable"],_l=ce({name:"QVirtualScroll",props:{...il,type:{type:String,default:"list",validator:e=>yl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Jt},setup(e,{slots:l,attrs:r}){let b;const s=T(null),g=_(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:v,padVirtualScroll:m,onVirtualScrollEvt:w}=ul({virtualScrollLength:g,getVirtualScrollTarget:x,getVirtualScrollEl:S}),n=_(()=>{if(g.value===0)return[];const L=(V,F)=>({index:u.value.from+F,item:V});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(L):e.itemsFn(u.value.from,u.value.to-u.value.from).map(L)}),p=_(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),R=_(()=>e.scrollTarget!==void 0?{}:{tabindex:0});se(g,()=>{v()}),se(()=>e.scrollTarget,()=>{k(),q()});function S(){return s.value.$el||s.value}function x(){return b}function q(){b=Xt(S(),e.scrollTarget),b.addEventListener("scroll",w,kt.passive)}function k(){b!==void 0&&(b.removeEventListener("scroll",w,kt.passive),b=void 0)}function E(){let L=m(e.type==="list"?"div":"tbody",n.value.map(l.default));return l.before!==void 0&&(L=l.before().concat(L)),Ot(l.after,L)}return Bt(()=>{v()}),Ze(()=>{q()}),$t(()=>{q()}),It(()=>{k()}),Nt(()=>{k()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Mt({ref:s,class:"q-table__middle "+p.value},E()):d(bl[e.type],{...r,ref:s,class:[r.class,p.value],...R.value},E)}}}),Sl={xs:2,sm:4,md:6,lg:10,xl:14};function xt(e,l,r){return{transform:l===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const pl=ce({name:"QLinearProgress",props:{...bt,...Zt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:r}=ve(),b=yt(e,r.$q),s=Yt(e,Sl),g=_(()=>e.indeterminate===!0||e.query===!0),u=_(()=>e.reverse!==e.query),v=_(()=>({...s.value!==null?s.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=_(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),w=_(()=>xt(e.buffer!==void 0?e.buffer:1,u.value,r.$q)),n=_(()=>`with${e.instantFeedback===!0?"out":""}-transition`),p=_(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${n.value} q-linear-progress__track--${b.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),R=_(()=>xt(g.value===!0?1:e.value,u.value,r.$q)),S=_(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${n.value} q-linear-progress__model--${g.value===!0?"in":""}determinate`),x=_(()=>({width:`${e.value*100}%`})),q=_(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${n.value}`);return()=>{const k=[d("div",{class:p.value,style:w.value}),d("div",{class:S.value,style:R.value})];return e.stripe===!0&&g.value===!1&&k.push(d("div",{class:q.value,style:x.value})),d("div",{class:m.value,style:v.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ot(l.default,k))}}});let Ee=0;const wl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},kl=["update:fullscreen","fullscreen"];function hl(){const e=ve(),{props:l,emit:r,proxy:b}=e;let s,g,u;const v=T(!1);el(e)===!0&&se(()=>b.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&n()}),se(()=>l.fullscreen,p=>{v.value!==p&&m()}),se(v,p=>{r("update:fullscreen",p),r("fullscreen",p)});function m(){v.value===!0?n():w()}function w(){v.value!==!0&&(v.value=!0,u=b.$el.parentNode,u.replaceChild(g,b.$el),document.body.appendChild(b.$el),Ee++,Ee===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:n},ht.add(s))}function n(){v.value===!0&&(s!==void 0&&(ht.remove(s),s=void 0),u.replaceChild(b.$el,g),v.value=!1,Ee=Math.max(0,Ee-1),Ee===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),b.$el.scrollIntoView!==void 0&&setTimeout(()=>{b.$el.scrollIntoView()})))}return Bt(()=>{g=document.createElement("span")}),Ze(()=>{l.fullscreen===!0&&w()}),Nt(n),Object.assign(b,{toggleFullscreen:m,setFullscreen:w,exitFullscreen:n}),{inFullscreen:v,toggleFullscreen:m}}function Cl(e,l){return new Date(e)-new Date(l)}const ql={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Pl(e,l,r,b){const s=_(()=>{const{sortBy:v}=l.value;return v&&r.value.find(m=>m.name===v)||null}),g=_(()=>e.sortMethod!==void 0?e.sortMethod:(v,m,w)=>{const n=r.value.find(S=>S.name===m);if(n===void 0||n.field===void 0)return v;const p=w===!0?-1:1,R=typeof n.field=="function"?S=>n.field(S):S=>S[n.field];return v.sort((S,x)=>{let q=R(S),k=R(x);return n.rawSort!==void 0?n.rawSort(q,k,S,x)*p:q==null?-1*p:k==null?1*p:n.sort!==void 0?n.sort(q,k,S,x)*p:mt(q)===!0&&mt(k)===!0?(q-k)*p:Ct(q)===!0&&Ct(k)===!0?Cl(q,k)*p:typeof q=="boolean"&&typeof k=="boolean"?(q-k)*p:([q,k]=[q,k].map(E=>(E+"").toLocaleString().toLowerCase()),q<k?-1*p:q===k?0:p)})});function u(v){let m=e.columnSortOrder;if(tl(v)===!0)v.sortOrder&&(m=v.sortOrder),v=v.name;else{const p=r.value.find(R=>R.name===v);p?.sortOrder&&(m=p.sortOrder)}let{sortBy:w,descending:n}=l.value;w!==v?(w=v,n=m==="da"):e.binaryStateSort===!0?n=!n:n===!0?m==="ad"?w=null:n=!1:m==="ad"?n=!0:w=null,b({sortBy:w,descending:n,page:1})}return{columnToSort:s,computedSortMethod:g,sort:u}}const xl={filter:[String,Object],filterMethod:Function};function Tl(e,l){const r=_(()=>e.filterMethod!==void 0?e.filterMethod:(b,s,g,u)=>{const v=s?s.toLowerCase():"";return b.filter(m=>g.some(w=>{const n=u(w,m)+"";return(n==="undefined"||n==="null"?"":n.toLowerCase()).indexOf(v)!==-1}))});return se(()=>e.filter,()=>{_t(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:r}}function Vl(e,l){for(const r in l)if(l[r]!==e[r])return!1;return!0}function Tt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Fl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Rl(e,l){const{props:r,emit:b}=e,s=T(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:r.rowsPerPageOptions.length!==0?r.rowsPerPageOptions[0]:5},r.pagination)),g=_(()=>{const n=r["onUpdate:pagination"]!==void 0?{...s.value,...r.pagination}:s.value;return Tt(n)}),u=_(()=>g.value.rowsNumber!==void 0);function v(n){m({pagination:n,filter:r.filter})}function m(n={}){_t(()=>{b("request",{pagination:n.pagination||g.value,filter:n.filter||r.filter,getCellValue:l})})}function w(n,p){const R=Tt({...g.value,...n});if(Vl(g.value,R)===!0){u.value===!0&&p===!0&&v(R);return}if(u.value===!0){v(R);return}r.pagination!==void 0&&r["onUpdate:pagination"]!==void 0?b("update:pagination",R):s.value=R}return{innerPagination:s,computedPagination:g,isServerSide:u,requestServerInteraction:m,setPagination:w}}function Dl(e,l,r,b,s,g){const{props:u,emit:v,proxy:{$q:m}}=e,w=_(()=>b.value===!0?r.value.rowsNumber||0:g.value),n=_(()=>{const{page:F,rowsPerPage:B}=r.value;return(F-1)*B}),p=_(()=>{const{page:F,rowsPerPage:B}=r.value;return F*B}),R=_(()=>r.value.page===1),S=_(()=>r.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/r.value.rowsPerPage))),x=_(()=>p.value===0?!0:r.value.page>=S.value),q=_(()=>(u.rowsPerPageOptions.includes(l.value.rowsPerPage)?u.rowsPerPageOptions:[l.value.rowsPerPage].concat(u.rowsPerPageOptions)).map(B=>({label:B===0?m.lang.table.allRows:""+B,value:B})));se(S,(F,B)=>{if(F===B)return;const K=r.value.page;F&&!K?s({page:1}):F<K&&s({page:F})});function k(){s({page:1})}function E(){const{page:F}=r.value;F>1&&s({page:F-1})}function L(){const{page:F,rowsPerPage:B}=r.value;p.value>0&&F*B<w.value&&s({page:F+1})}function V(){s({page:S.value})}return u["onUpdate:pagination"]!==void 0&&v("update:pagination",{...r.value}),{firstRowIndex:n,lastRowIndex:p,isFirstPage:R,isLastPage:x,pagesNumber:S,computedRowsPerPageOptions:q,computedRowsNumber:w,firstPage:k,prevPage:E,nextPage:L,lastPage:V}}const Bl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},$l=["update:selected","selection"];function Il(e,l,r,b){const s=_(()=>{const x={};return e.selected.map(b.value).forEach(q=>{x[q]=!0}),x}),g=_(()=>e.selection!=="none"),u=_(()=>e.selection==="single"),v=_(()=>e.selection==="multiple"),m=_(()=>r.value.length!==0&&r.value.every(x=>s.value[b.value(x)]===!0)),w=_(()=>m.value!==!0&&r.value.some(x=>s.value[b.value(x)]===!0)),n=_(()=>e.selected.length);function p(x){return s.value[x]===!0}function R(){l("update:selected",[])}function S(x,q,k,E){l("selection",{rows:q,added:k,keys:x,evt:E});const L=u.value===!0?k===!0?q:[]:k===!0?e.selected.concat(q):e.selected.filter(V=>x.includes(b.value(V))===!1);l("update:selected",L)}return{hasSelectionMode:g,singleSelection:u,multipleSelection:v,allRowsSelected:m,someRowsSelected:w,rowsSelectedNumber:n,isRowSelected:p,clearSelection:R,updateSelection:S}}function Vt(e){return Array.isArray(e)?e.slice():[]}const Nl={expanded:Array},Ol=["update:expanded"];function El(e,l){const r=T(Vt(e.expanded));se(()=>e.expanded,u=>{r.value=Vt(u)});function b(u){return r.value.includes(u)}function s(u){e.expanded!==void 0?l("update:expanded",u):r.value=u}function g(u,v){const m=r.value.slice(),w=m.indexOf(u);v===!0?w===-1&&(m.push(u),s(m)):w!==-1&&(m.splice(w,1),s(m))}return{isRowExpanded:b,setExpanded:s,updateExpanded:g}}const Ml={visibleColumns:Array};function Al(e,l,r){const b=_(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(m=>({name:m,label:m.toUpperCase(),field:m,align:mt(v[m])?"right":"left",sortable:!0})):[]}),s=_(()=>{const{sortBy:v,descending:m}=l.value;return(e.visibleColumns!==void 0?b.value.filter(n=>n.required===!0||e.visibleColumns.includes(n.name)===!0):b.value).map(n=>{const p=n.align||"right",R=`text-${p}`;return{...n,align:p,__iconClass:`q-table__sort-icon q-table__sort-icon--${p}`,__thClass:R+(n.headerClasses!==void 0?" "+n.headerClasses:"")+(n.sortable===!0?" sortable":"")+(n.name===v?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:n.style!==void 0?typeof n.style!="function"?()=>n.style:n.style:()=>null,__tdClass:n.classes!==void 0?typeof n.classes!="function"?()=>R+" "+n.classes:S=>R+" "+n.classes(S):()=>R}})}),g=_(()=>{const v={};return s.value.forEach(m=>{v[m.name]=m}),v}),u=_(()=>e.tableColspan!==void 0?e.tableColspan:s.value.length+(r.value===!0?1:0));return{colList:b,computedCols:s,computedColsMap:g,computedColspan:u}}const We="q-table__bottom row items-center",At={};Et.forEach(e=>{At[e]={}});const Ft=ce({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...At,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...bt,...wl,...Ml,...xl,...Fl,...Nl,...Bl,...ql},emits:["request","virtualScroll",...kl,...Ol,...$l],setup(e,{slots:l,emit:r}){const b=ve(),{proxy:{$q:s}}=b,g=yt(e,s),{inFullscreen:u,toggleFullscreen:v}=hl(),m=_(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),w=T(null),n=T(null),p=_(()=>e.grid!==!0&&e.virtualScroll===!0),R=_(()=>" q-table__card"+(g.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),S=_(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":R.value)+(g.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(u.value===!0?" fullscreen scroll":"")),x=_(()=>S.value+(e.loading===!0?" q-table--loading":""));se(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+S.value,()=>{p.value===!0&&n.value?.reset()});const{innerPagination:q,computedPagination:k,isServerSide:E,requestServerInteraction:L,setPagination:V}=Rl(b,re),{computedFilterMethod:F}=Tl(e,V),{isRowExpanded:B,setExpanded:K,updateExpanded:W}=El(e,r),ae=_(()=>{let t=e.rows;if(E.value===!0||t.length===0)return t;const{sortBy:c,descending:h}=k.value;return e.filter&&(t=F.value(t,e.filter,U.value,re)),Ce.value!==null&&(t=Q.value(e.rows===t?t.slice():t,c,h)),t}),fe=_(()=>ae.value.length),D=_(()=>{let t=ae.value;if(E.value===!0)return t;const{rowsPerPage:c}=k.value;return c!==0&&(ge.value===0&&e.rows!==t?t.length>be.value&&(t=t.slice(0,be.value)):t=t.slice(ge.value,be.value)),t}),{hasSelectionMode:Z,singleSelection:G,multipleSelection:Y,allRowsSelected:ne,someRowsSelected:H,rowsSelectedNumber:ke,isRowSelected:he,clearSelection:Ye,updateSelection:me}=Il(e,r,D,m),{colList:et,computedCols:U,computedColsMap:Ae,computedColspan:Le}=Al(e,k,Z),{columnToSort:Ce,computedSortMethod:Q,sort:qe}=Pl(e,k,et,V),{firstRowIndex:ge,lastRowIndex:be,isFirstPage:ie,isLastPage:Pe,pagesNumber:ye,computedRowsPerPageOptions:Qe,computedRowsNumber:_e,firstPage:xe,prevPage:Te,nextPage:ue,lastPage:Ve}=Dl(b,q,k,E,V,fe),tt=_(()=>D.value.length===0),je=_(()=>{const t={};return Et.forEach(c=>{t[c]=e[c]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function lt(){p.value===!0&&n.value.reset()}function at(){if(e.grid===!0)return Kt();const t=e.hideHeader!==!0?pt:null;if(p.value===!0){const h=l["top-row"],C=l["bottom-row"],P={default:O=>Ue(O.item,l.body,O.index)};if(h!==void 0){const O=d("tbody",h({cols:U.value}));P.before=t===null?()=>O:()=>[t()].concat(O)}else t!==null&&(P.before=t);return C!==void 0&&(P.after=()=>d("tbody",C({cols:U.value}))),d(_l,{ref:n,class:e.tableClass,style:e.tableStyle,...je.value,scrollTarget:e.virtualScrollTarget,items:D.value,type:"__qtable",tableColspan:Le.value,onVirtualScroll:Fe},P)}const c=[ot()];return t!==null&&c.unshift(t()),Mt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},c)}function nt(t,c){if(n.value!==null){n.value.scrollTo(t,c);return}t=parseInt(t,10);const h=w.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(h!==null){const C=w.value.querySelector(".q-table__middle.scroll"),P=h.offsetTop-e.virtualScrollStickySizeStart,O=P<C.scrollTop?"decrease":"increase";C.scrollTop=P,r("virtualScroll",{index:t,from:0,to:q.value.rowsPerPage-1,direction:O})}}function Fe(t){r("virtualScroll",t)}function Re(){return[d(pl,{class:"q-table__linear-progress",color:e.color,dark:g.value,indeterminate:!0,trackColor:"transparent"})]}function Ue(t,c,h){const C=m.value(t),P=he(C);if(c!==void 0){const N={key:C,row:t,pageIndex:h,__trClass:P?"selected":""};if(e.tableRowStyleFn!==void 0&&(N.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const de=e.tableRowClassFn(t);de&&(N.__trClass=`${de} ${N.__trClass}`)}return c(f(N))}const O=l["body-cell"],I=U.value.map(N=>{const de=l[`body-cell-${N.name}`],He=de!==void 0?de:O;return He!==void 0?He(i({key:C,row:t,pageIndex:h,col:N})):d("td",{class:N.__tdClass(t),style:N.__tdStyle(t)},re(N,t))});if(Z.value===!0){const N=l["body-selection"],de=N!==void 0?N(a({key:C,row:t,pageIndex:h})):[d(rt,{modelValue:P,color:e.color,dark:g.value,dense:e.dense,"onUpdate:modelValue":(He,Wt)=>{me([C],[t],He,Wt)}})];I.unshift(d("td",{class:"q-table--col-auto-width"},de))}const J={key:C,class:{selected:P}};if(e.onRowClick!==void 0&&(J.class["cursor-pointer"]=!0,J.onClick=N=>{r("rowClick",N,t,h)}),e.onRowDblclick!==void 0&&(J.class["cursor-pointer"]=!0,J.onDblclick=N=>{r("rowDblclick",N,t,h)}),e.onRowContextmenu!==void 0&&(J.class["cursor-pointer"]=!0,J.onContextmenu=N=>{r("rowContextmenu",N,t,h)}),e.tableRowStyleFn!==void 0&&(J.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const N=e.tableRowClassFn(t);N&&(J.class[N]=!0)}return d("tr",J,I)}function ot(){const t=l.body,c=l["top-row"],h=l["bottom-row"];let C=D.value.map((P,O)=>Ue(P,t,O));return c!==void 0&&(C=c({cols:U.value}).concat(C)),h!==void 0&&(C=C.concat(h({cols:U.value}))),d("tbody",C)}function f(t){return j(t),t.cols=t.cols.map(c=>De({...c},"value",()=>re(c,t.row))),t}function i(t){return j(t),De(t,"value",()=>re(t.col,t.row)),t}function a(t){return j(t),t}function j(t){Object.assign(t,{cols:U.value,colsMap:Ae.value,sort:qe,rowIndex:ge.value+t.pageIndex,color:e.color,dark:g.value,dense:e.dense}),Z.value===!0&&De(t,"selected",()=>he(t.key),(c,h)=>{me([t.key],[t.row],c,h)}),De(t,"expand",()=>B(t.key),c=>{W(t.key,c)})}function re(t,c){const h=typeof t.field=="function"?t.field(c):c[t.field];return t.format!==void 0?t.format(h,c):h}const Se=_(()=>({pagination:k.value,pagesNumber:ye.value,isFirstPage:ie.value,isLastPage:Pe.value,firstPage:xe,prevPage:Te,nextPage:ue,lastPage:Ve,inFullscreen:u.value,toggleFullscreen:v}));function Lt(){const t=l.top,c=l["top-left"],h=l["top-right"],C=l["top-selection"],P=Z.value===!0&&C!==void 0&&ke.value>0,O="q-table__top relative-position row items-center";if(t!==void 0)return d("div",{class:O},[t(Se.value)]);let I;if(P===!0?I=C(Se.value).slice():(I=[],c!==void 0?I.push(d("div",{class:"q-table__control"},[c(Se.value)])):e.title&&I.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),h!==void 0&&(I.push(d("div",{class:"q-table__separator col"})),I.push(d("div",{class:"q-table__control"},[h(Se.value)]))),I.length!==0)return d("div",{class:O},I)}const St=_(()=>H.value===!0?null:ne.value);function pt(){const t=Qt();return e.loading===!0&&l.loading===void 0&&t.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:Le.value},Re())])),d("thead",t)}function Qt(){const t=l.header,c=l["header-cell"];if(t!==void 0)return t(st({header:!0})).slice();const h=U.value.map(C=>{const P=l[`header-cell-${C.name}`],O=P!==void 0?P:c,I=st({col:C});return O!==void 0?O(I):d(fl,{key:C.name,props:I},()=>C.label)});if(G.value===!0&&e.grid!==!0)h.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(Y.value===!0){const C=l["header-selection"],P=C!==void 0?C(st({})):[d(rt,{color:e.color,modelValue:St.value,dark:g.value,dense:e.dense,"onUpdate:modelValue":wt})];h.unshift(d("th",{class:"q-table--col-auto-width"},P))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},h)]}function st(t){return Object.assign(t,{cols:U.value,sort:qe,colsMap:Ae.value,color:e.color,dark:g.value,dense:e.dense}),Y.value===!0&&De(t,"selected",()=>St.value,wt),t}function wt(t){H.value===!0&&(t=!1),me(D.value.map(m.value),D.value,t)}const ze=_(()=>{const t=[e.iconFirstPage||s.iconSet.table.firstPage,e.iconPrevPage||s.iconSet.table.prevPage,e.iconNextPage||s.iconSet.table.nextPage,e.iconLastPage||s.iconSet.table.lastPage];return s.lang.rtl===!0?t.reverse():t});function jt(){if(e.hideBottom===!0)return;if(tt.value===!0){if(e.hideNoData===!0)return;const h=e.loading===!0?e.loadingLabel||s.lang.table.loading:e.filter?e.noResultsLabel||s.lang.table.noResults:e.noDataLabel||s.lang.table.noData,C=l["no-data"],P=C!==void 0?[C({message:h,icon:s.iconSet.table.warning,filter:e.filter})]:[d(Dt,{class:"q-table__bottom-nodata-icon",name:s.iconSet.table.warning}),h];return d("div",{class:We+" q-table__bottom--nodata"},P)}const t=l.bottom;if(t!==void 0)return d("div",{class:We},[t(Se.value)]);const c=e.hideSelectedBanner!==!0&&Z.value===!0&&ke.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||s.lang.table.selectedRecords)(ke.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:We+" justify-end"},zt(c));if(c.length!==0)return d("div",{class:We},c)}function Ut(t){V({page:1,rowsPerPage:t.value})}function zt(t){let c;const{rowsPerPage:h}=k.value,C=e.paginationLabel||s.lang.table.pagination,P=l.pagination,O=e.rowsPerPageOptions.length>1;if(t.push(d("div",{class:"q-table__separator col"})),O===!0&&t.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||s.lang.table.recordsPerPage]),d(Xe,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:h,options:Qe.value,displayValue:h===0?s.lang.table.allRows:h,dark:g.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Ut})])),P!==void 0)c=P(Se.value);else if(c=[d("span",h!==0?{class:"q-table__bottom-item"}:{},[h?C(ge.value+1,Math.min(be.value,_e.value),_e.value):C(1,fe.value,_e.value)])],h!==0&&ye.value>1){const I={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(I.size="sm"),ye.value>2&&c.push(d($,{key:"pgFirst",...I,icon:ze.value[0],disable:ie.value,"aria-label":s.lang.pagination.first,onClick:xe})),c.push(d($,{key:"pgPrev",...I,icon:ze.value[1],disable:ie.value,"aria-label":s.lang.pagination.prev,onClick:Te}),d($,{key:"pgNext",...I,icon:ze.value[2],disable:Pe.value,"aria-label":s.lang.pagination.next,onClick:ue})),ye.value>2&&c.push(d($,{key:"pgLast",...I,icon:ze.value[3],disable:Pe.value,"aria-label":s.lang.pagination.last,onClick:Ve}))}return t.push(d("div",{class:"q-table__control"},c)),t}function Ht(){const t=e.gridHeader===!0?[d("table",{class:"q-table"},[pt()])]:e.loading===!0&&l.loading===void 0?Re():void 0;return d("div",{class:"q-table__middle"},t)}function Kt(){const t=l.item!==void 0?l.item:c=>{const h=c.cols.map(P=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[P.label]),d("div",{class:"q-table__grid-item-value"},[P.value])]));if(Z.value===!0){const P=l["body-selection"],O=P!==void 0?P(c):[d(rt,{modelValue:c.selected,color:e.color,dark:g.value,dense:e.dense,"onUpdate:modelValue":(I,J)=>{me([c.key],[c.row],I,J)}})];h.unshift(d("div",{class:"q-table__grid-item-row"},O),d(gt,{dark:g.value}))}const C={class:["q-table__grid-item-card"+R.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(C.style=[C.style,e.cardStyleFn(c.row)]),e.cardClassFn!==void 0){const P=e.cardClassFn(c.row);P&&(C.class[0]+=` ${P}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(C.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(C.onClick=P=>{r("RowClick",P,c.row,c.pageIndex)}),e.onRowDblclick!==void 0&&(C.onDblclick=P=>{r("RowDblclick",P,c.row,c.pageIndex)}),e.onRowContextmenu!==void 0&&(C.onContextmenu=P=>{r("rowContextmenu",P,c.row,c.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(c.selected===!0?" q-table__grid-item--selected":"")},[d("div",C,h)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},D.value.map((c,h)=>t(f({key:m.value(c),row:c,pageIndex:h}))))}return Object.assign(b.proxy,{requestServerInteraction:L,setPagination:V,firstPage:xe,prevPage:Te,nextPage:ue,lastPage:Ve,isRowSelected:he,clearSelection:Ye,isRowExpanded:B,setExpanded:K,sort:qe,resetVirtualScroll:lt,scrollTo:nt,getCellValue:re}),ll(b.proxy,{filteredSortedRows:()=>ae.value,computedRows:()=>D.value,computedRowsNumber:()=>_e.value}),()=>{const t=[Lt()],c={ref:w,class:x.value};return e.grid===!0?t.push(Ht()):Object.assign(c,{class:[c.class,e.cardClass],style:e.cardStyle}),t.push(at(),jt()),e.loading===!0&&l.loading!==void 0&&t.push(l.loading()),d("div",c,t)}}}),Rt=ce({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:l,emit:r}){const b=ve(),s=T(null);let g=0;const u=[];function v(S){const x=typeof S=="boolean"?S:e.noErrorFocus!==!0,q=++g,k=(V,F)=>{r(`validation${V===!0?"Success":"Error"}`,F)},E=V=>{const F=V.validate();return typeof F.then=="function"?F.then(B=>({valid:B,comp:V}),B=>({valid:!1,comp:V,err:B})):Promise.resolve({valid:F,comp:V})};return(e.greedy===!0?Promise.all(u.map(E)).then(V=>V.filter(F=>F.valid!==!0)):u.reduce((V,F)=>V.then(()=>E(F).then(B=>{if(B.valid===!1)return Promise.reject(B)})),Promise.resolve()).catch(V=>[V])).then(V=>{if(V===void 0||V.length===0)return q===g&&k(!0),!0;if(q===g){const{comp:F,err:B}=V[0];if(B!==void 0&&console.error(B),k(!1,F),x===!0){const K=V.find(({comp:W})=>typeof W.focus=="function"&&al(W.$)===!1);K!==void 0&&K.comp.focus()}}return!1})}function m(){g++,u.forEach(S=>{typeof S.resetValidation=="function"&&S.resetValidation()})}function w(S){S!==void 0&&qt(S);const x=g+1;v().then(q=>{x===g&&q===!0&&(e.onSubmit!==void 0?r("submit",S):S?.target!==void 0&&typeof S.target.submit=="function"&&S.target.submit())})}function n(S){S!==void 0&&qt(S),r("reset"),_t(()=>{m(),e.autofocus===!0&&e.noResetFocus!==!0&&p()})}function p(){nl(()=>{if(s.value===null)return;(s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),x=>x.tabIndex!==-1))?.focus({preventScroll:!0})})}ol(sl,{bindComponent(S){u.push(S)},unbindComponent(S){const x=u.indexOf(S);x!==-1&&u.splice(x,1)}});let R=!1;return It(()=>{R=!0}),$t(()=>{R===!0&&e.autofocus===!0&&p()}),Ze(()=>{e.autofocus===!0&&p()}),Object.assign(b.proxy,{validate:v,resetValidation:m,submit:w,reset:n,focus:p,getValidationComponents:()=>u}),()=>d("form",{class:"q-form",ref:s,onSubmit:w,onReset:n},we(l.default))}}),Me="/api/ingredients",Ge={async getAll(){return(await Ie.get(Me)).data.ingredients||[]},async getById(e){return(await Ie.get(`${Me}/${e}`)).data},async create(e){return(await Ie.post(Me,e)).data},async update(e,l){return(await Ie.put(`${Me}/${e}`,l)).data},async delete(e){await Ie.delete(`${Me}/${e}`)}},Ll={class:"row items-center justify-between q-mb-sm"},Ql={key:0,class:"flex flex-center q-pa-md"},jl={key:2,class:"flex flex-center q-pa-md"},Ul={key:3},zl={class:"row q-gutter-sm q-mb-sm items-center"},Hl={key:1,class:"text-caption text-grey"},Kl={class:"row items-center justify-between q-mb-sm"},Wl={key:4,class:"flex flex-center q-pa-md"},Gl={class:"text-h6"},Jl={class:"row justify-end q-gutter-sm q-mt-sm"},Xl={class:"text-h6"},Zl={class:"row q-gutter-sm items-end"},Yl={key:1,class:"text-caption text-grey"},ea={class:"row q-gutter-sm items-end"},ta={key:3,class:"text-caption text-grey"},la={class:"row justify-end q-gutter-sm q-mt-sm"},ra={__name:"TemplatesPage",setup(e){const l=vl(),r=T([]),b=T(!1),s=T(!1),g=T(!1),u=T(!1),v=T(!1),m=T(!1),w=T(null),n=T([]),p=T(!1),R=T(!1),S=T(!1),x=T(!1),q=T(!1),k=T(!1),E=T(null),L=T(null),V=T([]),F=T(!1),B=T(!1),K=T(!1),W=T(""),ae=T(!1),fe=T(null),D=T({beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null,ingredients:[],fermentation_sub_tasks:[]}),Z=T(null),G=T(null),Y=T(null),ne=T(null),H=T(null),ke=_(()=>{const f=D.value.ingredients.map(i=>i.ingredient_id);return n.value.filter(i=>!f.includes(i.ingredient_id))}),he=_(()=>V.value.map(f=>f.sub_task_name)),Ye=f=>n.value.find(a=>a.ingredient_id===f)?.ingredient_name||"Unknown",me=()=>{G.value&&Y.value&&(D.value.ingredients.push({ingredient_id:G.value.ingredient_id,quantity:Y.value,units:G.value.units}),G.value=null,Y.value=null)},et=f=>{D.value.ingredients.splice(f,1)},U=()=>{G.value=null,Y.value=null},Ae=()=>{ne.value&&H.value!==null&&H.value!==""&&(D.value.fermentation_sub_tasks.push({sub_task_name:ne.value,day:H.value}),ne.value=null,H.value=null)},Le=f=>{D.value.fermentation_sub_tasks.splice(f,1)},Ce=()=>{ne.value=null,H.value=null},Q=T({ingredient_name:"",supplier:"",units:"kg",order_lead_days:null}),qe=["kg","g","L"],ge=[{name:"beer_name",label:"Beer Name",field:"beer_name",align:"left",sortable:!0},{name:"volume_hl",label:"Volume (hl)",field:"volume_hl",align:"center",sortable:!0},{name:"min_fermentation_days",label:"Fermentation (days)",field:"min_fermentation_days",align:"center",sortable:!0},{name:"min_maturation_days",label:"Maturation (days)",field:"min_maturation_days",align:"center",sortable:!0},{name:"actions",label:"Actions",field:"actions",align:"center"}],be=[{name:"ingredient_name",label:"Ingredient Name",field:"ingredient_name",align:"left",sortable:!0},{name:"supplier",label:"Supplier",field:"supplier",align:"left",sortable:!0},{name:"units",label:"Units",field:"units",align:"center",sortable:!0},{name:"order_lead_days",label:"Lead Days",field:"order_lead_days",align:"center",sortable:!0},{name:"actions",label:"Actions",field:"actions",align:"center"}],ie=async()=>{b.value=!0;try{r.value=await Ke.getAll()}catch(f){l.notify({type:"negative",message:"Failed to load beer templates",caption:f.response?.data?.message||f.message})}finally{b.value=!1}},Pe=()=>{m.value=!1,Z.value=null,D.value={beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null,ingredients:[],fermentation_sub_tasks:[]},U(),Ce(),u.value=!0},ye=f=>{m.value=!0,Z.value=f.beer_template_id,D.value={beer_name:f.beer_name,volume_hl:f.volume_hl,min_fermentation_days:f.min_fermentation_days,min_maturation_days:f.min_maturation_days,ingredients:f.ingredients||[],fermentation_sub_tasks:f.fermentation_sub_tasks||[]},U(),Ce(),u.value=!0},Qe=()=>{u.value=!1,D.value={beer_name:"",volume_hl:null,min_fermentation_days:null,min_maturation_days:null,ingredients:[],fermentation_sub_tasks:[]},U(),Ce()},_e=async()=>{s.value=!0;try{if(m.value)await Ke.update(Z.value,D.value),l.notify({type:"positive",message:"Template updated successfully"});else{const f={...D.value,beer_template_id:dl()};await Ke.create(f),l.notify({type:"positive",message:"Template created successfully"})}Qe(),await ie()}catch(f){l.notify({type:"negative",message:`Failed to ${m.value?"update":"create"} template`,caption:f.response?.data?.message||f.message})}finally{s.value=!1}},xe=f=>{w.value=f,v.value=!0},Te=async()=>{g.value=!0;try{await Ke.delete(w.value.beer_template_id),l.notify({type:"positive",message:"Template deleted successfully"}),v.value=!1,await ie()}catch(f){l.notify({type:"negative",message:"Failed to delete template",caption:f.response?.data?.message||f.message})}finally{g.value=!1}},ue=async()=>{p.value=!0;try{n.value=await Ge.getAll()}catch(f){l.notify({type:"negative",message:"Failed to load ingredients",caption:f.response?.data?.message||f.message})}finally{p.value=!1}},Ve=()=>{k.value=!1,L.value=null,Q.value={ingredient_name:"",supplier:"",units:"kg",order_lead_days:null},x.value=!0},tt=f=>{k.value=!0,L.value=f.ingredient_id,Q.value={ingredient_name:f.ingredient_name,supplier:f.supplier||"",units:f.units||"kg",order_lead_days:f.order_lead_days??null},x.value=!0},je=()=>{x.value=!1,Q.value={ingredient_name:"",supplier:"",units:"kg",order_lead_days:null}},lt=async()=>{R.value=!0;try{k.value?(await Ge.update(L.value,Q.value),l.notify({type:"positive",message:"Ingredient updated successfully"})):(await Ge.create(Q.value),l.notify({type:"positive",message:"Ingredient created successfully"})),je(),await ue()}catch(f){l.notify({type:"negative",message:`Failed to ${k.value?"update":"create"} ingredient`,caption:f.response?.data?.message||f.message})}finally{R.value=!1}},at=f=>{E.value=f,q.value=!0},nt=async()=>{S.value=!0;try{await Ge.delete(E.value.ingredient_id),l.notify({type:"positive",message:"Ingredient deleted successfully"}),q.value=!1,await ue()}catch(f){l.notify({type:"negative",message:"Failed to delete ingredient",caption:f.response?.data?.message||f.message})}finally{S.value=!1}},Fe=async()=>{F.value=!0;try{V.value=await vt.getAll()}catch(f){l.notify({type:"negative",message:"Failed to load fermentation sub tasks",caption:f.response?.data?.message||f.message})}finally{F.value=!1}},Re=async()=>{if(W.value?.trim()){B.value=!0;try{await vt.create(W.value.trim()),l.notify({type:"positive",message:"Fermentation sub task added successfully"}),W.value="",await Fe()}catch(f){const i=f.response?.status===409?"Fermentation sub task already exists":"Failed to add fermentation sub task";l.notify({type:"negative",message:i,caption:f.response?.data?.message||f.message})}finally{B.value=!1}}},Ue=f=>{fe.value=f,ae.value=!0},ot=async()=>{K.value=!0;try{await vt.delete(fe.value.sub_task_name),l.notify({type:"positive",message:"Fermentation sub task deleted successfully"}),ae.value=!1,await Fe()}catch(f){l.notify({type:"negative",message:"Failed to delete fermentation sub task",caption:f.response?.data?.message||f.message})}finally{K.value=!1}};return Ze(()=>{ie(),ue(),Fe()}),(f,i)=>(M(),oe(cl,{class:"q-pa-sm"},{default:y(()=>[A("div",Ll,[i[21]||(i[21]=A("div",{class:"text-h6"},"Ingredients",-1)),o($,{color:"primary",icon:"add",label:"New Ingredient",dense:"",size:"sm",onClick:Ve})]),p.value?(M(),ee("div",Ql,[o(it,{size:"md",color:"primary"})])):(M(),oe(Ft,{key:1,rows:n.value,columns:be,"row-key":"ingredient_id",pagination:{rowsPerPage:10},flat:"",bordered:"",dense:""},{"body-cell-actions":y(a=>[o(Pt,{props:a},{default:y(()=>[o($,{flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:j=>tt(a.row)},{default:y(()=>[o(Ne,null,{default:y(()=>[...i[22]||(i[22]=[z("Edit",-1)])]),_:1})]),_:1},8,["onClick"]),o($,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:j=>at(a.row)},{default:y(()=>[o(Ne,null,{default:y(()=>[...i[23]||(i[23]=[z("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])),o(gt,{class:"q-my-md"}),i[33]||(i[33]=A("div",{class:"row items-center justify-between q-mb-sm"},[A("div",{class:"text-h6"},"Fermentation Sub Tasks")],-1)),F.value?(M(),ee("div",jl,[o(it,{size:"md",color:"primary"})])):(M(),ee("div",Ul,[A("div",zl,[o(te,{modelValue:W.value,"onUpdate:modelValue":i[0]||(i[0]=a=>W.value=a),label:"New Fermentation Sub Task",outlined:"",dense:"",class:"col",onKeyup:rl(Re,["enter"])},null,8,["modelValue"]),o($,{icon:"add",color:"primary",dense:"",disable:!W.value?.trim(),loading:B.value,onClick:Re},null,8,["disable","loading"])]),V.value.length>0?(M(),oe(Je,{key:0,bordered:"",separator:"",dense:"",class:"rounded-borders"},{default:y(()=>[(M(!0),ee(ut,null,dt(V.value,a=>(M(),oe(ft,{key:a.sub_task_name,dense:""},{default:y(()=>[o(pe,null,{default:y(()=>[o(Oe,null,{default:y(()=>[z(X(a.sub_task_name),1)]),_:2},1024)]),_:2},1024),o(pe,{side:""},{default:y(()=>[o($,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:j=>Ue(a)},{default:y(()=>[o(Ne,null,{default:y(()=>[...i[24]||(i[24]=[z("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(M(),ee("div",Hl,"No fermentation sub tasks defined"))])),o(Be,{modelValue:ae.value,"onUpdate:modelValue":i[2]||(i[2]=a=>ae.value=a),persistent:""},{default:y(()=>[o($e,null,{default:y(()=>[o(le,null,{default:y(()=>[...i[25]||(i[25]=[A("div",{class:"text-h6"},"Confirm Delete",-1)])]),_:1}),o(le,{class:"q-pt-none"},{default:y(()=>[z(' Are you sure you want to delete the fermentation sub task "'+X(fe.value?.sub_task_name)+'"? ',1)]),_:1}),o(ct,{align:"right"},{default:y(()=>[o($,{flat:"",label:"Cancel",color:"primary",onClick:i[1]||(i[1]=a=>ae.value=!1)}),o($,{flat:"",label:"Delete",color:"negative",loading:K.value,onClick:ot},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(gt,{class:"q-my-md"}),A("div",Kl,[i[26]||(i[26]=A("div",{class:"text-h6"},"Beer Templates",-1)),o($,{color:"primary",icon:"add",label:"New Template",dense:"",size:"sm",onClick:Pe})]),b.value?(M(),ee("div",Wl,[o(it,{size:"md",color:"primary"})])):(M(),oe(Ft,{key:5,rows:r.value,columns:ge,"row-key":"beer_template_id",pagination:{rowsPerPage:10},flat:"",bordered:"",dense:""},{"body-cell-actions":y(a=>[o(Pt,{props:a},{default:y(()=>[o($,{flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:j=>ye(a.row)},{default:y(()=>[o(Ne,null,{default:y(()=>[...i[27]||(i[27]=[z("Edit",-1)])]),_:1})]),_:1},8,["onClick"]),o($,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:j=>xe(a.row)},{default:y(()=>[o(Ne,null,{default:y(()=>[...i[28]||(i[28]=[z("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])),o(Be,{modelValue:x.value,"onUpdate:modelValue":i[7]||(i[7]=a=>x.value=a),persistent:""},{default:y(()=>[o($e,{style:{"min-width":"350px"}},{default:y(()=>[o(le,{class:"q-pb-none"},{default:y(()=>[A("div",Gl,X(k.value?"Edit":"Create")+" Ingredient",1)]),_:1}),o(le,null,{default:y(()=>[o(Rt,{onSubmit:lt,class:"q-gutter-sm"},{default:y(()=>[o(te,{modelValue:Q.value.ingredient_name,"onUpdate:modelValue":i[3]||(i[3]=a=>Q.value.ingredient_name=a),label:"Ingredient Name *",outlined:"",dense:"",rules:[a=>!!a||"Ingredient name is required"]},null,8,["modelValue","rules"]),o(te,{modelValue:Q.value.supplier,"onUpdate:modelValue":i[4]||(i[4]=a=>Q.value.supplier=a),label:"Supplier",outlined:"",dense:""},null,8,["modelValue"]),o(Xe,{modelValue:Q.value.units,"onUpdate:modelValue":i[5]||(i[5]=a=>Q.value.units=a),options:qe,label:"Default Units *",outlined:"",dense:"",rules:[a=>!!a||"Units are required"]},null,8,["modelValue","rules"]),o(te,{modelValue:Q.value.order_lead_days,"onUpdate:modelValue":i[6]||(i[6]=a=>Q.value.order_lead_days=a),modelModifiers:{number:!0},label:"Order Lead Days",type:"number",outlined:"",dense:"",rules:[a=>a===null||a===""||a>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),A("div",Jl,[o($,{flat:"",label:"Cancel",color:"primary",dense:"",onClick:je}),o($,{type:"submit",label:"Save",color:"primary",dense:"",loading:R.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Be,{modelValue:q.value,"onUpdate:modelValue":i[9]||(i[9]=a=>q.value=a),persistent:""},{default:y(()=>[o($e,null,{default:y(()=>[o(le,null,{default:y(()=>[...i[29]||(i[29]=[A("div",{class:"text-h6"},"Confirm Delete",-1)])]),_:1}),o(le,{class:"q-pt-none"},{default:y(()=>[z(' Are you sure you want to delete the ingredient "'+X(E.value?.ingredient_name)+'"? ',1)]),_:1}),o(ct,{align:"right"},{default:y(()=>[o($,{flat:"",label:"Cancel",color:"primary",onClick:i[8]||(i[8]=a=>q.value=!1)}),o($,{flat:"",label:"Delete",color:"negative",loading:S.value,onClick:nt},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Be,{modelValue:u.value,"onUpdate:modelValue":i[18]||(i[18]=a=>u.value=a),persistent:""},{default:y(()=>[o($e,{style:{"min-width":"400px"}},{default:y(()=>[o(le,{class:"q-pb-none"},{default:y(()=>[A("div",Xl,X(m.value?"Edit":"Create")+" Beer Template",1)]),_:1}),o(le,null,{default:y(()=>[o(Rt,{onSubmit:_e,class:"q-gutter-sm"},{default:y(()=>[o(te,{modelValue:D.value.beer_name,"onUpdate:modelValue":i[10]||(i[10]=a=>D.value.beer_name=a),label:"Beer Name *",outlined:"",dense:"",rules:[a=>!!a||"Beer name is required"]},null,8,["modelValue","rules"]),o(te,{modelValue:D.value.volume_hl,"onUpdate:modelValue":i[11]||(i[11]=a=>D.value.volume_hl=a),modelModifiers:{number:!0},label:"Volume (hectoliters) *",type:"number",outlined:"",dense:"",rules:[a=>a!==null&&a!==""||"Volume is required",a=>a>0||"Volume must be greater than 0"]},null,8,["modelValue","rules"]),o(te,{modelValue:D.value.min_fermentation_days,"onUpdate:modelValue":i[12]||(i[12]=a=>D.value.min_fermentation_days=a),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",dense:"",rules:[a=>a!==null&&a!==""||"Fermentation days is required",a=>a>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),o(te,{modelValue:D.value.min_maturation_days,"onUpdate:modelValue":i[13]||(i[13]=a=>D.value.min_maturation_days=a),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",dense:"",rules:[a=>a!==null&&a!==""||"Maturation days is required",a=>a>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i[30]||(i[30]=A("div",{class:"text-subtitle2 q-mt-sm"},"Ingredients",-1)),A("div",Zl,[o(Xe,{modelValue:G.value,"onUpdate:modelValue":i[14]||(i[14]=a=>G.value=a),options:ke.value,"option-label":"ingredient_name","option-value":"ingredient_id",label:"Ingredient",outlined:"",dense:"",class:"col",disable:n.value.length===0},null,8,["modelValue","options","disable"]),o(te,{modelValue:Y.value,"onUpdate:modelValue":i[15]||(i[15]=a=>Y.value=a),modelModifiers:{number:!0},label:"Qty",type:"number",outlined:"",dense:"",style:{width:"80px"},step:"0.1",suffix:G.value?.units},null,8,["modelValue","suffix"]),o($,{icon:"add",color:"primary",dense:"",round:"",size:"sm",disable:!G.value||!Y.value,onClick:me},null,8,["disable"])]),D.value.ingredients.length>0?(M(),oe(Je,{key:0,bordered:"",separator:"",dense:"",class:"rounded-borders"},{default:y(()=>[(M(!0),ee(ut,null,dt(D.value.ingredients,(a,j)=>(M(),oe(ft,{key:j,dense:""},{default:y(()=>[o(pe,null,{default:y(()=>[o(Oe,null,{default:y(()=>[z(X(Ye(a.ingredient_id)),1)]),_:2},1024),o(Oe,{caption:""},{default:y(()=>[z(X(a.quantity)+" "+X(a.units),1)]),_:2},1024)]),_:2},1024),o(pe,{side:""},{default:y(()=>[o($,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:re=>et(j)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(M(),ee("div",Yl,"No ingredients added")),i[31]||(i[31]=A("div",{class:"text-subtitle2 q-mt-sm"},"Fermentation Sub Tasks",-1)),A("div",ea,[o(Xe,{modelValue:ne.value,"onUpdate:modelValue":i[16]||(i[16]=a=>ne.value=a),options:he.value,label:"Sub Task",outlined:"",dense:"",class:"col",disable:V.value.length===0},null,8,["modelValue","options","disable"]),o(te,{modelValue:H.value,"onUpdate:modelValue":i[17]||(i[17]=a=>H.value=a),modelModifiers:{number:!0},label:"Day",type:"number",outlined:"",dense:"",style:{width:"70px"}},null,8,["modelValue"]),o($,{icon:"add",color:"primary",dense:"",round:"",size:"sm",disable:!ne.value||H.value===null||H.value==="",onClick:Ae},null,8,["disable"])]),D.value.fermentation_sub_tasks.length>0?(M(),oe(Je,{key:2,bordered:"",separator:"",dense:"",class:"rounded-borders"},{default:y(()=>[(M(!0),ee(ut,null,dt(D.value.fermentation_sub_tasks,(a,j)=>(M(),oe(ft,{key:j,dense:""},{default:y(()=>[o(pe,null,{default:y(()=>[o(Oe,null,{default:y(()=>[z(X(a.sub_task_name),1)]),_:2},1024),o(Oe,{caption:""},{default:y(()=>[z("Day "+X(a.day),1)]),_:2},1024)]),_:2},1024),o(pe,{side:""},{default:y(()=>[o($,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:re=>Le(j)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(M(),ee("div",ta,"No fermentation sub tasks added")),A("div",la,[o($,{flat:"",label:"Cancel",color:"primary",dense:"",onClick:Qe}),o($,{type:"submit",label:"Save",color:"primary",dense:"",loading:s.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Be,{modelValue:v.value,"onUpdate:modelValue":i[20]||(i[20]=a=>v.value=a),persistent:""},{default:y(()=>[o($e,null,{default:y(()=>[o(le,null,{default:y(()=>[...i[32]||(i[32]=[A("div",{class:"text-h6"},"Confirm Delete",-1)])]),_:1}),o(le,{class:"q-pt-none"},{default:y(()=>[z(' Are you sure you want to delete the template "'+X(w.value?.beer_name)+'"? ',1)]),_:1}),o(ct,{align:"right"},{default:y(()=>[o($,{flat:"",label:"Cancel",color:"primary",onClick:i[19]||(i[19]=a=>v.value=!1)}),o($,{flat:"",label:"Delete",color:"negative",loading:g.value,onClick:Te},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ra as default};
