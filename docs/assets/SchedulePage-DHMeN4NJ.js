import{c as at,n as P,h as C,R as Gt,C as kt,T as Xt,U as Zt,V as Jt,W as ea,X as ta,Y as bt,v as aa,Z as sa,r as w,_ as na,$ as oa,G as Ee,a0 as la,i as me,a1 as et,a2 as ia,A as ra,a3 as Z,a4 as da,a5 as ua,a6 as ca,a7 as ga,a8 as ma,o as ya,a as U,b as u,w as c,d as o,e as i,j as _,k as yt,f as B,l as p,Q as Me,g as Be,t as m,a9 as j,m as G,aa as X,ab as oe,ac as ze,ad as Le,ae as va,af as pa,ag as _a,ah as fa}from"./index-DIJRAPHd.js";import{Q as tt,a as ye,b as J,c as $,v as ha,d as wa,e as Ke,f as Ae,g as vt,h as pt}from"./v4-UqkDCbFW.js";import{Q as ka}from"./QSpace-B4llOntC.js";import{Q as ba}from"./QPage-BhtPeLNT.js";import{u as Da}from"./use-quasar-CDxzfuiy.js";const xa=["top","middle","bottom"],_t=at({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:s=>xa.includes(s)}},setup(s,{slots:l}){const f=P(()=>s.align!==void 0?{verticalAlign:s.align}:null),h=P(()=>{const D=s.outline===!0&&s.color||s.textColor;return`q-badge flex inline items-center no-wrap q-badge--${s.multiLine===!0?"multi":"single"}-line`+(s.outline===!0?" q-badge--outline":s.color!==void 0?` bg-${s.color}`:"")+(D!==void 0?` text-${D}`:"")+(s.floating===!0?" q-badge--floating":"")+(s.rounded===!0?" q-badge--rounded":"")+(s.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:h.value,style:f.value,role:"status","aria-label":s.label},Gt(l.default,s.label!==void 0?[s.label]:[]))}}),Sa=at({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(s,{slots:l,emit:f}){let h=!1,D,b,x=null,S=null,V,H;function W(){D?.(),D=null,h=!1,x!==null&&(clearTimeout(x),x=null),S!==null&&(clearTimeout(S),S=null),b?.removeEventListener("transitionend",V),V=null}function N(y,F,M){F!==void 0&&(y.style.height=`${F}px`),y.style.transition=`height ${s.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,D=M}function z(y,F){y.style.overflowY=null,y.style.height=null,y.style.transition=null,W(),F!==H&&f(F)}function ve(y,F){let M=0;b=y,h===!0?(W(),M=y.offsetHeight===y.scrollHeight?0:void 0):(H="hide",y.style.overflowY="hidden"),N(y,M,F),x=setTimeout(()=>{x=null,y.style.height=`${y.scrollHeight}px`,V=E=>{S=null,(Object(E)!==E||E.target===y)&&z(y,"show")},y.addEventListener("transitionend",V),S=setTimeout(V,s.duration*1.1)},100)}function pe(y,F){let M;b=y,h===!0?W():(H="show",y.style.overflowY="hidden",M=y.scrollHeight),N(y,M,F),x=setTimeout(()=>{x=null,y.style.height=0,V=E=>{S=null,(Object(E)!==E||E.target===y)&&z(y,"hide")},y.addEventListener("transitionend",V),S=setTimeout(V,s.duration*1.1)},100)}return kt(()=>{h===!0&&W()}),()=>C(Xt,{css:!1,appear:s.appear,onEnter:ve,onLeave:pe},l.default)}}),ge=Zt({}),qa=Object.keys(bt),ft=at({name:"QExpansionItem",props:{...bt,...ta,...ea,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Jt,"click","afterShow","afterHide"],setup(s,{slots:l,emit:f}){const{proxy:{$q:h}}=aa(),D=sa(s,h),b=w(s.modelValue!==null?s.modelValue:s.defaultOpened),x=w(null),S=na(),{show:V,hide:H,toggle:W}=oa({showing:b});let N,z;const ve=P(()=>`q-expansion-item q-item-type q-expansion-item--${b.value===!0?"expanded":"collapsed"} q-expansion-item--${s.popup===!0?"popup":"standard"}`),pe=P(()=>s.contentInsetLevel===void 0?null:{["padding"+(h.lang.rtl===!0?"Right":"Left")]:s.contentInsetLevel*56+"px"}),y=P(()=>s.disable!==!0&&(s.href!==void 0||s.to!==void 0&&s.to!==null&&s.to!=="")),F=P(()=>{const g={};return qa.forEach(O=>{g[O]=s[O]}),g}),M=P(()=>y.value===!0||s.expandIconToggle!==!0),E=P(()=>s.expandedIcon!==void 0&&b.value===!0?s.expandedIcon:s.expandIcon||h.iconSet.expansionItem[s.denseToggle===!0?"denseIcon":"icon"]),we=P(()=>s.disable!==!0&&(y.value===!0||s.expandIconToggle===!0)),K=P(()=>({expanded:b.value===!0,detailsId:S.value,toggle:W,show:V,hide:H})),ee=P(()=>{const g=s.toggleAriaLabel!==void 0?s.toggleAriaLabel:h.lang.label[b.value===!0?"collapse":"expand"](s.label);return{role:"button","aria-expanded":b.value===!0?"true":"false","aria-controls":S.value,"aria-label":g}});Ee(()=>s.group,g=>{z?.(),g!==void 0&&ae()});function Q(g){y.value!==!0&&W(g),f("click",g)}function de(g){g.keyCode===13&&te(g,!0)}function te(g,O){O!==!0&&g.qAvoidFocus!==!0&&x.value?.focus(),W(g),da(g)}function _e(){f("afterShow")}function ue(){f("afterHide")}function ae(){N===void 0&&(N=la()),b.value===!0&&(ge[s.group]=N);const g=Ee(b,A=>{A===!0?ge[s.group]=N:ge[s.group]===N&&delete ge[s.group]}),O=Ee(()=>ge[s.group],(A,Ue)=>{Ue===N&&A!==void 0&&A!==N&&H()});z=()=>{g(),O(),ge[s.group]===N&&delete ge[s.group],z=void 0}}function fe(){const g={class:[`q-focusable relative-position cursor-pointer${s.denseToggle===!0&&s.switchToggleSide===!0?" items-end":""}`,s.expandIconClass],side:s.switchToggleSide!==!0,avatar:s.switchToggleSide},O=[C(Z,{class:"q-expansion-item__toggle-icon"+(s.expandedIcon===void 0&&b.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:E.value})];return we.value===!0&&(Object.assign(g,{tabindex:0,...ee.value,onClick:te,onKeyup:de}),O.unshift(C("div",{ref:x,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),C(J,g,()=>O)}function he(){let g;return l.header!==void 0?g=[].concat(l.header(K.value)):(g=[C(J,()=>[C(ye,{lines:s.labelLines},()=>s.label||""),s.caption?C(ye,{lines:s.captionLines,caption:!0},()=>s.caption):null])],s.icon&&g[s.switchToggleSide===!0?"push":"unshift"](C(J,{side:s.switchToggleSide===!0,avatar:s.switchToggleSide!==!0},()=>C(Z,{name:s.icon})))),s.disable!==!0&&s.hideExpandIcon!==!0&&g[s.switchToggleSide===!0?"unshift":"push"](fe()),g}function L(){const g={ref:"item",style:s.headerStyle,class:s.headerClass,dark:D.value,disable:s.disable,dense:s.dense,insetLevel:s.headerInsetLevel};return M.value===!0&&(g.clickable=!0,g.onClick=Q,Object.assign(g,y.value===!0?F.value:ee.value)),C(tt,g,he)}function Qe(){return et(C("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:pe.value,id:S.value},ra(l.default)),[[ia,b.value]])}function ke(){const g=[L(),C(Sa,{duration:s.duration,onShow:_e,onHide:ue},Qe)];return s.expandSeparator===!0&&g.push(C(me,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:D.value}),C(me,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:D.value})),g}return s.group!==void 0&&ae(),kt(()=>{z?.()}),()=>C("div",{class:ve.value},[C("div",{class:"q-expansion-item__container relative-position"},ke())])}});function ht(s){if(s===!1)return 0;if(s===!0||s===void 0)return 1;const l=parseInt(s,10);return isNaN(l)?0:l}const wt=ua({name:"close-popup",beforeMount(s,{value:l}){const f={depth:ht(l),handler(h){f.depth!==0&&setTimeout(()=>{const D=ga(s);D!==void 0&&ma(D,h,f.depth)})},handlerKey(h){ca(h,13)===!0&&f.handler(h)}};s.__qclosepopup=f,s.addEventListener("click",f.handler),s.addEventListener("keyup",f.handlerKey)},updated(s,{value:l,oldValue:f}){l!==f&&(s.__qclosepopup.depth=ht(l))},beforeUnmount(s){const l=s.__qclosepopup;s.removeEventListener("click",l.handler),s.removeEventListener("keyup",l.handlerKey),delete s.__qclosepopup}}),Ce="/api/beers",le={async getAll(){return(await $.get(Ce)).data.beers||[]},async getById(s){return(await $.get(`${Ce}/${s}`)).data.beer},async create(s){const l={beer_template_id:s.beer_template_id,name:s.name,batch_id:s.batch_id,volume_hl:s.volume_hl,priority:s.priority,min_fermentation_days:s.min_fermentation_days,min_maturation_days:s.min_maturation_days,target_start_date:s.target_start_date,target_completion_date:s.target_completion_date};await $.post(Ce,l)},async update(s,l){const f={beer_id:l.beer_id,beer_template_id:l.beer_template_id||null,name:l.name,batch_id:l.batch_id||null,volume_hl:l.volume_hl,priority:l.priority,min_fermentation_days:l.min_fermentation_days,min_maturation_days:l.min_maturation_days||0,target_start_date:l.target_start_date||null,target_completion_date:l.target_completion_date||null,requires_canning:l.requires_canning||!1,tasks:l.tasks||[]};await $.put(`${Ce}/${s}`,f)},async delete(s){await $.delete(`${Ce}/${s}`)}},Ye="/api/canning-days",Ge={async getAll(){return((await $.get(Ye)).data.canning_days||[]).map(f=>f.canning_day)},async create(s){await $.post(Ye,{canning_day:s})},async delete(s){await $.delete(`${Ye}/${s}`)}},Xe="/api/non_working_days",Ze={async getAll(){return((await $.get(Xe)).data.non_working_days||[]).map(f=>f.non_working_day)},async create(s){await $.post(Xe,{non_working_day:s})},async delete(s){await $.delete(`${Xe}/${s}`)}},Pe="/api/tasks",Je={async getById(s){return(await $.get(`${Pe}/${s}`)).data.task},async create(s){const l=ha();return(await $.post(Pe,{task_id:l,...s,locked:!0})).data},async delete(s){await $.delete(`${Pe}/${s}`)},async adjustDuration(s,l){return(await $.put(`${Pe}/${s}/duration/${l}`)).data.tasks||[]}},Ta=(s,l)=>{const f=s.__vccOpts||s;for(const[h,D]of l)f[h]=D;return f},Ba={class:"row no-wrap",style:{height:"100%"}},Ca={class:"col-3 q-pa-md",style:{"border-right":"1px solid #e0e0e0","overflow-y":"auto"}},Ia={key:0,class:"flex flex-center q-pa-md"},$a={key:1},Va={class:"text-subtitle2 text-primary"},Fa={class:"text-caption"},Na={class:"row q-gutter-sm q-mb-md"},Ma={key:1,class:"canning-days-list q-mb-md"},La={key:2,class:"text-grey-6 text-center q-pa-sm"},Aa={class:"row q-gutter-sm q-mb-md"},Pa={key:3,class:"non-working-days-list q-mb-md"},Ea={key:4,class:"text-grey-6 text-center q-pa-sm"},Qa={class:"row items-center justify-between q-mb-md"},Ua={key:5,class:"flex flex-center q-pa-md"},Ha={class:"row items-center q-gutter-xs"},Wa={class:"row items-center justify-between q-mb-sm"},Oa={class:"beer-details"},Ra={class:"detail-row"},ja={class:"detail-row"},za={class:"detail-row"},Ka={class:"detail-row"},Ya={class:"detail-row"},Ga={class:"detail-row"},Xa={class:"detail-row"},Za={key:0,class:"q-mt-md"},Ja={class:"row items-center justify-between q-mb-sm"},es={class:"task-type-label"},ts={key:7,class:"text-center text-grey-7 q-pa-md"},as={class:"col-9 q-pa-md"},ss={class:"row items-center justify-between q-mb-md"},ns={class:"row items-center q-gutter-sm"},os={class:"text-h6"},ls={class:"schedule-table-container"},is={class:"schedule-table"},rs={class:"date-label"},ds=["onClick"],us={key:0,class:"task-info"},cs={class:"task-name"},gs={key:0,class:"batch-id"},ms={class:"task-type"},ys=["onClick"],vs={key:0,class:"task-info"},ps={class:"task-name"},_s={key:0,class:"batch-id"},fs={class:"task-type"},hs={class:"text-h6 text-negative"},ws={class:"text-subtitle1 q-mb-md"},ks={key:0,class:"q-mb-md"},bs={class:"text-weight-medium q-mb-sm"},Ds={key:1,class:"q-mb-md"},xs={class:"text-weight-medium q-mb-sm"},Ss={class:"text-body2 q-ml-md"},qs={key:2},Ts={class:"text-weight-medium q-mb-sm"},Bs={key:0,class:"q-mb-sm"},Cs={class:"beer-diagnostic-details"},Is={class:"row q-col-gutter-sm"},$s={class:"col-6"},Vs={class:"col-6"},Fs={class:"col-6"},Ns={class:"col-6"},Ms={class:"col-6"},Ls={key:0,class:"col-6"},As={key:1,class:"col-6"},Ps={key:2,class:"col-6"},Es={key:3,class:"col-6"},Qs={class:"q-mt-md text-caption text-grey-7"},Us={__name:"SchedulePage",setup(s){const l=Da(),f=w([]),h=w(null),D=w(""),b=w(null),x=w(null),S=w(2),V=w(null),H=w(null),W=w(null),N=w(null),z=w(null),ve=w(null),pe=w(null),y=w(null),F=w(!1),M=w(!1),E=w(!1),we=w(!1),K=w(new Date),ee=w([]),Q=w([]),de=w([]),te=w(null),_e=w(!1),ue=w([]),ae=w(null),fe=w(!1),he=w(!1),L=w(null),Qe=["F6","F5","F4","F3","F2","F1","B1","B2"];Ee(h,a=>{a?(b.value=a.min_fermentation_days,x.value=a.min_maturation_days):(b.value=null,x.value=null)});const ke=P(()=>ee.value.length===0?!1:ee.value.some(a=>{const t=a.tasks||[];return t.length===0?!0:!t.every(e=>e.locked)})),g=P(()=>{const a=new Date(K.value),t=new Date(K.value);return t.setDate(t.getDate()+29),`${a.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}),O=P(()=>{const a=[],t=new Date;t.setHours(0,0,0,0);for(let e=0;e<30;e++){const n=new Date(K.value);n.setDate(n.getDate()+e),n.setHours(0,0,0,0);const r=A(n),d=n.getTime()===t.getTime(),k=n.getDay()===0||n.getDay()===6,se=Ue(n)||ue.value.includes(r);a.push({date:r,label:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),isToday:d,isWeekend:k,isHoliday:se,fullDate:new Date(n)})}return a}),A=a=>{const t=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${t}-${e}-${n}`},Ue=a=>{const t=a.getFullYear(),e=a.getMonth()+1,n=a.getDate();if(e===1&&n===1||e===1&&n===26||e===4&&n===25||e===12&&n===25||e===12&&n===26)return!0;if(e===5){const r=new Date(t,4,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);if(n===r.getDate())return!0}if(e===6){const r=new Date(t,5,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);const d=new Date(r);if(d.setDate(d.getDate()+7),n===d.getDate())return!0}if(e===8){const r=new Date(t,7,1);for(;r.getDay()!==3;)r.setDate(r.getDate()+1);const d=new Date(r);if(d.setDate(d.getDate()+14),n===d.getDate())return!0}return!1},Dt=async()=>{F.value=!0;try{f.value=await wa.getAll()}catch(a){l.notify({type:"negative",message:"Failed to load beer templates",caption:a.response?.data?.message||a.message})}finally{F.value=!1}},Y=async()=>{E.value=!0;try{const a=await le.getAll();ee.value=a;const t=[];for(const e of a)e.tasks&&Array.isArray(e.tasks)&&t.push(...e.tasks);Q.value=t}catch(a){l.notify({type:"negative",message:"Failed to load beers",caption:a.response?.data?.message||a.message})}finally{E.value=!1}},xt=async()=>{if(!(!h.value||!D.value||b.value===null||x.value===null||S.value===null)){M.value=!0;try{const a={beer_template_id:h.value.beer_template_id,name:h.value.beer_name,batch_id:D.value,volume_hl:h.value.volume_hl,priority:S.value,min_fermentation_days:b.value,min_maturation_days:x.value,target_start_date:V.value||null,target_completion_date:H.value||null};await le.create(a),l.notify({type:"positive",message:"Beer created successfully",caption:`${a.name} ${a.batch_id}`,icon:"local_drink"}),h.value=null,D.value="",b.value=null,x.value=null,S.value=2,V.value=null,H.value=null,W.value?.resetValidation(),N.value?.resetValidation(),z.value?.resetValidation(),ve.value?.resetValidation(),pe.value?.resetValidation(),y.value?.resetValidation(),await Y(),await R()}catch(a){l.notify({type:"negative",message:"Failed to create beer",caption:a.response?.data?.message||a.message})}finally{M.value=!1}}},Ie=[[229,57,53],[30,136,229],[67,160,71],[251,140,0],[142,36,170],[0,172,193],[255,179,0],[109,76,65],[216,27,96],[57,73,171],[0,137,123],[124,179,66],[244,81,30],[94,53,177],[3,155,229],[192,202,51]],ie=new Map,st=(a,t=!1)=>{if(!ie.has(a)){const se=ie.size%Ie.length;ie.set(a,se)}const e=ie.get(a),[n,r,d]=Ie[e];return`rgba(${n}, ${r}, ${d}, ${t?.4:.2})`},nt=a=>{if(!ie.has(a)){const d=ie.size%Ie.length;ie.set(a,d)}const t=ie.get(a),[e,n,r]=Ie[t];return`rgb(${e}, ${n}, ${r})`},St=a=>{const t=Ve(a),e={backgroundColor:st(a,t)};return t&&(e.border=`2px solid ${nt(a)}`),e},ot=(a,t)=>{const e=q(a.date,t);if(e.length===0)return{};const n=e[0],r={backgroundColor:st(n.beer_id,n.locked)};if(n.locked){const d=He(a.date,n),k=nt(n.beer_id);d.isSingle?r.border=`2px solid ${k}`:(r.borderLeft=`2px solid ${k}`,r.borderRight=`2px solid ${k}`,d.isFirst&&(r.borderTop=`2px solid ${k}`),d.isLast&&(r.borderBottom=`2px solid ${k}`))}return r},qt=(a,t)=>{const e=[];for(let n=a;n<=t;n++){e.push(`${n}-01-01`),e.push(`${n}-01-26`),e.push(`${n}-04-25`),e.push(`${n}-12-25`),e.push(`${n}-12-26`);const r=n%19,d=Math.floor(n/100),k=n%100,se=Math.floor(d/4),De=d%4,re=Math.floor((d+8)/25),xe=Math.floor((d-re+1)/3),ce=(19*r+d-se-xe+15)%30,Re=Math.floor(k/4),Se=k%4,v=(32+2*De+2*Re-ce-Se)%7,T=Math.floor((r+11*ce+22*v)/451),I=Math.floor((ce+v-7*T+114)/31),qe=(ce+v-7*T+114)%31+1,ne=new Date(n,I-1,qe),ut=new Date(ne);ut.setDate(ne.getDate()-2);const ct=new Date(ne);ct.setDate(ne.getDate()-1);const gt=new Date(ne);gt.setDate(ne.getDate()+1),e.push(A(ut)),e.push(A(ct)),e.push(A(gt));const zt=new Date(n,4,1),Fe=new Date(zt);for(;Fe.getDay()!==1;)Fe.setDate(Fe.getDate()+1);e.push(A(Fe));const Kt=new Date(n,9,1),Te=new Date(Kt);for(;Te.getDay()!==1;)Te.setDate(Te.getDate()+1);const mt=new Date(Te);mt.setDate(Te.getDate()+7),e.push(A(mt));const je=new Date(n,7,10),Ne=new Date(je),Yt=(3-je.getDay()+7)%7;Ne.setDate(je.getDate()+Yt),Ne.getDate()>=10&&Ne.getDate()<=16&&e.push(A(Ne))}return e},R=async()=>{if(ke.value){we.value=!0;try{const a=new Date;a.setHours(0,0,0,0);const t=v=>{const T=new Date(v);T.setHours(0,0,0,0);const I=T.getTime()-a.getTime();return Math.floor(I/(1e3*60*60*24))},e=v=>v?t(v):null,n=[],r=[],d=[];for(const v of ee.value){const T=(v.tasks||[]).filter(I=>I.locked);if(T.length>0){n.push(v);for(const I of T){const qe=t(I.start_date),ne=t(I.end_date)+1;ne>=1&&d.push({resource:I.resource,start_day:qe,end_day:ne})}}else{const I=e(v.target_start_date),qe=I!==null?Math.max(1,I):null;r.push({id:v.beer_id,name:v.name,volume_hl:v.volume_hl,priority:v.priority,min_fermentation_days:v.min_fermentation_days,min_maturation_days:v.min_maturation_days||0,requires_canning:v.requires_canning||!1,target_start_day:qe,target_completion_day:e(v.target_completion_date),tasks:[]})}}const k=new Date().getFullYear(),se=qt(k,k+1),De=[...new Set([...se,...ue.value])],re={beers:r,canning_days:de.value,non_working_days:De};d.length>0&&(re.resource_blocks=d);const xe=await $.post("/api/schedule",re),ce=v=>{const T=new Date(a);return T.setDate(T.getDate()+v),A(T)},Re=xe.data.beers||[],Se=[];for(const v of Re)if(v.tasks&&Array.isArray(v.tasks))for(const T of v.tasks)Se.push({...T,beer_id:v.id,beer_name:v.name,batch_id:v.batch_id,start_date:ce(T.start_day),end_date:ce(T.end_day-1)});for(const v of n){const T=(v.tasks||[]).filter(I=>I.locked);for(const I of T)Se.push({...I,beer_id:v.beer_id,beer_name:v.name,batch_id:v.batch_id})}Q.value=Se,l.notify({type:"positive",message:"Beers scheduled successfully",icon:"calendar_today"})}catch(a){console.error("Schedule error:",a);const t=a.response?.data;t?.error==="SCHEDULING_ERROR"&&t?.diagnostic?(L.value=t,he.value=!0):t?.error==="INFEASIBLE"&&t?.beer_diagnostics?(L.value={error:t.error,message:t.message,diagnostic:{solver_status:t.solver_status,warnings:t.warnings,beer_diagnostics:t.beer_diagnostics,canning:t.canning,equipment:t.equipment}},he.value=!0):l.notify({type:"negative",message:"Failed to schedule beers",caption:t?.message||a.message})}finally{we.value=!1}}},q=(a,t)=>{const e=t.toLowerCase();return Q.value.filter(n=>{if(n.resource.toLowerCase()!==e)return!1;const r=new Date(n.start_date),d=new Date(n.end_date),k=new Date(a);return r.setHours(0,0,0,0),d.setHours(0,0,0,0),k.setHours(0,0,0,0),k>=r&&k<=d})},He=(a,t)=>{const e=new Date(t.start_date),n=new Date(t.end_date),r=new Date(a);e.setHours(0,0,0,0),n.setHours(0,0,0,0),r.setHours(0,0,0,0);const d=r.getTime()===e.getTime(),k=r.getTime()===n.getTime(),se=Math.round((n-e)/(1e3*60*60*24))+1,De=Math.floor(se/2),re=new Date(e);re.setDate(re.getDate()+De);const xe=r.getTime()===re.getTime();return{isFirst:d,isLast:k,isMiddle:xe,isSingle:d&&k}},lt=(a,t)=>{const e=He(a,t);return e.isMiddle||e.isSingle},$e=a=>Q.value.filter(t=>t.beer_id===a),Ve=a=>{const t=$e(a);return t.length===0?!1:t.every(e=>e.locked)},Tt=async(a,t)=>{const e=$e(a.beer_id);if(e.length!==0)try{if(t){for(const n of e)if(!n.locked){const r=await Je.create({beer_id:a.beer_id,beer_name:a.name,task_type:n.task_type,start_day:n.start_day,start_date:n.start_date,duration:n.duration,end_day:n.end_day,end_date:n.end_date,resource:n.resource,volume_hl:a.volume_hl}),d=Q.value.findIndex(k=>k.beer_id===a.beer_id&&k.task_type===n.task_type);d!==-1&&(Q.value[d]={...Q.value[d],task_id:r.task_id,locked:!0})}l.notify({type:"positive",message:"All tasks pinned",caption:a.name,icon:"push_pin"})}else{for(const n of e)if(n.locked&&n.task_id){await Je.delete(n.task_id);const r=Q.value.findIndex(d=>d.beer_id===a.beer_id&&d.task_type===n.task_type);r!==-1&&(Q.value[r]={...Q.value[r],task_id:null,locked:!1})}l.notify({type:"positive",message:"All tasks unpinned",caption:a.name,icon:"push_pin"})}}catch(n){l.notify({type:"negative",message:t?"Failed to pin tasks":"Failed to unpin tasks",caption:n.response?.data?.message||n.message})}},it=(a,t)=>{const e=q(a.date,t),n=e.length>0,r={today:a.isToday,weekend:a.isWeekend,holiday:a.isHoliday,"has-task":n};if(n){const d=He(a.date,e[0]);r["task-first"]=d.isFirst&&!d.isSingle,r["task-last"]=d.isLast&&!d.isSingle,r["task-middle"]=!d.isFirst&&!d.isLast,r["task-single"]=d.isSingle}return r},Bt=a=>{l.notify({type:"info",message:`Viewing ${a.name}`,caption:"Feature coming soon..."})},rt=async(a,t)=>{if(t)if(t.locked&&t.task_id&&(a.metaKey||a.ctrlKey)){const e=a.shiftKey?-1:1;try{await Je.adjustDuration(t.task_id,e),l.notify({type:"positive",message:`Task duration ${e>0?"increased":"decreased"} by 1 day`,icon:"schedule"}),await Y(),await R()}catch(n){l.notify({type:"negative",message:"Failed to adjust task duration",caption:n.response?.data?.message||n.message})}}else Bt(t)},Ct=a=>{l.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${a.name} (${a.batch_id})?`,cancel:!0,persistent:!0}).onOk(async()=>{await It(a.beer_id)})},It=async a=>{try{await le.delete(a),l.notify({type:"positive",message:"Beer deleted successfully",icon:"delete"}),await Y(),await R()}catch(t){l.notify({type:"negative",message:"Failed to delete beer",caption:t.response?.data?.message||t.message})}},$t=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<=0){l.notify({type:"negative",message:"Invalid volume",caption:"Must be greater than 0"});return}const n={...a,volume_hl:e};await le.update(a.beer_id,n),l.notify({type:"positive",message:"Volume updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update volume",caption:e.response?.data?.message||e.message})}},Vt=async(a,t)=>{try{const e={...a,priority:t};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Priority updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update priority",caption:e.response?.data?.message||e.message})}},Ft=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<0){l.notify({type:"negative",message:"Invalid fermentation days",caption:"Must be 0 or greater"});return}const n={...a,min_fermentation_days:e};await le.update(a.beer_id,n),l.notify({type:"positive",message:"Min fermentation days updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update min fermentation days",caption:e.response?.data?.message||e.message})}},Nt=async(a,t)=>{try{const e={...a,target_start_date:t||null};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Target start date updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update target start date",caption:e.response?.data?.message||e.message})}},Mt=async(a,t)=>{try{const e={...a,target_completion_date:t||null};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Target completion date updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update target completion date",caption:e.response?.data?.message||e.message})}},Lt=async(a,t)=>{try{const e={...a,requires_canning:t};await le.update(a.beer_id,e),l.notify({type:"positive",message:"Requires canning updated successfully",icon:"check"}),await Y(),await R()}catch(e){l.notify({type:"negative",message:"Failed to update requires canning",caption:e.response?.data?.message||e.message})}},At=()=>{const a=new Date(K.value);a.setDate(a.getDate()-30),K.value=a},Pt=()=>{const a=new Date(K.value);a.setDate(a.getDate()+30),K.value=a},Et=()=>{K.value=new Date},Qt=a=>{switch(a){case 5:return"red";case 4:return"orange";case 3:return"amber";case 2:return"blue";case 1:return"grey";default:return"grey"}},We=async()=>{try{de.value=await Ge.getAll()}catch(a){console.error("Failed to load canning days:",a)}},Ut=a=>de.value.includes(a),Ht=async()=>{if(te.value){_e.value=!0;try{await Ge.create(te.value),await We(),te.value=null,l.notify({type:"positive",message:"Canning day added",icon:"event"})}catch(a){l.notify({type:"negative",message:"Failed to add canning day",caption:a.response?.data?.message||a.message})}finally{_e.value=!1}}},Wt=async a=>{try{await Ge.delete(a),await We(),l.notify({type:"positive",message:"Canning day removed",icon:"event_busy"})}catch(t){l.notify({type:"negative",message:"Failed to remove canning day",caption:t.response?.data?.message||t.message})}},Oe=async()=>{try{ue.value=await Ze.getAll()}catch(a){console.error("Failed to load non-working days:",a)}},Ot=async()=>{if(ae.value){fe.value=!0;try{await Ze.create(ae.value),await Oe(),ae.value=null,l.notify({type:"positive",message:"Non-working day added",icon:"event"})}catch(a){l.notify({type:"negative",message:"Failed to add non-working day",caption:a.response?.data?.message||a.message})}finally{fe.value=!1}}},Rt=async a=>{try{await Ze.delete(a),await Oe(),l.notify({type:"positive",message:"Non-working day removed",icon:"event_busy"})}catch(t){l.notify({type:"negative",message:"Failed to remove non-working day",caption:t.response?.data?.message||t.message})}},dt=a=>new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),be=a=>{if(a==null)return null;const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);return e.setDate(e.getDate()+a),A(e)},jt=a=>!a||a.length===0?"None":a.map(t=>be(t)).join(", ");return ya(async()=>{await Promise.all([Dt(),Y(),We(),Oe()]),await R()}),(a,t)=>(u(),U(ba,{class:"schedule-page"},{default:c(()=>[o("div",Ba,[o("div",Ca,[t[28]||(t[28]=o("div",{class:"text-h5 q-mb-md"},"Create Beer",-1)),F.value?(u(),_("div",Ia,[i(yt,{color:"primary",size:"md"})])):(u(),_("div",$a,[i(Ke,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),options:f.value,"option-label":"beer_name","option-value":"beer_template_id",label:"Select Beer Template",outlined:"",disable:!f.value||f.value.length===0},{"no-option":c(()=>[i(tt,null,{default:c(()=>[i(J,{class:"text-grey"},{default:c(()=>[...t[10]||(t[10]=[p(" No templates available ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"]),h.value?(u(),U(Me,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:c(()=>[i(Be,null,{default:c(()=>[o("div",Va,m(h.value.beer_name),1),i(me,{class:"q-my-sm"}),o("div",Fa,[o("div",null,[t[11]||(t[11]=o("strong",null,"Volume:",-1)),p(" "+m(h.value.volume_hl)+" hl",1)]),o("div",null,[t[12]||(t[12]=o("strong",null,"Maturation:",-1)),p(" "+m(h.value.min_maturation_days)+" days",1)])]),i(me,{class:"q-my-sm"}),i(j,{ref_key:"batchIdInput",ref:W,modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e),label:"Batch ID *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>!!e||"Batch ID is required"]},null,8,["modelValue","rules"]),i(j,{ref_key:"minFermentationDaysInput",ref:N,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min fermentation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(j,{ref_key:"minMaturationDaysInput",ref:z,modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=e=>x.value=e),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min maturation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(Ke,{ref_key:"priorityInput",ref:ve,modelValue:S.value,"onUpdate:modelValue":t[4]||(t[4]=e=>S.value=e),options:[1,2,3],label:"Priority *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!=null||"Priority is required"]},null,8,["modelValue","rules"]),i(j,{ref_key:"targetStartDateInput",ref:pe,modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),label:"Target Start Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(j,{ref_key:"targetDateInput",ref:y,modelValue:H.value,"onUpdate:modelValue":t[6]||(t[6]=e=>H.value=e),label:"Target Completion Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(G,{color:"primary",icon:"add",label:"Create Beer",class:"full-width q-mt-md",disable:!D.value||b.value===null||x.value===null||S.value===null||M.value,loading:M.value,onClick:xt},null,8,["disable","loading"])]),_:1})]),_:1})):B("",!0),i(me,{class:"q-my-md"}),t[26]||(t[26]=o("div",{class:"text-h6 q-mb-md"},"Canning Days",-1)),o("div",Na,[i(j,{modelValue:te.value,"onUpdate:modelValue":t[7]||(t[7]=e=>te.value=e),type:"date",label:"Add Canning Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),i(G,{color:"primary",icon:"add",disable:!te.value||_e.value,loading:_e.value,onClick:Ht},{default:c(()=>[i(Ae,null,{default:c(()=>[...t[13]||(t[13]=[p("Add Canning Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),de.value.length>0?(u(),_("div",Ma,[(u(!0),_(X,null,oe(de.value,e=>(u(),U(vt,{key:e,removable:"",color:"red","text-color":"white",onRemove:n=>Wt(e)},{default:c(()=>[p(m(dt(e)),1)]),_:2},1032,["onRemove"]))),128))])):(u(),_("div",La," No canning days scheduled ")),i(me,{class:"q-my-md"}),t[27]||(t[27]=o("div",{class:"text-h6 q-mb-md"},"Non-Working Days",-1)),o("div",Aa,[i(j,{modelValue:ae.value,"onUpdate:modelValue":t[8]||(t[8]=e=>ae.value=e),type:"date",label:"Add Non-Working Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),i(G,{color:"primary",icon:"add",disable:!ae.value||fe.value,loading:fe.value,onClick:Ot},{default:c(()=>[i(Ae,null,{default:c(()=>[...t[14]||(t[14]=[p("Add Non-Working Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),ue.value.length>0?(u(),_("div",Pa,[(u(!0),_(X,null,oe(ue.value,e=>(u(),U(vt,{key:e,removable:"",color:"grey","text-color":"white",onRemove:n=>Rt(e)},{default:c(()=>[p(m(dt(e)),1)]),_:2},1032,["onRemove"]))),128))])):(u(),_("div",Ea," No non-working days scheduled ")),i(me,{class:"q-my-md"}),o("div",Qa,[t[15]||(t[15]=o("div",{class:"text-h6"},"Batches",-1)),i(G,{flat:"",dense:"",round:"",icon:"calendar_today",size:"sm",color:"primary",loading:we.value,disable:!ke.value,onClick:R},{default:c(()=>[i(Ae,null,{default:c(()=>[p(m(ke.value?"Schedule Beers":"No beers to schedule"),1)]),_:1})]),_:1},8,["loading","disable"])]),E.value?(u(),_("div",Ua,[i(yt,{color:"primary",size:"md"})])):ee.value.length>0?(u(),U(pt,{key:6},{default:c(()=>[(u(!0),_(X,null,oe(ee.value,e=>(u(),U(ft,{key:e.beer_id,"expand-separator":"",class:Le(["color-indicator",{"beer-locked":Ve(e.beer_id)}]),style:ze(St(e.beer_id))},{header:c(()=>[i(J,null,{default:c(()=>[i(ye,null,{default:c(()=>[p(m(e.name),1)]),_:2},1024),i(ye,{caption:""},{default:c(()=>[p(m(e.batch_id),1)]),_:2},1024)]),_:2},1024),i(J,{side:""},{default:c(()=>[o("div",Ha,[Ve(e.beer_id)?(u(),U(Z,{key:0,name:"lock",size:"xs",color:"grey-7"})):B("",!0),i(_t,{color:Qt(e.priority)},{default:c(()=>[p(" P"+m(e.priority),1)]),_:2},1032,["color"])])]),_:2},1024)]),default:c(()=>[i(Me,{flat:""},{default:c(()=>[i(Be,{class:"q-pt-none"},{default:c(()=>[o("div",Wa,[t[17]||(t[17]=o("div",{class:"text-subtitle2"},"Beer Details",-1)),i(G,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:n=>Ct(e)},{default:c(()=>[i(Ae,null,{default:c(()=>[...t[16]||(t[16]=[p("Delete Beer",-1)])]),_:1})]),_:1},8,["onClick"])]),o("div",Oa,[o("div",Ra,[t[18]||(t[18]=o("span",{class:"detail-label"},"Batch ID:",-1)),o("span",null,m(e.batch_id),1)]),o("div",ja,[t[19]||(t[19]=o("span",{class:"detail-label"},"Volume:",-1)),i(j,{"model-value":e.volume_hl,type:"number",suffix:"hl",dense:"",outlined:"",style:{"max-width":"100px"},rules:[n=>n>0||"Must be greater than 0"],"onUpdate:modelValue":n=>$t(e,n)},null,8,["model-value","rules","onUpdate:modelValue"])]),o("div",za,[t[20]||(t[20]=o("span",{class:"detail-label"},"Priority:",-1)),i(Ke,{"model-value":e.priority,options:[1,2,3],dense:"",outlined:"",style:{"max-width":"80px"},"onUpdate:modelValue":n=>Vt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),o("div",Ka,[t[21]||(t[21]=o("span",{class:"detail-label"},"Min Fermentation:",-1)),i(j,{"model-value":e.min_fermentation_days,type:"number",suffix:"days",dense:"",outlined:"",style:{"max-width":"120px"},rules:[n=>n>=0||"Must be 0 or greater"],onChange:n=>Ft(e,n.target.value)},null,8,["model-value","rules","onChange"])]),o("div",Ya,[t[22]||(t[22]=o("span",{class:"detail-label"},"Target Start:",-1)),i(j,{"model-value":e.target_start_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>Nt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),o("div",Ga,[t[23]||(t[23]=o("span",{class:"detail-label"},"Target Completion:",-1)),i(j,{"model-value":e.target_completion_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>Mt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),o("div",Xa,[t[24]||(t[24]=o("span",{class:"detail-label"},"Requires Canning:",-1)),i(va,{"model-value":e.requires_canning||!1,dense:"","onUpdate:modelValue":n=>Lt(e,n)},null,8,["model-value","onUpdate:modelValue"])])]),$e(e.beer_id).length>0?(u(),_("div",Za,[o("div",Ja,[t[25]||(t[25]=o("div",{class:"text-subtitle2"},"Scheduled Tasks",-1)),i(pa,{"model-value":Ve(e.beer_id),label:"Pin All",dense:"",size:"sm","onUpdate:modelValue":n=>Tt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),(u(!0),_(X,null,oe($e(e.beer_id),n=>(u(),_("div",{key:`${e.beer_id}-${n.task_type}`,class:"task-row"},[o("span",es,m(n.task_type),1),n.locked?(u(),U(Z,{key:0,name:"push_pin",size:"xs",color:"primary"})):B("",!0)]))),128))])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","style"]))),128))]),_:1})):(u(),_("div",ts," No beers scheduled yet "))]))]),o("div",as,[o("div",ss,[t[29]||(t[29]=o("div",{class:"text-h4"},"Schedule",-1)),o("div",ns,[i(G,{flat:"",dense:"",round:"",icon:"chevron_left",onClick:At}),o("div",os,m(g.value),1),i(G,{flat:"",dense:"",round:"",icon:"chevron_right",onClick:Pt}),i(G,{flat:"",label:"Today",onClick:Et})])]),o("div",ls,[o("div",is,[t[30]||(t[30]=o("div",{class:"schedule-header"},"Date",-1)),t[31]||(t[31]=o("div",{class:"schedule-header"},"Brewhouse",-1)),t[32]||(t[32]=o("div",{class:"schedule-header"},[o("div",null,"F6"),o("div",{class:"volume-label"},"20hl")],-1)),t[33]||(t[33]=o("div",{class:"schedule-header"},[o("div",null,"F5"),o("div",{class:"volume-label"},"20hl")],-1)),t[34]||(t[34]=o("div",{class:"schedule-header"},[o("div",null,"F4"),o("div",{class:"volume-label"},"20hl")],-1)),t[35]||(t[35]=o("div",{class:"schedule-header"},[o("div",null,"F3"),o("div",{class:"volume-label"},"20hl")],-1)),t[36]||(t[36]=o("div",{class:"schedule-header"},[o("div",null,"F2"),o("div",{class:"volume-label"},"10hl")],-1)),t[37]||(t[37]=o("div",{class:"schedule-header"},[o("div",null,"F1"),o("div",{class:"volume-label"},"10hl")],-1)),t[38]||(t[38]=o("div",{class:"schedule-header"},[o("div",null,"B1"),o("div",{class:"volume-label"},"10hl")],-1)),t[39]||(t[39]=o("div",{class:"schedule-header"},[o("div",null,"B2"),o("div",{class:"volume-label"},"20hl")],-1)),(u(!0),_(X,null,oe(O.value,e=>(u(),_(X,{key:e.date},[o("div",{class:Le(["schedule-cell date-cell",{today:e.isToday,weekend:e.isWeekend,holiday:e.isHoliday,"canning-day":Ut(e.date)}])},[o("div",rs,m(e.label),1)],2),o("div",{class:Le(["schedule-cell tank-cell",it(e,"Brewhouse")]),style:ze(ot(e,"Brewhouse")),onClick:n=>q(e.date,"Brewhouse").length>0?rt(n,q(e.date,"Brewhouse")[0]):null},[q(e.date,"Brewhouse").length>0&&lt(e.date,q(e.date,"Brewhouse")[0])?(u(),_("div",us,[o("div",cs,[p(m(q(e.date,"Brewhouse")[0].beer_name)+" ",1),q(e.date,"Brewhouse")[0].batch_id?(u(),_("span",gs,m(q(e.date,"Brewhouse")[0].batch_id),1)):B("",!0)]),o("div",ms,m(q(e.date,"Brewhouse")[0].task_type),1)])):B("",!0)],14,ds),(u(),_(X,null,oe(Qe,n=>o("div",{key:`${e.date}-${n}`,class:Le(["schedule-cell tank-cell",it(e,n)]),style:ze(ot(e,n)),onClick:r=>q(e.date,n).length>0?rt(r,q(e.date,n)[0]):null},[q(e.date,n).length>0&&lt(e.date,q(e.date,n)[0])?(u(),_("div",vs,[o("div",ps,[p(m(q(e.date,n)[0].beer_name)+" ",1),q(e.date,n)[0].batch_id?(u(),_("span",_s,m(q(e.date,n)[0].batch_id),1)):B("",!0)]),o("div",fs,m(q(e.date,n)[0].task_type),1)])):B("",!0)],14,ys)),64))],64))),128))])])])]),i(_a,{modelValue:he.value,"onUpdate:modelValue":t[9]||(t[9]=e=>he.value=e),persistent:""},{default:c(()=>[i(Me,{style:{"min-width":"500px","max-width":"700px"}},{default:c(()=>[i(Be,{class:"row items-center q-pb-none"},{default:c(()=>[o("div",hs,[i(Z,{name:"error",class:"q-mr-sm"}),t[40]||(t[40]=p(" Scheduling Failed ",-1))]),i(ka),et(i(G,{icon:"close",flat:"",round:"",dense:""},null,512),[[wt]])]),_:1}),L.value?(u(),U(Be,{key:0},{default:c(()=>[o("div",ws,m(L.value.message),1),L.value.diagnostic?.warnings?.length>0?(u(),_("div",ks,[o("div",bs,[i(Z,{name:"warning",color:"warning",class:"q-mr-xs"}),t[41]||(t[41]=p(" Warnings ",-1))]),i(pt,{dense:"",bordered:"",separator:"",class:"rounded-borders"},{default:c(()=>[(u(!0),_(X,null,oe(L.value.diagnostic.warnings,(e,n)=>(u(),U(tt,{key:n},{default:c(()=>[i(J,null,{default:c(()=>[i(ye,{class:"text-body2"},{default:c(()=>[p(m(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):B("",!0),L.value.diagnostic?.canning?(u(),_("div",Ds,[o("div",xs,[i(Z,{name:"inventory_2",color:"primary",class:"q-mr-xs"}),t[42]||(t[42]=p(" Canning Constraints ",-1))]),o("div",Ss,[o("div",null,[t[43]||(t[43]=o("strong",null,"Available canning days:",-1)),p(" "+m(jt(L.value.diagnostic.canning.available_days)),1)]),o("div",null,[t[44]||(t[44]=o("strong",null,"Beers requiring canning:",-1)),p(" "+m(L.value.diagnostic.canning.beers_requiring_canning),1)])])])):B("",!0),L.value.diagnostic?.beer_diagnostics?.length>0?(u(),_("div",qs,[o("div",Ts,[i(Z,{name:"sports_bar",color:"amber",class:"q-mr-xs"}),t[45]||(t[45]=p(" Beer Details ",-1))]),(u(!0),_(X,null,oe(L.value.diagnostic.beer_diagnostics,e=>(u(),U(ft,{key:e.id,dense:"","expand-separator":"","header-class":e.warnings?.length>0?"text-negative":""},{header:c(()=>[i(J,{avatar:""},{default:c(()=>[i(Z,{name:e.warnings?.length>0?"error":"check_circle",color:e.warnings?.length>0?"negative":"positive",size:"sm"},null,8,["name","color"])]),_:2},1024),i(J,null,{default:c(()=>[i(ye,null,{default:c(()=>[p(m(e.name),1)]),_:2},1024),i(ye,{caption:""},{default:c(()=>[p(m(e.volume_hl)+" hl",1)]),_:2},1024)]),_:2},1024),e.warnings?.length>0?(u(),U(J,{key:0,side:""},{default:c(()=>[i(_t,{color:"negative"},{default:c(()=>[p(m(e.warnings.length)+" warning(s)",1)]),_:2},1024)]),_:2},1024)):B("",!0)]),default:c(()=>[i(Me,{flat:""},{default:c(()=>[i(Be,{class:"q-pt-none"},{default:c(()=>[e.warnings?.length>0?(u(),_("div",Bs,[(u(!0),_(X,null,oe(e.warnings,(n,r)=>(u(),_("div",{key:r,class:"text-negative text-body2 q-mb-xs"},[i(Z,{name:"warning",size:"xs",class:"q-mr-xs"}),p(" "+m(n),1)]))),128))])):B("",!0),o("div",Cs,[o("div",Is,[o("div",$s,[t[46]||(t[46]=o("span",{class:"text-grey-7"},"Brew days:",-1)),p(" "+m(e.brew_days),1)]),o("div",Vs,[t[47]||(t[47]=o("span",{class:"text-grey-7"},"Min fermentation:",-1)),p(" "+m(e.min_fermentation_days)+" days ",1)]),o("div",Fs,[t[48]||(t[48]=o("span",{class:"text-grey-7"},"Min maturation:",-1)),p(" "+m(e.min_maturation_days)+" days ",1)]),o("div",Ns,[t[49]||(t[49]=o("span",{class:"text-grey-7"},"Min to completion:",-1)),p(" "+m(e.min_days_to_completion)+" days ",1)]),o("div",Ms,[t[50]||(t[50]=o("span",{class:"text-grey-7"},"Requires canning:",-1)),p(" "+m(e.requires_canning?"Yes":"No"),1)]),e.target_start_day!==null?(u(),_("div",Ls,[t[51]||(t[51]=o("span",{class:"text-grey-7"},"Target start:",-1)),p(" "+m(be(e.target_start_day)),1)])):B("",!0),e.target_completion_day!==null?(u(),_("div",As,[t[52]||(t[52]=o("span",{class:"text-grey-7"},"Target completion:",-1)),p(" "+m(be(e.target_completion_day)),1)])):B("",!0),e.earliest_possible_completion!==null&&e.earliest_possible_completion!==void 0?(u(),_("div",Ps,[t[53]||(t[53]=o("span",{class:"text-grey-7"},"Earliest completion:",-1)),p(" "+m(be(e.earliest_possible_completion)),1)])):B("",!0),e.earliest_feasible_canning_day!==null?(u(),_("div",Es,[t[54]||(t[54]=o("span",{class:"text-grey-7"},"Earliest canning:",-1)),p(" "+m(be(e.earliest_feasible_canning_day)),1)])):B("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["header-class"]))),128))])):B("",!0),o("div",Qs," Solver status: "+m(L.value.diagnostic?.solver_status),1)]),_:1})):B("",!0),i(fa,{align:"right"},{default:c(()=>[et(i(G,{flat:"",label:"Close",color:"primary"},null,512),[[wt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ks=Ta(Us,[["__scopeId","data-v-53ff8a7b"]]);export{Ks as default};
