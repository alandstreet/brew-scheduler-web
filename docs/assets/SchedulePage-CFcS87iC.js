import{c as Ze,n as N,h as I,R as Ut,C as vt,T as Ht,U as Ot,V as Rt,W as jt,X as zt,Y as pt,v as Wt,Z as Kt,r as b,_ as Yt,$ as Gt,G as Ae,a0 as Xt,i as fe,a1 as Ge,a2 as Zt,A as Jt,a3 as G,a4 as ea,a5 as ta,a6 as aa,a7 as sa,a8 as na,o as la,a as z,b as c,w as u,d as l,e as i,j as h,k as dt,f as B,l as _,Q as Fe,g as Se,t as m,a9 as Y,m as te,aa as ae,ab as le,ac as Re,ad as Me,ae as oa,af as ia,ag as ra,ah as da}from"./index-DhswW00J.js";import{Q as Xe,a as de,b as X,c as E,v as ua,d as ca,e as je,f as ze,g as ga,h as ut}from"./v4-DGadA9cV.js";import{Q as ma}from"./QSpace-CTSyel1n.js";import{Q as ya}from"./QPage-De-XrEBl.js";import{u as va}from"./use-quasar-BO9niRFC.js";const pa=["top","middle","bottom"],ct=Ze({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:s=>pa.includes(s)}},setup(s,{slots:o}){const f=N(()=>s.align!==void 0?{verticalAlign:s.align}:null),v=N(()=>{const D=s.outline===!0&&s.color||s.textColor;return`q-badge flex inline items-center no-wrap q-badge--${s.multiLine===!0?"multi":"single"}-line`+(s.outline===!0?" q-badge--outline":s.color!==void 0?` bg-${s.color}`:"")+(D!==void 0?` text-${D}`:"")+(s.floating===!0?" q-badge--floating":"")+(s.rounded===!0?" q-badge--rounded":"")+(s.transparent===!0?" q-badge--transparent":"")});return()=>I("div",{class:v.value,style:f.value,role:"status","aria-label":s.label},Ut(o.default,s.label!==void 0?[s.label]:[]))}}),_a=Ze({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(s,{slots:o,emit:f}){let v=!1,D,k,x=null,q=null,$,U;function H(){D?.(),D=null,v=!1,x!==null&&(clearTimeout(x),x=null),q!==null&&(clearTimeout(q),q=null),k?.removeEventListener("transitionend",$),$=null}function L(y,V,A){V!==void 0&&(y.style.height=`${V}px`),y.style.transition=`height ${s.duration}ms cubic-bezier(.25, .8, .50, 1)`,v=!0,D=A}function W(y,V){y.style.overflowY=null,y.style.height=null,y.style.transition=null,H(),V!==U&&f(V)}function ue(y,V){let A=0;k=y,v===!0?(H(),A=y.offsetHeight===y.scrollHeight?0:void 0):(U="hide",y.style.overflowY="hidden"),L(y,A,V),x=setTimeout(()=>{x=null,y.style.height=`${y.scrollHeight}px`,$=P=>{q=null,(Object(P)!==P||P.target===y)&&W(y,"show")},y.addEventListener("transitionend",$),q=setTimeout($,s.duration*1.1)},100)}function ce(y,V){let A;k=y,v===!0?H():(U="show",y.style.overflowY="hidden",A=y.scrollHeight),L(y,A,V),x=setTimeout(()=>{x=null,y.style.height=0,$=P=>{q=null,(Object(P)!==P||P.target===y)&&W(y,"hide")},y.addEventListener("transitionend",$),q=setTimeout($,s.duration*1.1)},100)}return vt(()=>{v===!0&&H()}),()=>I(Ht,{css:!1,appear:s.appear,onEnter:ue,onLeave:ce},o.default)}}),re=Ot({}),fa=Object.keys(pt),gt=Ze({name:"QExpansionItem",props:{...pt,...zt,...jt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Rt,"click","afterShow","afterHide"],setup(s,{slots:o,emit:f}){const{proxy:{$q:v}}=Wt(),D=Kt(s,v),k=b(s.modelValue!==null?s.modelValue:s.defaultOpened),x=b(null),q=Yt(),{show:$,hide:U,toggle:H}=Gt({showing:k});let L,W;const ue=N(()=>`q-expansion-item q-item-type q-expansion-item--${k.value===!0?"expanded":"collapsed"} q-expansion-item--${s.popup===!0?"popup":"standard"}`),ce=N(()=>s.contentInsetLevel===void 0?null:{["padding"+(v.lang.rtl===!0?"Right":"Left")]:s.contentInsetLevel*56+"px"}),y=N(()=>s.disable!==!0&&(s.href!==void 0||s.to!==void 0&&s.to!==null&&s.to!=="")),V=N(()=>{const g={};return fa.forEach(R=>{g[R]=s[R]}),g}),A=N(()=>y.value===!0||s.expandIconToggle!==!0),P=N(()=>s.expandedIcon!==void 0&&k.value===!0?s.expandedIcon:s.expandIcon||v.iconSet.expansionItem[s.denseToggle===!0?"denseIcon":"icon"]),he=N(()=>s.disable!==!0&&(y.value===!0||s.expandIconToggle===!0)),K=N(()=>({expanded:k.value===!0,detailsId:q.value,toggle:H,show:$,hide:U})),Z=N(()=>{const g=s.toggleAriaLabel!==void 0?s.toggleAriaLabel:v.lang.label[k.value===!0?"collapse":"expand"](s.label);return{role:"button","aria-expanded":k.value===!0?"true":"false","aria-controls":q.value,"aria-label":g}});Ae(()=>s.group,g=>{W?.(),g!==void 0&&F()});function Q(g){y.value!==!0&&H(g),f("click",g)}function oe(g){g.keyCode===13&&J(g,!0)}function J(g,R){R!==!0&&g.qAvoidFocus!==!0&&x.value?.focus(),H(g),ea(g)}function ge(){f("afterShow")}function me(){f("afterHide")}function F(){L===void 0&&(L=Xt()),k.value===!0&&(re[s.group]=L);const g=Ae(k,M=>{M===!0?re[s.group]=L:re[s.group]===L&&delete re[s.group]}),R=Ae(()=>re[s.group],(M,Qe)=>{Qe===L&&M!==void 0&&M!==L&&U()});W=()=>{g(),R(),re[s.group]===L&&delete re[s.group],W=void 0}}function Ne(){const g={class:[`q-focusable relative-position cursor-pointer${s.denseToggle===!0&&s.switchToggleSide===!0?" items-end":""}`,s.expandIconClass],side:s.switchToggleSide!==!0,avatar:s.switchToggleSide},R=[I(G,{class:"q-expansion-item__toggle-icon"+(s.expandedIcon===void 0&&k.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:P.value})];return he.value===!0&&(Object.assign(g,{tabindex:0,...Z.value,onClick:J,onKeyup:oe}),R.unshift(I("div",{ref:x,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),I(X,g,()=>R)}function be(){let g;return o.header!==void 0?g=[].concat(o.header(K.value)):(g=[I(X,()=>[I(de,{lines:s.labelLines},()=>s.label||""),s.caption?I(de,{lines:s.captionLines,caption:!0},()=>s.caption):null])],s.icon&&g[s.switchToggleSide===!0?"push":"unshift"](I(X,{side:s.switchToggleSide===!0,avatar:s.switchToggleSide!==!0},()=>I(G,{name:s.icon})))),s.disable!==!0&&s.hideExpandIcon!==!0&&g[s.switchToggleSide===!0?"unshift":"push"](Ne()),g}function Pe(){const g={ref:"item",style:s.headerStyle,class:s.headerClass,dark:D.value,disable:s.disable,dense:s.dense,insetLevel:s.headerInsetLevel};return A.value===!0&&(g.clickable=!0,g.onClick=Q,Object.assign(g,y.value===!0?V.value:Z.value)),I(Xe,g,be)}function Ee(){return Ge(I("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ce.value,id:q.value},Jt(o.default)),[[Zt,k.value]])}function O(){const g=[Pe(),I(_a,{duration:s.duration,onShow:ge,onHide:me},Ee)];return s.expandSeparator===!0&&g.push(I(fe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:D.value}),I(fe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:D.value})),g}return s.group!==void 0&&F(),vt(()=>{W?.()}),()=>I("div",{class:ue.value},[I("div",{class:"q-expansion-item__container relative-position"},O())])}});function mt(s){if(s===!1)return 0;if(s===!0||s===void 0)return 1;const o=parseInt(s,10);return isNaN(o)?0:o}const yt=ta({name:"close-popup",beforeMount(s,{value:o}){const f={depth:mt(o),handler(v){f.depth!==0&&setTimeout(()=>{const D=sa(s);D!==void 0&&na(D,v,f.depth)})},handlerKey(v){aa(v,13)===!0&&f.handler(v)}};s.__qclosepopup=f,s.addEventListener("click",f.handler),s.addEventListener("keyup",f.handlerKey)},updated(s,{value:o,oldValue:f}){o!==f&&(s.__qclosepopup.depth=mt(o))},beforeUnmount(s){const o=s.__qclosepopup;s.removeEventListener("click",o.handler),s.removeEventListener("keyup",o.handlerKey),delete s.__qclosepopup}}),qe="/api/beers",se={async getAll(){return(await E.get(qe)).data.beers||[]},async getById(s){return(await E.get(`${qe}/${s}`)).data.beer},async create(s){const o={beer_template_id:s.beer_template_id,name:s.name,batch_id:s.batch_id,volume_hl:s.volume_hl,priority:s.priority,min_fermentation_days:s.min_fermentation_days,min_maturation_days:s.min_maturation_days,target_start_date:s.target_start_date,target_completion_date:s.target_completion_date};await E.post(qe,o)},async update(s,o){const f={beer_id:o.beer_id,beer_template_id:o.beer_template_id||null,name:o.name,batch_id:o.batch_id||null,volume_hl:o.volume_hl,priority:o.priority,min_fermentation_days:o.min_fermentation_days,min_maturation_days:o.min_maturation_days||0,target_start_date:o.target_start_date||null,target_completion_date:o.target_completion_date||null,requires_canning:o.requires_canning||!1,tasks:o.tasks||[]};await E.put(`${qe}/${s}`,f)},async delete(s){await E.delete(`${qe}/${s}`)}},We="/api/canning-days",Ke={async getAll(){return((await E.get(We)).data.canning_days||[]).map(f=>f.canning_day)},async create(s){await E.post(We,{canning_day:s})},async delete(s){await E.delete(`${We}/${s}`)}},Le="/api/tasks",Ye={async getById(s){return(await E.get(`${Le}/${s}`)).data.task},async create(s){const o=ua();return(await E.post(Le,{task_id:o,...s,locked:!0})).data},async delete(s){await E.delete(`${Le}/${s}`)},async adjustDuration(s,o){return(await E.put(`${Le}/${s}/duration/${o}`)).data.tasks||[]}},ha=(s,o)=>{const f=s.__vccOpts||s;for(const[v,D]of o)f[v]=D;return f},ba={class:"row no-wrap",style:{height:"100%"}},wa={class:"col-3 q-pa-md",style:{"border-right":"1px solid #e0e0e0","overflow-y":"auto"}},ka={key:0,class:"flex flex-center q-pa-md"},Da={key:1},xa={class:"text-subtitle2 text-primary"},Sa={class:"text-caption"},qa={class:"row q-gutter-sm q-mb-md"},Ta={key:1,class:"canning-days-list q-mb-md"},Ba={key:2,class:"text-grey-6 text-center q-pa-sm"},Ca={class:"row items-center justify-between q-mb-md"},Ia={key:3,class:"flex flex-center q-pa-md"},$a={class:"row items-center q-gutter-xs"},Va={class:"row items-center justify-between q-mb-sm"},Fa={class:"beer-details"},Ma={class:"detail-row"},La={class:"detail-row"},Aa={class:"detail-row"},Na={class:"detail-row"},Pa={class:"detail-row"},Ea={class:"detail-row"},Qa={class:"detail-row"},Ua={key:0,class:"q-mt-md"},Ha={class:"row items-center justify-between q-mb-sm"},Oa={class:"task-type-label"},Ra={key:5,class:"text-center text-grey-7 q-pa-md"},ja={class:"col-9 q-pa-md"},za={class:"row items-center justify-between q-mb-md"},Wa={class:"row items-center q-gutter-sm"},Ka={class:"text-h6"},Ya={class:"schedule-table-container"},Ga={class:"schedule-table"},Xa={class:"date-label"},Za=["onClick"],Ja={key:0,class:"task-info"},es={class:"task-name"},ts={key:0,class:"batch-id"},as={class:"task-type"},ss=["onClick"],ns={key:0,class:"task-info"},ls={class:"task-name"},os={key:0,class:"batch-id"},is={class:"task-type"},rs={class:"text-h6 text-negative"},ds={class:"text-subtitle1 q-mb-md"},us={key:0,class:"q-mb-md"},cs={class:"text-weight-medium q-mb-sm"},gs={key:1,class:"q-mb-md"},ms={class:"text-weight-medium q-mb-sm"},ys={class:"text-body2 q-ml-md"},vs={key:2},ps={class:"text-weight-medium q-mb-sm"},_s={key:0,class:"q-mb-sm"},fs={class:"beer-diagnostic-details"},hs={class:"row q-col-gutter-sm"},bs={class:"col-6"},ws={class:"col-6"},ks={class:"col-6"},Ds={class:"col-6"},xs={class:"col-6"},Ss={key:0,class:"col-6"},qs={key:1,class:"col-6"},Ts={key:2,class:"col-6"},Bs={key:3,class:"col-6"},Cs={class:"q-mt-md text-caption text-grey-7"},Is={__name:"SchedulePage",setup(s){const o=va(),f=b([]),v=b(null),D=b(""),k=b(null),x=b(null),q=b(2),$=b(null),U=b(null),H=b(null),L=b(null),W=b(null),ue=b(null),ce=b(null),y=b(null),V=b(!1),A=b(!1),P=b(!1),he=b(!1),K=b(new Date),Z=b([]),Q=b([]),oe=b([]),J=b(null),ge=b(!1),me=b(!1),F=b(null),Ne=["F6","F5","F4","F3","F2","F1","B1","B2"];Ae(v,a=>{a?(k.value=a.min_fermentation_days,x.value=a.min_maturation_days):(k.value=null,x.value=null)});const be=N(()=>Z.value.length===0?!1:Z.value.some(a=>{const t=a.tasks||[];return t.length===0?!0:!t.every(e=>e.locked)})),Pe=N(()=>{const a=new Date(K.value),t=new Date(K.value);return t.setDate(t.getDate()+29),`${a.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}),Ee=N(()=>{const a=[],t=new Date;t.setHours(0,0,0,0);for(let e=0;e<30;e++){const n=new Date(K.value);n.setDate(n.getDate()+e),n.setHours(0,0,0,0);const r=O(n),d=n.getTime()===t.getTime(),w=n.getDay()===0||n.getDay()===6,ee=g(n);a.push({date:r,label:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),isToday:d,isWeekend:w,isHoliday:ee,fullDate:new Date(n)})}return a}),O=a=>{const t=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${t}-${e}-${n}`},g=a=>{const t=a.getFullYear(),e=a.getMonth()+1,n=a.getDate();if(e===1&&n===1||e===1&&n===26||e===4&&n===25||e===12&&n===25||e===12&&n===26)return!0;if(e===5){const r=new Date(t,4,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);if(n===r.getDate())return!0}if(e===6){const r=new Date(t,5,1);for(;r.getDay()!==1;)r.setDate(r.getDate()+1);const d=new Date(r);if(d.setDate(d.getDate()+7),n===d.getDate())return!0}if(e===8){const r=new Date(t,7,1);for(;r.getDay()!==3;)r.setDate(r.getDate()+1);const d=new Date(r);if(d.setDate(d.getDate()+14),n===d.getDate())return!0}return!1},R=async()=>{V.value=!0;try{f.value=await ca.getAll()}catch(a){o.notify({type:"negative",message:"Failed to load beer templates",caption:a.response?.data?.message||a.message})}finally{V.value=!1}},M=async()=>{P.value=!0;try{const a=await se.getAll();Z.value=a;const t=[];for(const e of a)e.tasks&&Array.isArray(e.tasks)&&t.push(...e.tasks);Q.value=t}catch(a){o.notify({type:"negative",message:"Failed to load beers",caption:a.response?.data?.message||a.message})}finally{P.value=!1}},Qe=async()=>{if(!(!v.value||!D.value||k.value===null||x.value===null||q.value===null)){A.value=!0;try{const a={beer_template_id:v.value.beer_template_id,name:v.value.beer_name,batch_id:D.value,volume_hl:v.value.volume_hl,priority:q.value,min_fermentation_days:k.value,min_maturation_days:x.value,target_start_date:$.value||null,target_completion_date:U.value||null};await se.create(a),o.notify({type:"positive",message:"Beer created successfully",caption:`${a.name} ${a.batch_id}`,icon:"local_drink"}),v.value=null,D.value="",k.value=null,x.value=null,q.value=2,$.value=null,U.value=null,H.value?.resetValidation(),L.value?.resetValidation(),W.value?.resetValidation(),ue.value?.resetValidation(),ce.value?.resetValidation(),y.value?.resetValidation(),await M(),await j()}catch(a){o.notify({type:"negative",message:"Failed to create beer",caption:a.response?.data?.message||a.message})}finally{A.value=!1}}},Te=[[229,57,53],[30,136,229],[67,160,71],[251,140,0],[142,36,170],[0,172,193],[255,179,0],[109,76,65],[216,27,96],[57,73,171],[0,137,123],[124,179,66],[244,81,30],[94,53,177],[3,155,229],[192,202,51]],ne=new Map,Je=(a,t=!1)=>{if(!ne.has(a)){const ee=ne.size%Te.length;ne.set(a,ee)}const e=ne.get(a),[n,r,d]=Te[e];return`rgba(${n}, ${r}, ${d}, ${t?.4:.2})`},et=a=>{if(!ne.has(a)){const d=ne.size%Te.length;ne.set(a,d)}const t=ne.get(a),[e,n,r]=Te[t];return`rgb(${e}, ${n}, ${r})`},_t=a=>{const t=Ce(a),e={backgroundColor:Je(a,t)};return t&&(e.border=`2px solid ${et(a)}`),e},tt=(a,t)=>{const e=T(a.date,t);if(e.length===0)return{};const n=e[0],r={backgroundColor:Je(n.beer_id,n.locked)};if(n.locked){const d=Ue(a.date,n),w=et(n.beer_id);d.isSingle?r.border=`2px solid ${w}`:(r.borderLeft=`2px solid ${w}`,r.borderRight=`2px solid ${w}`,d.isFirst&&(r.borderTop=`2px solid ${w}`),d.isLast&&(r.borderBottom=`2px solid ${w}`))}return r},ft=(a,t)=>{const e=[];for(let n=a;n<=t;n++){e.push(`${n}-01-01`),e.push(`${n}-01-26`),e.push(`${n}-04-25`),e.push(`${n}-12-25`),e.push(`${n}-12-26`);const r=n%19,d=Math.floor(n/100),w=n%100,ee=Math.floor(d/4),ye=d%4,ie=Math.floor((d+8)/25),ve=Math.floor((d-ie+1)/3),pe=(19*r+d-ee-ve+15)%30,ke=Math.floor(w/4),p=w%4,S=(32+2*ye+2*ke-pe-p)%7,C=Math.floor((r+11*pe+22*S)/451),De=Math.floor((pe+S-7*C+114)/31),Ie=(pe+S-7*C+114)%31+1,_e=new Date(n,De-1,Ie),lt=new Date(_e);lt.setDate(_e.getDate()-2);const ot=new Date(_e);ot.setDate(_e.getDate()-1);const it=new Date(_e);it.setDate(_e.getDate()+1),e.push(O(lt)),e.push(O(ot)),e.push(O(it));const Pt=new Date(n,4,1),$e=new Date(Pt);for(;$e.getDay()!==1;)$e.setDate($e.getDate()+1);e.push(O($e));const Et=new Date(n,9,1),xe=new Date(Et);for(;xe.getDay()!==1;)xe.setDate(xe.getDate()+1);const rt=new Date(xe);rt.setDate(xe.getDate()+7),e.push(O(rt));const Oe=new Date(n,7,10),Ve=new Date(Oe),Qt=(3-Oe.getDay()+7)%7;Ve.setDate(Oe.getDate()+Qt),Ve.getDate()>=10&&Ve.getDate()<=16&&e.push(O(Ve))}return e},j=async()=>{if(be.value){he.value=!0;try{const a=new Date;a.setHours(0,0,0,0);const t=p=>{const S=new Date(p);S.setHours(0,0,0,0);const C=S.getTime()-a.getTime();return Math.floor(C/(1e3*60*60*24))},e=p=>p?t(p):null,n=[],r=[],d=[];for(const p of Z.value){const S=(p.tasks||[]).filter(C=>C.locked);if(S.length>0){n.push(p);for(const C of S){const De=t(C.start_date),Ie=t(C.end_date)+1;Ie>=1&&d.push({resource:C.resource,start_day:De,end_day:Ie})}}else{const C=e(p.target_start_date),De=C!==null?Math.max(1,C):null;r.push({id:p.beer_id,name:p.name,volume_hl:p.volume_hl,priority:p.priority,min_fermentation_days:p.min_fermentation_days,min_maturation_days:p.min_maturation_days||0,requires_canning:p.requires_canning||!1,target_start_day:De,target_completion_day:e(p.target_completion_date),tasks:[]})}}const w=new Date().getFullYear(),ee=ft(w,w+1),ye={beers:r,canning_days:oe.value,non_working_days:ee};d.length>0&&(ye.resource_blocks=d);const ie=await E.post("/api/schedule",ye),ve=p=>{const S=new Date(a);return S.setDate(S.getDate()+p),O(S)},pe=ie.data.beers||[],ke=[];for(const p of pe)if(p.tasks&&Array.isArray(p.tasks))for(const S of p.tasks)ke.push({...S,beer_id:p.id,beer_name:p.name,batch_id:p.batch_id,start_date:ve(S.start_day),end_date:ve(S.end_day-1)});for(const p of n){const S=(p.tasks||[]).filter(C=>C.locked);for(const C of S)ke.push({...C,beer_id:p.beer_id,beer_name:p.name,batch_id:p.batch_id})}Q.value=ke,o.notify({type:"positive",message:"Beers scheduled successfully",icon:"calendar_today"})}catch(a){console.error("Schedule error:",a);const t=a.response?.data;t?.error==="SCHEDULING_ERROR"&&t?.diagnostic?(F.value=t,me.value=!0):t?.error==="INFEASIBLE"&&t?.beer_diagnostics?(F.value={error:t.error,message:t.message,diagnostic:{solver_status:t.solver_status,warnings:t.warnings,beer_diagnostics:t.beer_diagnostics,canning:t.canning,equipment:t.equipment}},me.value=!0):o.notify({type:"negative",message:"Failed to schedule beers",caption:t?.message||a.message})}finally{he.value=!1}}},T=(a,t)=>{const e=t.toLowerCase();return Q.value.filter(n=>{if(n.resource.toLowerCase()!==e)return!1;const r=new Date(n.start_date),d=new Date(n.end_date),w=new Date(a);return r.setHours(0,0,0,0),d.setHours(0,0,0,0),w.setHours(0,0,0,0),w>=r&&w<=d})},Ue=(a,t)=>{const e=new Date(t.start_date),n=new Date(t.end_date),r=new Date(a);e.setHours(0,0,0,0),n.setHours(0,0,0,0),r.setHours(0,0,0,0);const d=r.getTime()===e.getTime(),w=r.getTime()===n.getTime(),ee=Math.round((n-e)/(1e3*60*60*24))+1,ye=Math.floor(ee/2),ie=new Date(e);ie.setDate(ie.getDate()+ye);const ve=r.getTime()===ie.getTime();return{isFirst:d,isLast:w,isMiddle:ve,isSingle:d&&w}},at=(a,t)=>{const e=Ue(a,t);return e.isMiddle||e.isSingle},Be=a=>Q.value.filter(t=>t.beer_id===a),Ce=a=>{const t=Be(a);return t.length===0?!1:t.every(e=>e.locked)},ht=async(a,t)=>{const e=Be(a.beer_id);if(e.length!==0)try{if(t){for(const n of e)if(!n.locked){const r=await Ye.create({beer_id:a.beer_id,beer_name:a.name,task_type:n.task_type,start_day:n.start_day,start_date:n.start_date,duration:n.duration,end_day:n.end_day,end_date:n.end_date,resource:n.resource,volume_hl:a.volume_hl}),d=Q.value.findIndex(w=>w.beer_id===a.beer_id&&w.task_type===n.task_type);d!==-1&&(Q.value[d]={...Q.value[d],task_id:r.task_id,locked:!0})}o.notify({type:"positive",message:"All tasks pinned",caption:a.name,icon:"push_pin"})}else{for(const n of e)if(n.locked&&n.task_id){await Ye.delete(n.task_id);const r=Q.value.findIndex(d=>d.beer_id===a.beer_id&&d.task_type===n.task_type);r!==-1&&(Q.value[r]={...Q.value[r],task_id:null,locked:!1})}o.notify({type:"positive",message:"All tasks unpinned",caption:a.name,icon:"push_pin"})}}catch(n){o.notify({type:"negative",message:t?"Failed to pin tasks":"Failed to unpin tasks",caption:n.response?.data?.message||n.message})}},st=(a,t)=>{const e=T(a.date,t),n=e.length>0,r={today:a.isToday,weekend:a.isWeekend,holiday:a.isHoliday,"has-task":n};if(n){const d=Ue(a.date,e[0]);r["task-first"]=d.isFirst&&!d.isSingle,r["task-last"]=d.isLast&&!d.isSingle,r["task-middle"]=!d.isFirst&&!d.isLast,r["task-single"]=d.isSingle}return r},bt=a=>{o.notify({type:"info",message:`Viewing ${a.name}`,caption:"Feature coming soon..."})},nt=async(a,t)=>{if(t)if(t.locked&&t.task_id&&(a.metaKey||a.ctrlKey)){const e=a.shiftKey?-1:1;try{await Ye.adjustDuration(t.task_id,e),o.notify({type:"positive",message:`Task duration ${e>0?"increased":"decreased"} by 1 day`,icon:"schedule"}),await M(),await j()}catch(n){o.notify({type:"negative",message:"Failed to adjust task duration",caption:n.response?.data?.message||n.message})}}else bt(t)},wt=a=>{o.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${a.name} (${a.batch_id})?`,cancel:!0,persistent:!0}).onOk(async()=>{await kt(a.beer_id)})},kt=async a=>{try{await se.delete(a),o.notify({type:"positive",message:"Beer deleted successfully",icon:"delete"}),await M(),await j()}catch(t){o.notify({type:"negative",message:"Failed to delete beer",caption:t.response?.data?.message||t.message})}},Dt=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<=0){o.notify({type:"negative",message:"Invalid volume",caption:"Must be greater than 0"});return}const n={...a,volume_hl:e};await se.update(a.beer_id,n),o.notify({type:"positive",message:"Volume updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update volume",caption:e.response?.data?.message||e.message})}},xt=async(a,t)=>{try{const e={...a,priority:t};await se.update(a.beer_id,e),o.notify({type:"positive",message:"Priority updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update priority",caption:e.response?.data?.message||e.message})}},St=async(a,t)=>{try{const e=Number(t);if(isNaN(e)||e<0){o.notify({type:"negative",message:"Invalid fermentation days",caption:"Must be 0 or greater"});return}const n={...a,min_fermentation_days:e};await se.update(a.beer_id,n),o.notify({type:"positive",message:"Min fermentation days updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update min fermentation days",caption:e.response?.data?.message||e.message})}},qt=async(a,t)=>{try{const e={...a,target_start_date:t||null};await se.update(a.beer_id,e),o.notify({type:"positive",message:"Target start date updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update target start date",caption:e.response?.data?.message||e.message})}},Tt=async(a,t)=>{try{const e={...a,target_completion_date:t||null};await se.update(a.beer_id,e),o.notify({type:"positive",message:"Target completion date updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update target completion date",caption:e.response?.data?.message||e.message})}},Bt=async(a,t)=>{try{const e={...a,requires_canning:t};await se.update(a.beer_id,e),o.notify({type:"positive",message:"Requires canning updated successfully",icon:"check"}),await M(),await j()}catch(e){o.notify({type:"negative",message:"Failed to update requires canning",caption:e.response?.data?.message||e.message})}},Ct=()=>{const a=new Date(K.value);a.setDate(a.getDate()-30),K.value=a},It=()=>{const a=new Date(K.value);a.setDate(a.getDate()+30),K.value=a},$t=()=>{K.value=new Date},Vt=a=>{switch(a){case 5:return"red";case 4:return"orange";case 3:return"amber";case 2:return"blue";case 1:return"grey";default:return"grey"}},He=async()=>{try{oe.value=await Ke.getAll()}catch(a){console.error("Failed to load canning days:",a)}},Ft=a=>oe.value.includes(a),Mt=async()=>{if(J.value){ge.value=!0;try{await Ke.create(J.value),await He(),J.value=null,o.notify({type:"positive",message:"Canning day added",icon:"event"})}catch(a){o.notify({type:"negative",message:"Failed to add canning day",caption:a.response?.data?.message||a.message})}finally{ge.value=!1}}},Lt=async a=>{try{await Ke.delete(a),await He(),o.notify({type:"positive",message:"Canning day removed",icon:"event_busy"})}catch(t){o.notify({type:"negative",message:"Failed to remove canning day",caption:t.response?.data?.message||t.message})}},At=a=>new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),we=a=>{if(a==null)return null;const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);return e.setDate(e.getDate()+a),O(e)},Nt=a=>!a||a.length===0?"None":a.map(t=>we(t)).join(", ");return la(async()=>{await Promise.all([R(),M(),He()]),await j()}),(a,t)=>(c(),z(ya,{class:"schedule-page"},{default:u(()=>[l("div",ba,[l("div",wa,[t[25]||(t[25]=l("div",{class:"text-h5 q-mb-md"},"Create Beer",-1)),V.value?(c(),h("div",ka,[i(dt,{color:"primary",size:"md"})])):(c(),h("div",Da,[i(je,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),options:f.value,"option-label":"beer_name","option-value":"beer_template_id",label:"Select Beer Template",outlined:"",disable:!f.value||f.value.length===0},{"no-option":u(()=>[i(Xe,null,{default:u(()=>[i(X,{class:"text-grey"},{default:u(()=>[...t[9]||(t[9]=[_(" No templates available ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"]),v.value?(c(),z(Fe,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:u(()=>[i(Se,null,{default:u(()=>[l("div",xa,m(v.value.beer_name),1),i(fe,{class:"q-my-sm"}),l("div",Sa,[l("div",null,[t[10]||(t[10]=l("strong",null,"Volume:",-1)),_(" "+m(v.value.volume_hl)+" hl",1)]),l("div",null,[t[11]||(t[11]=l("strong",null,"Maturation:",-1)),_(" "+m(v.value.min_maturation_days)+" days",1)])]),i(fe,{class:"q-my-sm"}),i(Y,{ref_key:"batchIdInput",ref:H,modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e),label:"Batch ID *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>!!e||"Batch ID is required"]},null,8,["modelValue","rules"]),i(Y,{ref_key:"minFermentationDaysInput",ref:L,modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),modelModifiers:{number:!0},label:"Min Fermentation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min fermentation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(Y,{ref_key:"minMaturationDaysInput",ref:W,modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=e=>x.value=e),modelModifiers:{number:!0},label:"Min Maturation Days *",type:"number",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!==null&&e!==""&&e!==void 0||"Min maturation days is required",e=>e>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"]),i(je,{ref_key:"priorityInput",ref:ue,modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=e=>q.value=e),options:[1,2,3],label:"Priority *",outlined:"",dense:"",class:"q-mt-sm",rules:[e=>e!=null||"Priority is required"]},null,8,["modelValue","rules"]),i(Y,{ref_key:"targetStartDateInput",ref:ce,modelValue:$.value,"onUpdate:modelValue":t[5]||(t[5]=e=>$.value=e),label:"Target Start Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(Y,{ref_key:"targetDateInput",ref:y,modelValue:U.value,"onUpdate:modelValue":t[6]||(t[6]=e=>U.value=e),label:"Target Completion Date",outlined:"",dense:"",type:"date",class:"q-mt-sm"},null,8,["modelValue"]),i(te,{color:"primary",icon:"add",label:"Create Beer",class:"full-width q-mt-md",disable:!D.value||k.value===null||x.value===null||q.value===null||A.value,loading:A.value,onClick:Qe},null,8,["disable","loading"])]),_:1})]),_:1})):B("",!0),i(fe,{class:"q-my-md"}),t[24]||(t[24]=l("div",{class:"text-h6 q-mb-md"},"Canning Days",-1)),l("div",qa,[i(Y,{modelValue:J.value,"onUpdate:modelValue":t[7]||(t[7]=e=>J.value=e),type:"date",label:"Add Canning Day",outlined:"",dense:"",class:"col"},null,8,["modelValue"]),i(te,{color:"primary",icon:"add",disable:!J.value||ge.value,loading:ge.value,onClick:Mt},{default:u(()=>[i(ze,null,{default:u(()=>[...t[12]||(t[12]=[_("Add Canning Day",-1)])]),_:1})]),_:1},8,["disable","loading"])]),oe.value.length>0?(c(),h("div",Ta,[(c(!0),h(ae,null,le(oe.value,e=>(c(),z(ga,{key:e,removable:"",color:"red","text-color":"white",onRemove:n=>Lt(e)},{default:u(()=>[_(m(At(e)),1)]),_:2},1032,["onRemove"]))),128))])):(c(),h("div",Ba," No canning days scheduled ")),i(fe,{class:"q-my-md"}),l("div",Ca,[t[13]||(t[13]=l("div",{class:"text-h6"},"Batches",-1)),i(te,{flat:"",dense:"",round:"",icon:"calendar_today",size:"sm",color:"primary",loading:he.value,disable:!be.value,onClick:j},{default:u(()=>[i(ze,null,{default:u(()=>[_(m(be.value?"Schedule Beers":"No beers to schedule"),1)]),_:1})]),_:1},8,["loading","disable"])]),P.value?(c(),h("div",Ia,[i(dt,{color:"primary",size:"md"})])):Z.value.length>0?(c(),z(ut,{key:4},{default:u(()=>[(c(!0),h(ae,null,le(Z.value,e=>(c(),z(gt,{key:e.beer_id,"expand-separator":"",class:Me(["color-indicator",{"beer-locked":Ce(e.beer_id)}]),style:Re(_t(e.beer_id))},{header:u(()=>[i(X,null,{default:u(()=>[i(de,null,{default:u(()=>[_(m(e.name),1)]),_:2},1024),i(de,{caption:""},{default:u(()=>[_(m(e.batch_id),1)]),_:2},1024)]),_:2},1024),i(X,{side:""},{default:u(()=>[l("div",$a,[Ce(e.beer_id)?(c(),z(G,{key:0,name:"lock",size:"xs",color:"grey-7"})):B("",!0),i(ct,{color:Vt(e.priority)},{default:u(()=>[_(" P"+m(e.priority),1)]),_:2},1032,["color"])])]),_:2},1024)]),default:u(()=>[i(Fe,{flat:""},{default:u(()=>[i(Se,{class:"q-pt-none"},{default:u(()=>[l("div",Va,[t[15]||(t[15]=l("div",{class:"text-subtitle2"},"Beer Details",-1)),i(te,{flat:"",dense:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:n=>wt(e)},{default:u(()=>[i(ze,null,{default:u(()=>[...t[14]||(t[14]=[_("Delete Beer",-1)])]),_:1})]),_:1},8,["onClick"])]),l("div",Fa,[l("div",Ma,[t[16]||(t[16]=l("span",{class:"detail-label"},"Batch ID:",-1)),l("span",null,m(e.batch_id),1)]),l("div",La,[t[17]||(t[17]=l("span",{class:"detail-label"},"Volume:",-1)),i(Y,{"model-value":e.volume_hl,type:"number",suffix:"hl",dense:"",outlined:"",style:{"max-width":"100px"},rules:[n=>n>0||"Must be greater than 0"],"onUpdate:modelValue":n=>Dt(e,n)},null,8,["model-value","rules","onUpdate:modelValue"])]),l("div",Aa,[t[18]||(t[18]=l("span",{class:"detail-label"},"Priority:",-1)),i(je,{"model-value":e.priority,options:[1,2,3],dense:"",outlined:"",style:{"max-width":"80px"},"onUpdate:modelValue":n=>xt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),l("div",Na,[t[19]||(t[19]=l("span",{class:"detail-label"},"Min Fermentation:",-1)),i(Y,{"model-value":e.min_fermentation_days,type:"number",suffix:"days",dense:"",outlined:"",style:{"max-width":"120px"},rules:[n=>n>=0||"Must be 0 or greater"],onChange:n=>St(e,n.target.value)},null,8,["model-value","rules","onChange"])]),l("div",Pa,[t[20]||(t[20]=l("span",{class:"detail-label"},"Target Start:",-1)),i(Y,{"model-value":e.target_start_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>qt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),l("div",Ea,[t[21]||(t[21]=l("span",{class:"detail-label"},"Target Completion:",-1)),i(Y,{"model-value":e.target_completion_date||"",type:"date",dense:"",outlined:"",style:{"max-width":"150px"},"onUpdate:modelValue":n=>Tt(e,n)},null,8,["model-value","onUpdate:modelValue"])]),l("div",Qa,[t[22]||(t[22]=l("span",{class:"detail-label"},"Requires Canning:",-1)),i(oa,{"model-value":e.requires_canning||!1,dense:"","onUpdate:modelValue":n=>Bt(e,n)},null,8,["model-value","onUpdate:modelValue"])])]),Be(e.beer_id).length>0?(c(),h("div",Ua,[l("div",Ha,[t[23]||(t[23]=l("div",{class:"text-subtitle2"},"Scheduled Tasks",-1)),i(ia,{"model-value":Ce(e.beer_id),label:"Pin All",dense:"",size:"sm","onUpdate:modelValue":n=>ht(e,n)},null,8,["model-value","onUpdate:modelValue"])]),(c(!0),h(ae,null,le(Be(e.beer_id),n=>(c(),h("div",{key:`${e.beer_id}-${n.task_type}`,class:"task-row"},[l("span",Oa,m(n.task_type),1),n.locked?(c(),z(G,{key:0,name:"push_pin",size:"xs",color:"primary"})):B("",!0)]))),128))])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","style"]))),128))]),_:1})):(c(),h("div",Ra," No beers scheduled yet "))]))]),l("div",ja,[l("div",za,[t[26]||(t[26]=l("div",{class:"text-h4"},"Schedule",-1)),l("div",Wa,[i(te,{flat:"",dense:"",round:"",icon:"chevron_left",onClick:Ct}),l("div",Ka,m(Pe.value),1),i(te,{flat:"",dense:"",round:"",icon:"chevron_right",onClick:It}),i(te,{flat:"",label:"Today",onClick:$t})])]),l("div",Ya,[l("div",Ga,[t[27]||(t[27]=l("div",{class:"schedule-header"},"Date",-1)),t[28]||(t[28]=l("div",{class:"schedule-header"},"Brewhouse",-1)),t[29]||(t[29]=l("div",{class:"schedule-header"},[l("div",null,"F6"),l("div",{class:"volume-label"},"20hl")],-1)),t[30]||(t[30]=l("div",{class:"schedule-header"},[l("div",null,"F5"),l("div",{class:"volume-label"},"20hl")],-1)),t[31]||(t[31]=l("div",{class:"schedule-header"},[l("div",null,"F4"),l("div",{class:"volume-label"},"20hl")],-1)),t[32]||(t[32]=l("div",{class:"schedule-header"},[l("div",null,"F3"),l("div",{class:"volume-label"},"20hl")],-1)),t[33]||(t[33]=l("div",{class:"schedule-header"},[l("div",null,"F2"),l("div",{class:"volume-label"},"10hl")],-1)),t[34]||(t[34]=l("div",{class:"schedule-header"},[l("div",null,"F1"),l("div",{class:"volume-label"},"10hl")],-1)),t[35]||(t[35]=l("div",{class:"schedule-header"},[l("div",null,"B1"),l("div",{class:"volume-label"},"10hl")],-1)),t[36]||(t[36]=l("div",{class:"schedule-header"},[l("div",null,"B2"),l("div",{class:"volume-label"},"20hl")],-1)),(c(!0),h(ae,null,le(Ee.value,e=>(c(),h(ae,{key:e.date},[l("div",{class:Me(["schedule-cell date-cell",{today:e.isToday,weekend:e.isWeekend,holiday:e.isHoliday,"canning-day":Ft(e.date)}])},[l("div",Xa,m(e.label),1)],2),l("div",{class:Me(["schedule-cell tank-cell",st(e,"Brewhouse")]),style:Re(tt(e,"Brewhouse")),onClick:n=>T(e.date,"Brewhouse").length>0?nt(n,T(e.date,"Brewhouse")[0]):null},[T(e.date,"Brewhouse").length>0&&at(e.date,T(e.date,"Brewhouse")[0])?(c(),h("div",Ja,[l("div",es,[_(m(T(e.date,"Brewhouse")[0].beer_name)+" ",1),T(e.date,"Brewhouse")[0].batch_id?(c(),h("span",ts,m(T(e.date,"Brewhouse")[0].batch_id),1)):B("",!0)]),l("div",as,m(T(e.date,"Brewhouse")[0].task_type),1)])):B("",!0)],14,Za),(c(),h(ae,null,le(Ne,n=>l("div",{key:`${e.date}-${n}`,class:Me(["schedule-cell tank-cell",st(e,n)]),style:Re(tt(e,n)),onClick:r=>T(e.date,n).length>0?nt(r,T(e.date,n)[0]):null},[T(e.date,n).length>0&&at(e.date,T(e.date,n)[0])?(c(),h("div",ns,[l("div",ls,[_(m(T(e.date,n)[0].beer_name)+" ",1),T(e.date,n)[0].batch_id?(c(),h("span",os,m(T(e.date,n)[0].batch_id),1)):B("",!0)]),l("div",is,m(T(e.date,n)[0].task_type),1)])):B("",!0)],14,ss)),64))],64))),128))])])])]),i(ra,{modelValue:me.value,"onUpdate:modelValue":t[8]||(t[8]=e=>me.value=e),persistent:""},{default:u(()=>[i(Fe,{style:{"min-width":"500px","max-width":"700px"}},{default:u(()=>[i(Se,{class:"row items-center q-pb-none"},{default:u(()=>[l("div",rs,[i(G,{name:"error",class:"q-mr-sm"}),t[37]||(t[37]=_(" Scheduling Failed ",-1))]),i(ma),Ge(i(te,{icon:"close",flat:"",round:"",dense:""},null,512),[[yt]])]),_:1}),F.value?(c(),z(Se,{key:0},{default:u(()=>[l("div",ds,m(F.value.message),1),F.value.diagnostic?.warnings?.length>0?(c(),h("div",us,[l("div",cs,[i(G,{name:"warning",color:"warning",class:"q-mr-xs"}),t[38]||(t[38]=_(" Warnings ",-1))]),i(ut,{dense:"",bordered:"",separator:"",class:"rounded-borders"},{default:u(()=>[(c(!0),h(ae,null,le(F.value.diagnostic.warnings,(e,n)=>(c(),z(Xe,{key:n},{default:u(()=>[i(X,null,{default:u(()=>[i(de,{class:"text-body2"},{default:u(()=>[_(m(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):B("",!0),F.value.diagnostic?.canning?(c(),h("div",gs,[l("div",ms,[i(G,{name:"inventory_2",color:"primary",class:"q-mr-xs"}),t[39]||(t[39]=_(" Canning Constraints ",-1))]),l("div",ys,[l("div",null,[t[40]||(t[40]=l("strong",null,"Available canning days:",-1)),_(" "+m(Nt(F.value.diagnostic.canning.available_days)),1)]),l("div",null,[t[41]||(t[41]=l("strong",null,"Beers requiring canning:",-1)),_(" "+m(F.value.diagnostic.canning.beers_requiring_canning),1)])])])):B("",!0),F.value.diagnostic?.beer_diagnostics?.length>0?(c(),h("div",vs,[l("div",ps,[i(G,{name:"sports_bar",color:"amber",class:"q-mr-xs"}),t[42]||(t[42]=_(" Beer Details ",-1))]),(c(!0),h(ae,null,le(F.value.diagnostic.beer_diagnostics,e=>(c(),z(gt,{key:e.id,dense:"","expand-separator":"","header-class":e.warnings?.length>0?"text-negative":""},{header:u(()=>[i(X,{avatar:""},{default:u(()=>[i(G,{name:e.warnings?.length>0?"error":"check_circle",color:e.warnings?.length>0?"negative":"positive",size:"sm"},null,8,["name","color"])]),_:2},1024),i(X,null,{default:u(()=>[i(de,null,{default:u(()=>[_(m(e.name),1)]),_:2},1024),i(de,{caption:""},{default:u(()=>[_(m(e.volume_hl)+" hl",1)]),_:2},1024)]),_:2},1024),e.warnings?.length>0?(c(),z(X,{key:0,side:""},{default:u(()=>[i(ct,{color:"negative"},{default:u(()=>[_(m(e.warnings.length)+" warning(s)",1)]),_:2},1024)]),_:2},1024)):B("",!0)]),default:u(()=>[i(Fe,{flat:""},{default:u(()=>[i(Se,{class:"q-pt-none"},{default:u(()=>[e.warnings?.length>0?(c(),h("div",_s,[(c(!0),h(ae,null,le(e.warnings,(n,r)=>(c(),h("div",{key:r,class:"text-negative text-body2 q-mb-xs"},[i(G,{name:"warning",size:"xs",class:"q-mr-xs"}),_(" "+m(n),1)]))),128))])):B("",!0),l("div",fs,[l("div",hs,[l("div",bs,[t[43]||(t[43]=l("span",{class:"text-grey-7"},"Brew days:",-1)),_(" "+m(e.brew_days),1)]),l("div",ws,[t[44]||(t[44]=l("span",{class:"text-grey-7"},"Min fermentation:",-1)),_(" "+m(e.min_fermentation_days)+" days ",1)]),l("div",ks,[t[45]||(t[45]=l("span",{class:"text-grey-7"},"Min maturation:",-1)),_(" "+m(e.min_maturation_days)+" days ",1)]),l("div",Ds,[t[46]||(t[46]=l("span",{class:"text-grey-7"},"Min to completion:",-1)),_(" "+m(e.min_days_to_completion)+" days ",1)]),l("div",xs,[t[47]||(t[47]=l("span",{class:"text-grey-7"},"Requires canning:",-1)),_(" "+m(e.requires_canning?"Yes":"No"),1)]),e.target_start_day!==null?(c(),h("div",Ss,[t[48]||(t[48]=l("span",{class:"text-grey-7"},"Target start:",-1)),_(" "+m(we(e.target_start_day)),1)])):B("",!0),e.target_completion_day!==null?(c(),h("div",qs,[t[49]||(t[49]=l("span",{class:"text-grey-7"},"Target completion:",-1)),_(" "+m(we(e.target_completion_day)),1)])):B("",!0),e.earliest_possible_completion!==null&&e.earliest_possible_completion!==void 0?(c(),h("div",Ts,[t[50]||(t[50]=l("span",{class:"text-grey-7"},"Earliest completion:",-1)),_(" "+m(we(e.earliest_possible_completion)),1)])):B("",!0),e.earliest_feasible_canning_day!==null?(c(),h("div",Bs,[t[51]||(t[51]=l("span",{class:"text-grey-7"},"Earliest canning:",-1)),_(" "+m(we(e.earliest_feasible_canning_day)),1)])):B("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["header-class"]))),128))])):B("",!0),l("div",Cs," Solver status: "+m(F.value.diagnostic?.solver_status),1)]),_:1})):B("",!0),i(da,{align:"right"},{default:u(()=>[Ge(i(te,{flat:"",label:"Close",color:"primary"},null,512),[[yt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ns=ha(Is,[["__scopeId","data-v-ac875ee6"]]);export{Ns as default};
